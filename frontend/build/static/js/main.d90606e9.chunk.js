(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{254:function(e,t,a){},255:function(e,t,a){},257:function(e,t,a){},258:function(e,t,a){},284:function(e,t,a){},297:function(e,t,a){},298:function(e,t,a){},299:function(e,t,a){},300:function(e,t,a){},301:function(e,t,a){},302:function(e,t,a){},303:function(e,t,a){},304:function(e,t,a){},305:function(e,t,a){},327:function(e,t,a){},328:function(e,t,a){},330:function(e,t,a){},331:function(e,t,a){},332:function(e,t,a){},333:function(e,t,a){},334:function(e,t,a){},335:function(e,t,a){},336:function(e,t,a){},337:function(e,t,a){},358:function(e,t,a){},359:function(e,t,a){},360:function(e,t,a){},361:function(e,t,a){},362:function(e,t,a){},363:function(e,t,a){},364:function(e,t,a){},365:function(e,t,a){},366:function(e,t,a){},367:function(e,t,a){},368:function(e,t,a){},369:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),c=a(24),r=a.n(c),i=(a(254),a(255),a(6)),o=a.n(i),l=a(11),u=a(7),d=a(445),j=a(444),p=a(414),b=a(240),m=(a(257),a(176),a(412)),x=a(413),h=a(26),O=a(18),v=a(209),g=a.n(v),f=(a(258),a(207)),N=a(111),w=a(2);function k(e){var t,a=e.notification,n=e.handleAccept,s=e.handleDeny;return Object(w.jsxs)("div",{className:"notiWrapper",children:[Object(w.jsxs)("div",{className:"notiContainer",children:[Object(w.jsx)("span",{className:"notiContainerUsername",children:a?(t=a.senderName,(null===t||void 0===t?void 0:t.length)&&1===t.length?t[0]:(null===t||void 0===t?void 0:t.length)&&2===t.length?t[0]+" and 1 other":(null===t||void 0===t?void 0:t.length)?t[0]+" and "+(t.length-1).toString()+" others":"No Name"):"username"})," ","has invited you to join"," ",Object(w.jsx)("span",{className:"notiContainerGroupName",children:a?a.invitationName:"group name"}),"."]}),Object(w.jsxs)(f.a,{className:"notibuttonGroupWrapper",children:[Object(w.jsx)(N.a,{children:Object(w.jsx)("div",{className:"acceptButtonWrapper",onClick:function(){n(a)},children:Object(w.jsx)("div",{className:"acceptButton",children:Object(w.jsx)("span",{className:"acceptButtonText",children:"Accept"})})})}),Object(w.jsx)(N.a,{children:Object(w.jsx)("div",{className:"denyButtonWrapper",onClick:function(){return s(a)},children:Object(w.jsx)("div",{className:"denyButton",children:Object(w.jsx)("span",{className:"denyButtonText",children:"Deny"})})})})]})]})}var I=a(8),y=a.n(I);function C(e){var t=e.currentUser,a=e.handleUpdateGroup,s="http://localhost:8080/images/",c=Object(h.g)(),r=Object(n.useState)(""),i=Object(u.a)(r,2),v=i[0],f=i[1],N=Object(n.useState)([]),I=Object(u.a)(N,2),C=I[0],S=I[1],P=Object(n.useState)("item"),T=Object(u.a)(P,2),_=T[0],E=T[1];Object(n.useEffect)((function(){(function(){var e=Object(l.a)(o.a.mark((function e(){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=11;break}return e.prev=1,e.next=4,y.a.get("/api/notifications/filter?userId="+t._id);case 4:200===(a=e.sent).status&&S(a.data),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}})()()}),[t]);var L=Object(w.jsx)(g.a,{className:"userNotificationIcon",htmlColor:"orange"}),U=function(){var e=Object(l.a)(o.a.mark((function e(n){var s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n||!t){e.next=15;break}return e.prev=1,e.next=4,y.a.delete("/api/notifications?notificationId="+n._id);case 4:return 200===e.sent.status&&S(C.filter((function(e){return e.invitationId!==n.invitationId}))),e.next=8,y.a.put("/api/groups/"+n.invitationId+"/addMember/"+t._id);case 8:200===(s=e.sent).status&&a&&a([s.data]),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}(),B=function(){var e=Object(l.a)(o.a.mark((function e(a){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a||!t){e.next=11;break}return e.prev=1,e.next=4,y.a.delete("/api/notifications?notificationId="+a._id);case 4:200===e.sent.status&&S(C.filter((function(e){return e._id!==a._id}))),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(w.jsxs)(d.a,{className:"topbarWrapper fixed-top",expand:"lg",children:[Object(w.jsxs)(d.a.Brand,{onClick:function(){c.push("/home")},children:[Object(w.jsx)("img",{className:"ReHashLogo",src:s+"ReHashLogo.png",alt:""}),Object(w.jsx)("span",{className:"logoText",children:"ReHash"})]}),Object(w.jsx)(d.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(w.jsx)(d.a.Collapse,{id:"basic-navbar-nav",className:"collapseBar",children:Object(w.jsxs)(j.a,{className:"mr-auto",children:[Object(w.jsx)(j.a.Link,{className:"swap",onClick:function(){c.push("/create")},children:"Swap on ReHash"}),Object(w.jsxs)("div",{className:"searchbar",children:[Object(w.jsx)(m.a,{className:"searchIcon"}),Object(w.jsx)("input",{placeholder:"Seach for groups or swap items...",className:"searchInput",value:v,onChange:function(e){return f(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&(e.preventDefault(),(v.match(/^\s*\n*\t*$/)||[]).length>0?console.log("search string is empty!"):"item"===_?c.push("/product/search/"+v):"group"===_&&c.push("/groups/search/"+v))}}),Object(w.jsxs)("select",{name:"choice",className:"searchInputSelect",value:_,onChange:function(e){return E(e.target.value)},children:[Object(w.jsx)("option",{value:"item",selected:!0,children:"item"}),Object(w.jsx)("option",{value:"group",children:"group"})]})]}),Object(w.jsx)(O.b,{to:"/chat/0",children:Object(w.jsx)(x.a,{className:"chat",htmlColor:"orange"})}),Object(w.jsxs)(p.a,{className:"userNotification",variant:"warning",title:L,children:[Object(w.jsx)("div",{className:"userNotificationLabel",children:"Notifications"}),Object(w.jsx)("div",{className:"userNotificationList",children:C.length>0?C.map((function(e){return Object(w.jsx)(b.a.Item,{children:Object(w.jsx)(k,{notification:e,handleAccept:U,handleDeny:B})},e._id)})):Object(w.jsx)("div",{className:"userNoNotificationsLabel",children:"No notifcations"})})]}),Object(w.jsx)(O.b,{to:t?"/profile/"+t.username+"/listings":"/",children:Object(w.jsx)("img",{className:"userProfilePic",src:t&&t.profilePicture?s+t.profilePicture:s+"person/noAvatar.png",alt:"userProfile"})})]})})]})}var S=a(214),P=a(415),T=a(416),_=a(417),E=a(418),L=a(419),U=a(420),B=a(421),R=a(422),D=(a(284),a(98)),A=a.n(D);a(119);function F(){var e=Object(h.g)(),t=function(t){e.push("/product/categories/"+t)};return Object(w.jsxs)(A.a,{responsive:{superLargeDesktop:{breakpoint:{max:4e3,min:3e3},items:8},xl:{breakpoint:{max:3e3,min:1200},items:6},lg:{breakpoint:{max:1200,min:992},items:5},md:{breakpoint:{max:992,min:768},items:4},sm:{breakpoint:{max:768,min:576},items:3},xs:{breakpoint:{max:576,min:0},items:2}},children:[Object(w.jsx)("div",{className:"item",onClick:function(){return t("clothing")},children:Object(w.jsx)("div",{className:"button",children:Object(w.jsx)(S.a,{className:"itemButton",children:Object(w.jsxs)(N.a,{children:[Object(w.jsx)(f.a,{children:Object(w.jsx)(P.a,{className:"itemIcon"})}),Object(w.jsx)(f.a,{children:Object(w.jsx)("span",{className:"itemText text-center",children:"Clothing"})})]})})})}),Object(w.jsx)("div",{className:"item",onClick:function(){return t("beauty")},children:Object(w.jsx)("div",{className:"button",children:Object(w.jsx)(S.a,{className:"itemButton",children:Object(w.jsxs)(N.a,{children:[Object(w.jsx)(f.a,{children:Object(w.jsx)(T.a,{className:"itemIcon"})}),Object(w.jsx)(f.a,{children:Object(w.jsx)("span",{className:"itemText text-center",children:"Beauty"})})]})})})}),Object(w.jsx)("div",{className:"item",onClick:function(){return t("sports equipments")},children:Object(w.jsx)("div",{className:"button",children:Object(w.jsx)(S.a,{className:"itemButton",children:Object(w.jsxs)(N.a,{children:[Object(w.jsx)(f.a,{children:Object(w.jsx)(_.a,{className:"itemIcon"})}),Object(w.jsx)(f.a,{children:Object(w.jsx)("span",{className:"itemText text-center",children:"Sports Equipments"})})]})})})}),Object(w.jsx)("div",{className:"item",onClick:function(){return t("home appliances")},children:Object(w.jsx)("div",{className:"button",children:Object(w.jsx)(S.a,{className:"itemButton",children:Object(w.jsxs)(N.a,{children:[Object(w.jsx)(f.a,{children:Object(w.jsx)(E.a,{className:"itemIcon"})}),Object(w.jsx)(f.a,{children:Object(w.jsx)("span",{className:"itemText text-center",children:"Home Appliances"})})]})})})}),Object(w.jsx)("div",{className:"item",onClick:function(){return t("automotive")},children:Object(w.jsx)("div",{className:"button",children:Object(w.jsx)(S.a,{className:"itemButton",children:Object(w.jsxs)(N.a,{children:[Object(w.jsx)(f.a,{children:Object(w.jsx)(L.a,{className:"itemIcon"})}),Object(w.jsx)(f.a,{children:Object(w.jsx)("span",{className:"itemText text-center",children:"Automotive"})})]})})})}),Object(w.jsx)("div",{className:"item",onClick:function(){return t("hobbies")},children:Object(w.jsx)("div",{className:"button",children:Object(w.jsx)(S.a,{className:"itemButton",children:Object(w.jsxs)(N.a,{children:[Object(w.jsx)(f.a,{children:Object(w.jsx)(U.a,{className:"itemIcon"})}),Object(w.jsx)(f.a,{children:Object(w.jsx)("span",{className:"itemText text-center",children:"Hobbies"})})]})})})}),Object(w.jsx)("div",{className:"item",onClick:function(){return t("computers and tech")},children:Object(w.jsx)("div",{className:"button",children:Object(w.jsx)(S.a,{className:"itemButton",children:Object(w.jsxs)(N.a,{children:[Object(w.jsx)(f.a,{children:Object(w.jsx)(B.a,{className:"itemIcon"})}),Object(w.jsx)(f.a,{children:Object(w.jsx)("span",{className:"itemText text-center",children:"Computers & Tech"})})]})})})}),Object(w.jsx)("div",{className:"item",onClick:function(){return t("other tangibles")},children:Object(w.jsx)("div",{className:"button",children:Object(w.jsx)(S.a,{className:"itemButton",children:Object(w.jsxs)(N.a,{children:[Object(w.jsx)(f.a,{children:Object(w.jsx)(R.a,{className:"itemIcon"})}),Object(w.jsx)(f.a,{children:Object(w.jsx)("span",{className:"itemText text-center",children:"Others"})})]})})})})]})}a(297),a(298);var M=a(423),G=a(424),W=a(425),H=a(426),z=a(427),J=a(428),q=a(429);function K(){var e=Object(h.g)(),t=function(t){e.push("/product/categories/"+t)};return Object(w.jsxs)(A.a,{responsive:{superLargeDesktop:{breakpoint:{max:4e3,min:3e3},items:8},xl:{breakpoint:{max:3e3,min:1200},items:6},lg:{breakpoint:{max:1200,min:992},items:5},md:{breakpoint:{max:992,min:768},items:4},sm:{breakpoint:{max:768,min:576},items:3},xs:{breakpoint:{max:576,min:0},items:2}},children:[Object(w.jsx)("div",{className:"item",onClick:function(){return t("outdoor activities")},children:Object(w.jsx)("div",{className:"button",children:Object(w.jsx)(S.a,{className:"itemButton",children:Object(w.jsxs)(N.a,{children:[Object(w.jsx)(f.a,{children:Object(w.jsx)(M.a,{className:"itemIcon"})}),Object(w.jsx)(f.a,{children:Object(w.jsx)("span",{className:"itemText text-center",children:"Outdoor Activities"})})]})})})}),Object(w.jsx)("div",{className:"item",onClick:function(){return t("travel")},children:Object(w.jsx)("div",{className:"button",children:Object(w.jsx)(S.a,{className:"itemButton",children:Object(w.jsxs)(N.a,{children:[Object(w.jsx)(f.a,{children:Object(w.jsx)(G.a,{className:"itemIcon"})}),Object(w.jsx)(f.a,{children:Object(w.jsx)("span",{className:"itemText text-center",children:"Travel"})})]})})})}),Object(w.jsx)("div",{className:"item",onClick:function(){return t("discussion")},children:Object(w.jsx)("div",{className:"button",children:Object(w.jsx)(S.a,{className:"itemButton",children:Object(w.jsxs)(N.a,{children:[Object(w.jsx)(f.a,{children:Object(w.jsx)(W.a,{className:"itemIcon"})}),Object(w.jsx)(f.a,{children:Object(w.jsx)("span",{className:"itemText text-center",children:"Discussion"})})]})})})}),Object(w.jsx)("div",{className:"item",onClick:function(){return t("food")},children:Object(w.jsx)("div",{className:"button",children:Object(w.jsx)(S.a,{className:"itemButton",children:Object(w.jsxs)(N.a,{children:[Object(w.jsx)(f.a,{children:Object(w.jsx)(H.a,{className:"itemIcon"})}),Object(w.jsx)(f.a,{children:Object(w.jsx)("span",{className:"itemText text-center",children:"Food"})})]})})})}),Object(w.jsx)("div",{className:"item",onClick:function(){return t("indoor activities")},children:Object(w.jsx)("div",{className:"button",children:Object(w.jsx)(S.a,{className:"itemButton",children:Object(w.jsxs)(N.a,{children:[Object(w.jsx)(f.a,{children:Object(w.jsx)(z.a,{className:"itemIcon"})}),Object(w.jsx)(f.a,{children:Object(w.jsx)("span",{className:"itemText text-center",children:"Indoor Activities"})})]})})})}),Object(w.jsx)("div",{className:"item",onClick:function(){return t("sports")},children:Object(w.jsx)("div",{className:"button",children:Object(w.jsx)(S.a,{className:"itemButton",children:Object(w.jsxs)(N.a,{children:[Object(w.jsx)(f.a,{children:Object(w.jsx)(J.a,{className:"itemIcon"})}),Object(w.jsx)(f.a,{children:Object(w.jsx)("span",{className:"itemText text-center",children:"Sports"})})]})})})}),Object(w.jsx)("div",{className:"item",onClick:function(){return t("games and esports")},children:Object(w.jsx)("div",{className:"button",children:Object(w.jsx)(S.a,{className:"itemButton",children:Object(w.jsxs)(N.a,{children:[Object(w.jsx)(f.a,{children:Object(w.jsx)(q.a,{className:"itemIcon"})}),Object(w.jsx)(f.a,{children:Object(w.jsx)("span",{className:"itemText text-center",children:"Games & Esports"})})]})})})}),Object(w.jsx)("div",{className:"item",onClick:function(){return t("other intangibles")},children:Object(w.jsx)("div",{className:"button",children:Object(w.jsx)(S.a,{className:"itemButton",children:Object(w.jsxs)(N.a,{children:[Object(w.jsx)(f.a,{children:Object(w.jsx)(R.a,{className:"itemIcon"})}),Object(w.jsx)(f.a,{children:Object(w.jsx)("span",{className:"itemText text-center",children:"Others"})})]})})})})]})}var $=a(447),V=(a(299),a(448));a(300);var Y=a(169);function Q(e){var t=e.itemArray,a="http://localhost:8080/images/",n=Object(h.g)(),s=function(e){return Object(w.jsx)("img",{className:"adsPics d-block",src:(null===e||void 0===e?void 0:e.img)&&e.img.length>0?a+e.img[0]:a+"group/noImageUploaded.png",alt:"cannot display"})};return Object(w.jsx)("div",{style:{width:"35%",outline:"none"},children:Object(w.jsxs)(Y.a,{className:"adsWrapper",children:[Object(w.jsx)(Y.a.Item,{interval:3e3,children:Object(w.jsx)("img",{className:"adsPics d-block",src:a+"group/trending.jpg",alt:"First slide"})}),t.map((function(e){return Object(w.jsx)(Y.a.Item,{interval:3e3,onClick:function(){n.push("/items/"+e._id)},children:s(e)},e._id)}))]})})}var X=function(e,t){switch(t.type){case"LOGIN_START":return{user:null,isFetching:!0,error:!1,sockio:null};case"LOGIN_SUCCESS":return{user:t.payload.user,isFetching:!1,error:!1,sockio:t.payload.sock};case"LOGIN_FAILURE":return{user:null,isFetching:!1,error:t.payload,sockio:null};case"LOGOUT_START":return{user:t.payload.user,isFetching:!0,error:!1,sockio:t.payload.sock};case"LOGOUT_SUCCESS":return{user:null,isFetching:!1,error:!1,sockio:null};case"LOGOUT_FAILURE":return{user:null,isFetching:!1,error:t.payload,sockio:null};case"UPDATE":return{user:t.payload.user,isFetching:!1,error:!1,sockio:t.payload.sock};default:return e}},Z={user:JSON.parse(localStorage.getItem("rehashUser"))||null,isFetching:!1,error:!1,sockio:null},ee=Object(n.createContext)(Z),te=function(e){var t=e.children,a=Object(n.useReducer)(X,Z),s=Object(u.a)(a,2),c=s[0],r=s[1];return Object(n.useEffect)((function(){localStorage.setItem("rehashUser",JSON.stringify(c.user))}),[c.user]),Object(w.jsx)(ee.Provider,{value:{user:c.user,isFetching:c.isFetching,error:c.error,sockio:c.sockio,dispatch:r},children:t})};a(301),a(302);function ae(e){var t=e.groupImg,a=e.groupName,s=e.groupId,c=e.create,r="http://localhost:8080/images/",i=Object(n.useContext)(ee),d=i.user,j=(i.sockio,Object(n.useState)("")),p=Object(u.a)(j,2),b=p[0],m=p[1],x=Object(h.g)(),O=function(){var e=Object(l.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((b.match(/^\s*\n*\t*$/)||[]).length>0)){e.next=5;break}console.log("newGroupName is empty!"),m(""),e.next=17;break;case 5:if(!d){e.next=17;break}return e.prev=6,t={creatorId:d._id,members:[d._id],description:"No description yet. Waiting for group creator to update description.",groupName:b},e.next=10,y.a.post("/api/groups",t);case 10:200===(a=e.sent).status&&(m(""),x.push("/groups/"+a.data._id+"/main")),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(6),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[6,14]])})));return function(){return e.apply(this,arguments)}}();return c?Object(w.jsxs)("div",{className:"groupIconButtonBackgroundCreate",children:[Object(w.jsx)("img",{className:"groupIconButtonImg",src:t?r+t:r+"group.noImageUploaded.png",onClick:O,alt:""}),Object(w.jsx)("textarea",{rows:3,className:"groupIconTextArea",placeholder:"Enter new group name (max 50 characters) and click '+'",value:b,onChange:function(e){e.target.value.length<=50&&m(e.target.value)}})]}):Object(w.jsxs)("div",{className:"groupIconButtonBackground",onClick:function(){s&&x.push("/groups/"+s+"/main")},children:[Object(w.jsx)("img",{className:"groupIconButtonImg",src:t?r+t:r+"group/noImageUploaded.png",alt:""}),Object(w.jsx)("div",{className:"groupIconButtonName",children:a||"No Group Name"})]})}function ne(e){var t=e.recommendedGroups;return t&&t.length>0?Object(w.jsx)(A.a,{responsive:{superLargeDesktop:{breakpoint:{max:4e3,min:3e3},items:8},xl:{breakpoint:{max:3e3,min:1200},items:6},lg:{breakpoint:{max:1200,min:992},items:5},md:{breakpoint:{max:992,min:800},items:4},sm:{breakpoint:{max:800,min:620},items:3},xs:{breakpoint:{max:620,min:0},items:2}},children:t.map((function(e){return Object(w.jsx)(ae,{groupName:e.groupName,groupImg:e.groupImg,groupId:e._id},e._id)}))}):Object(w.jsx)("div",{children:"No recommended groups."})}function se(){var e=Object(n.useContext)(ee),t=e.user,a=e.sockio,s=Object(n.useState)([]),c=Object(u.a)(s,2),r=c[0],i=c[1],d=Object(n.useState)([]),j=Object(u.a)(d,2),p=j[0],b=j[1];return Object(n.useEffect)((function(){console.log("socket is: ",null===a||void 0===a?void 0:a.id),console.log("user is: ",t)}),[a,t]),Object(n.useEffect)((function(){(function(){var e=Object(l.a)(o.a.mark((function e(){var a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t){e.next=8;break}return e.next=4,y.a.get("/api/groups/recommended/"+t._id);case 4:200===(a=e.sent).status&&i(a.data),e.next=12;break;case 8:return e.next=10,y.a.get("/api/groups/recommended/0");case 10:200===(n=e.sent).status&&i(n.data);case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}})()()}),[t]),Object(n.useEffect)((function(){(function(){var e=Object(l.a)(o.a.mark((function e(){var a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t){e.next=8;break}return e.next=4,y.a.get("/api/items/trendingSwaps?userId="+t._id);case 4:200===(a=e.sent).status&&b(a.data),e.next=12;break;case 8:return e.next=10,y.a.get("/api/items/trendingSwaps");case 10:200===(n=e.sent).status&&b(n.data);case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}})()()})),Object(w.jsxs)("div",{children:[Object(w.jsx)(C,{currentUser:t}),Object(w.jsx)("div",{className:"adContainer",children:Object(w.jsx)(Q,{itemArray:p})}),Object(w.jsxs)("div",{className:"homeWrapper",children:[Object(w.jsxs)("div",{className:"tangible",children:[Object(w.jsx)("div",{className:"itemsType",children:Object(w.jsx)("span",{children:"Explore Tangible"})}),Object(w.jsx)(F,{})]}),Object(w.jsxs)("div",{className:"intangible",children:[Object(w.jsx)("div",{className:"itemsType",children:Object(w.jsx)("span",{children:"Explore Intangible"})}),Object(w.jsx)(K,{})]}),Object(w.jsxs)("div",{className:"recommendedGroups",children:[Object(w.jsx)("div",{className:"itemsType",children:Object(w.jsx)("span",{children:"Recommended Groups"})}),Object(w.jsx)(ne,{recommendedGroups:r})]})]})]})}a(303);var ce=a(215),re=a.n(ce),ie=a(430);function oe(){var e=Object(n.useState)(""),t=Object(u.a)(e,2),a=t[0],s=t[1],c=Object(n.useState)(""),r=Object(u.a)(c,2),i=r[0],d=r[1],j=Object(n.useState)(""),p=Object(u.a)(j,2),b=p[0],m=p[1],x=Object(n.useState)(""),v=Object(u.a)(x,2),g=v[0],f=v[1],N=Object(n.useState)(""),k=Object(u.a)(N,2),I=k[0],C=k[1],S=Object(n.useState)(""),P=Object(u.a)(S,2),T=P[0],_=P[1],E=Object(n.useState)(!1),L=Object(u.a)(E,2),U=L[0],B=L[1],R=Object(h.g)(),D=function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return B(!0),t.preventDefault(),e.prev=2,e.next=5,y.a.get("/api/users?username="+i);case 5:200===e.sent.status&&(_("Username already taken"),B(!1)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),A();case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.a.get("/api/users?email="+a);case 3:200===e.sent.status&&(C("Email already taken"),B(!1)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),F();case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),F=function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(a),console.log(i),console.log(b),console.log(g),!(b.length>=6&&b===g)){e.next=20;break}return t={username:i,email:a,password:b},e.prev=6,e.next=9,y.a.post("/api/auth/register",t);case 9:200===e.sent.status&&(B(!1),R.push("/")),e.next=18;break;case 13:e.prev=13,e.t0=e.catch(6),alert("register failed due to server error"),B(!1),console.log(e.t0);case 18:e.next=21;break;case 20:B(!1);case 21:case"end":return e.stop()}}),e,null,[[6,13]])})));return function(){return e.apply(this,arguments)}}();return Object(w.jsx)("div",{className:"register",children:Object(w.jsxs)("div",{className:"registerWrapper",children:[Object(w.jsx)("div",{className:"registerLeft",children:Object(w.jsxs)("div",{className:"registerLeftWrapper  ",children:[Object(w.jsxs)("div",{className:"registerLeftTop ",children:[Object(w.jsx)("img",{className:"registerLeftLogo",src:"/assests/ReHashLogo.png",alt:"ReHash logo"}),Object(w.jsx)("span",{id:"registerText",className:"registerLeftLogoText ",children:"ReHash"})]}),Object(w.jsx)("span",{className:"registerLeftBottom",children:"Excited to embark on you ReHash journey? Sign up now!"})]})}),Object(w.jsxs)("div",{className:"registerRight",children:[Object(w.jsx)("div",{className:"registerRightTop",children:Object(w.jsxs)(O.b,{to:"/",className:"registerBack",children:[Object(w.jsx)(re.a,{}),Object(w.jsx)("span",{children:"Back"})]})}),Object(w.jsxs)("div",{className:"registerRightBottom",children:[Object(w.jsx)("div",{className:"registerRightHeader",children:Object(w.jsx)("h2",{children:"Register Individual Account!"})}),Object(w.jsxs)("form",{action:"",className:"registerBox",onSubmit:D,children:[Object(w.jsx)("span",{className:"registerInputLabel",children:"Your full name *"}),Object(w.jsx)("input",{placeholder:"Enter username",required:!0,value:i,onChange:function(e){console.log(e.target.value),d(e.target.value),""!==T&&_("")},className:"registerInput"}),Object(w.jsx)("span",{className:"registerInputError",children:T}),Object(w.jsx)("span",{className:"registerInputLabel",children:"Email address *"}),Object(w.jsx)("input",{placeholder:"Enter email address",required:!0,value:a,onChange:function(e){console.log(e.target.value),s(e.target.value),""!==I&&C("")},type:"email",className:"registerInput"}),Object(w.jsx)("span",{className:"registerInputError",children:I}),Object(w.jsx)("span",{className:"registerInputLabel",children:"Create password *"}),Object(w.jsx)("input",{placeholder:"Enter password with at least 6 characters",required:!0,value:b,onChange:function(e){console.log(e.target.value),m(e.target.value)},type:"password",className:"registerInput"}),Object(w.jsx)("span",{className:"registerInputError",children:""!==b&&b.length<6?"Password must have at least 6 characters":""}),Object(w.jsx)("span",{className:"registerInputLabel",children:"Confirm password *"}),Object(w.jsx)("input",{placeholder:"Confirm password",required:!0,value:g,onChange:function(e){console.log(e.target.value),f(e.target.value)},type:"password",className:"registerInput"}),Object(w.jsx)("span",{className:"registerInputError",children:""!==g&&""!==b&&g!==b?"Passwords don't match!":""}),Object(w.jsx)("button",{className:"registerButton",type:"submit",disabled:U,children:U?Object(w.jsx)(ie.a,{color:"white",size:"20px"}):"Register Account"})]})]})]})]})})}a(304);var le=a(435),ue=(a(305),a(449)),de=a(35),je=a(431),pe=a(432),be=a(433),me=a(434),xe=a(225),he=a.n(xe);function Oe(e){var t=e.sidebarUser,a="http://localhost:8080/images/",s=Object(n.useContext)(ee),c=s.user,r=s.sockio,i=s.dispatch,u=Object(h.g)(),d=function(){var e=Object(l.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a=function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"LOGOUT_START",payload:{user:c,sock:r}}),e.prev=1,e.next=4,r.disconnect();case 4:t({type:"LOGOUT_SUCCESS"}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),t({type:"LOGIN_FAILURE",payload:e.t0});case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),e.next=4,a(i);case 4:u.push("/"),console.log("logged out");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(w.jsx)("div",{className:"sidebar",children:Object(w.jsxs)(de.a,{textColor:"black",backgroundColor:"#FFD68D",children:[Object(w.jsx)(de.d,{prefix:Object(w.jsx)("i",{className:"fa fa-bars fa-large"}),children:Object(w.jsx)("img",{className:"userProfile",src:(null===t||void 0===t?void 0:t.profilePicture)?a+t.profilePicture:a+"person/noAvatar.png",alt:""})}),Object(w.jsxs)(de.d,{style:{textAlign:"center"},children:[Object(w.jsx)("div",{children:null===t||void 0===t?void 0:t.username}),Object(w.jsxs)("div",{className:"ratings",children:[Object(w.jsx)("div",{children:"Ratings: "}),Object(w.jsx)(ue.a,{value:t?t.cumulativeRating/t.ratedByUsers:3,precision:.1,readOnly:!0})]})]}),Object(w.jsx)(de.b,{children:Object(w.jsxs)(de.e,{children:[Object(w.jsxs)(de.f,{onClick:function(){u.push("/profile/"+(null===t||void 0===t?void 0:t.username)+"/listings"),console.log("done")},className:"sidebarMenuItem",children:[Object(w.jsx)(je.a,{className:"sidebarIcons"}),Object(w.jsx)("span",{className:"sidebarMenuText",children:"Listings"})]}),Object(w.jsxs)(de.f,{className:"sidebarMenuItem",onClick:function(){u.push("/profile/"+(null===t||void 0===t?void 0:t.username)+"/reviews")},children:[Object(w.jsx)(pe.a,{className:"sidebarIcons"}),Object(w.jsx)("span",{className:"sidebarMenuText",children:"Reviews"})]}),t&&t._id===(null===c||void 0===c?void 0:c._id)?Object(w.jsxs)(de.f,{className:"sidebarMenuItem",onClick:function(){u.push("/profile/"+(null===t||void 0===t?void 0:t.username)+"/mygroups")},children:[Object(w.jsx)(he.a,{className:"sidebarIcons"}),Object(w.jsx)("span",{className:"sidebarMenuText",children:"My Groups"})]}):Object(w.jsx)(w.Fragment,{}),t&&t._id===(null===c||void 0===c?void 0:c._id)?Object(w.jsxs)(de.f,{className:"sidebarMenuItem",onClick:function(){u.push("/profile/"+(null===t||void 0===t?void 0:t.username)+"/settings")},children:[Object(w.jsx)(be.a,{className:"sidebarIcons"}),Object(w.jsx)("span",{className:"sidebarMenuText",children:"Settings"})]}):Object(w.jsx)(w.Fragment,{})]})}),t&&t._id===(null===c||void 0===c?void 0:c._id)?Object(w.jsx)(de.c,{style:{textAlign:"center"},children:Object(w.jsxs)("div",{className:"sidebar-btn-wrapper",style:{padding:"20px 5px"},children:[Object(w.jsx)(me.a,{className:"sidebarIcons",onClick:d}),Object(w.jsx)("span",{className:"sidebarMenuText",onClick:d,children:"Log out"})]})}):Object(w.jsx)(w.Fragment,{})]})})}a(327);function ve(e){var t=e.item,a=e.inPost,s="http://localhost:8080/images/",c=Object(n.useContext)(ee),r=c.user,i=(c.sockio,Object(h.g)());return Object(n.useEffect)((function(){console.log(t)}),[t]),Object(w.jsx)("div",{className:"itemListingWrapper",onClick:function(){return function(){if(r&&r._id!==t.userId)try{y.a.put("/api/items/update/views/"+t._id)}catch(e){console.log(e),i.push("/items/"+t._id)}i.push("/items/"+t._id)}()},children:Object(w.jsx)($.a,{children:a?Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)($.a.Img,{src:s+(null===t||void 0===t?void 0:t.img[0])}),Object(w.jsx)($.a.Body,{className:"PostItemBody",children:null===t||void 0===t?void 0:t.title})]}):Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)($.a.Img,{variant:"top",src:s+t.img[0],className:"trendingSwapItemImg"}),Object(w.jsxs)($.a.Body,{className:"trendingSwapItemBody",children:[Object(w.jsxs)($.a.Title,{className:"itemListingCardTitle",children:[Object(w.jsx)("span",{style:{marginRight:"10px"},children:t.title}),Object(w.jsx)(V.a,{className:"tag",label:"waiting"===t.status?"available":t.status,size:"small",color:"waiting"===t.status?"":"reserved"===t.status?"primary":"secondary",style:{marginBottom:"5px",marginTop:"5px"}})]}),Object(w.jsx)("span",{className:"trendingSwapText",children:"Ideal Swap: "}),t.idealSwaps.map((function(e){return Object(w.jsx)(V.a,{className:"tag",label:e,size:"small",color:"secondary",style:{marginRight:"5px"}},e)})),Object(w.jsx)($.a.Text,{children:t.desc})]})]})})})}var ge=a(436),fe=a(442),Ne=a(437);a(328);function we(e){var t=e.fill,a=void 0===t?"none":t;return Object(w.jsx)("svg",{class:"w-6 h-6 star",fill:a,stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:Object(w.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"0",d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})})}function ke(e){var t=e.index,a=e.rating,s=e.hoverRating,c=e.onMouseEnter,r=e.onMouseLeave,i=e.onSaveRating,o=e.selected,l=e.notSelected,u=Object(n.useMemo)((function(){return s>=t||!s&&a>=t?"rgb(240, 158, 6)":"rgb(145, 144, 144)"}),[a,s,t]);return Object(w.jsx)("div",{style:{height:"20px",width:"20px"},className:"cursor-pointer",onMouseEnter:function(){return c(t)},onMouseLeave:function(){return r()},onClick:function(){return i(t)},children:o?Object(w.jsx)(we,{fill:"rgb(240, 158, 6)"}):l?Object(w.jsx)(we,{fill:"rgb(145, 144, 144)"}):Object(w.jsx)(we,{fill:u})})}a(329);function Ie(e){var t=e.review,a=e.doneReview,s=e.handleSubmit,c=e.handleDelete,r=Object(n.useState)(0),i=Object(u.a)(r,2),d=i[0],j=i[1],p=Object(n.useState)(0),b=Object(u.a)(p,2),m=b[0],x=b[1],h=Object(n.useContext)(ee).user,O="http://localhost:8080/images/",v=Object(n.useState)(null),g=Object(u.a)(v,2),f=g[0],N=g[1],k=Object(n.useState)(""),I=Object(u.a)(k,2),C=I[0],S=I[1];Object(n.useEffect)((function(){t&&function(){var e=Object(l.a)(o.a.mark((function e(){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.get("/api/users?userId="+t.reviewerId);case 2:a=e.sent,N(a.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[t]);var P=function(e){a||(x(e),console.log("hover rating is: "+e))},T=function(){a||x(0)},_=function(e){a||(j(e),console.log("your rating is: "+e))};return Object(w.jsxs)("div",{className:"userReview",children:[Object(w.jsxs)("div",{className:"userReviewTop",children:[Object(w.jsx)("img",{src:a?f&&f.profilePicture?O+f.profilePicture:O+"person/noAvatar.png":h&&h.profilePicture?O+h.profilePicture:O+"person/noAvatar.png",alt:"",className:"userReviewImg"}),Object(w.jsxs)("div",{className:"userReviewTopMiddle",children:[Object(w.jsx)("div",{className:"userReviewTopMiddleName",children:a?null===f||void 0===f?void 0:f.username:h?h.username:"Anonymous"}),Object(w.jsxs)("div",{className:"userReviewTopMiddleRatings",children:[Object(w.jsx)("div",{className:"userReviewTopMiddleRatingsText",children:"Ratings: "}),Object(w.jsx)("div",{className:"userReviewRatingStars",children:[1,2,3,4,5].map(t?function(e){return Object(w.jsx)(ke,{index:e,rating:d,hoverRating:m,onMouseEnter:P,onMouseLeave:T,onSaveRating:_,selected:t.rating>=e,notSelected:t.rating<e})}:function(e){return Object(w.jsx)(ke,{index:e,rating:d,hoverRating:m,onMouseEnter:P,onMouseLeave:T,onSaveRating:_})})})]})]}),Object(w.jsx)("div",{className:"userReviewTopRight",children:a?t.reviewerId===(null===h||void 0===h?void 0:h._id)?Object(w.jsx)("button",{className:"userReviewSubmitButton",onClick:function(){return c(t)},children:"Delete"}):Object(w.jsx)(w.Fragment,{}):Object(w.jsx)("button",{className:"userReviewSubmitButton",onClick:function(){return s(C,d)},children:"Submit"})})]}),Object(w.jsx)("div",{className:"userReviewBottom",children:a?Object(w.jsx)("div",{className:"userReviewedText",children:t.reviewText}):Object(w.jsx)("textarea",{placeholder:"(Optional) Leave a review ...",className:"userReviewInput",value:C,onChange:function(e){return S(e.target.value)}})})]})}function ye(){var e=Object(n.useContext)(ee),t=e.user,a=e.sockio,s=Object(h.h)().username,c=Object(n.useState)([]),r=Object(u.a)(c,2),i=r[0],d=r[1],j=Object(n.useState)("tangibles"),p=Object(u.a)(j,2),b=p[0],m=p[1],x=Object(n.useState)(null),O=Object(u.a)(x,2),v=O[0],g=O[1],N=Object(n.useState)(0),k=Object(u.a)(N,2),I=k[0],S=k[1];Object(n.useEffect)((function(){console.log("socket is: ",null===a||void 0===a?void 0:a.id),console.log("username is: ",s)}),[a,s]),Object(n.useEffect)((function(){(function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!s){e.next=6;break}return e.next=3,y.a.get("/api/users?username="+s);case 3:t=e.sent,g(t.data),console.log("profileUser is: "+t.data);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[s]),Object(n.useEffect)((function(){(function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!v){e.next=5;break}return e.next=3,y.a.get("/api/items/categories?categoryName="+b+"&userId="+v._id);case 3:t=e.sent,d(t.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[b,v]);return Object(w.jsxs)("div",{children:[Object(w.jsx)(C,{currentUser:t}),Object(w.jsxs)("div",{className:"userlistingContainer",children:[Object(w.jsx)(Oe,{className:"sidebar",sidebarUser:v}),Object(w.jsx)("div",{className:"userListingsRight",children:Object(w.jsxs)(le.a,{className:"userlistingWrapper",children:[Object(w.jsx)("div",{className:"tabBar",children:Object(w.jsx)(ge.a,{margin:200,style:{marginBottom:"10px"},children:Object(w.jsxs)(fe.a,{value:I,indicatorColor:"primary",textColor:"primary",centered:!0,children:[Object(w.jsx)(Ne.a,{label:"Tangible",onClick:function(){m("tangibles"),S(0)}}),Object(w.jsx)(Ne.a,{label:"Intangible",onClick:function(){m("intangibles"),S(1)}})]})})}),Object(w.jsx)(f.a,{className:"listingRow",xs:1,md:3,children:i.length?i.map((function(e){return Object(w.jsx)(ve,{item:e},e._id)})):Object(w.jsx)("div",{children:"User does not have any item in this category"})})]})})]})]})}var Ce=a(45);a(330);function Se(){var e=Object(n.useContext)(ee),t=e.user,a=(e.sockio,Object(n.useState)(null)),s=Object(u.a)(a,2),c=s[0],r=s[1],i=Object(h.h)().username,d=Object(n.useState)([]),j=Object(u.a)(d,2),p=j[0],b=j[1],m=Object(n.useState)(!1),x=Object(u.a)(m,2),O=x[0],v=x[1],g=Object(n.useState)([]),f=Object(u.a)(g,2),N=f[0],k=f[1],I=Object(n.useState)(0),S=Object(u.a)(I,2),P=S[0],T=S[1],_=Object(n.useState)(0),E=Object(u.a)(_,2),L=E[0],U=E[1];Object(n.useEffect)((function(){(function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i){e.next=6;break}return e.next=3,y.a.get("/api/users?username="+i);case 3:t=e.sent,r(t.data),console.log("profileUser is: "+t.data);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[i]),Object(n.useEffect)((function(){console.log("user is changed"),console.log(t)}),[t]),Object(n.useEffect)((function(){console.log(t),c&&(function(){var e=Object(l.a)(o.a.mark((function e(){var a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.get("/api/reviews/profileUser/"+c._id);case 2:a=e.sent,n=a.data.filter((function(e){return e.reviewerId!==(null===t||void 0===t?void 0:t._id)})),b(n),console.log(n);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()(),T(c.cumulativeRating),U(c.ratedByUsers))}),[c,t]),Object(n.useEffect)((function(){(function(){var e=Object(l.a)(o.a.mark((function e(){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&c&&c._id!==t._id){e.next=4;break}v(!0),e.next=8;break;case 4:return e.next=6,y.a.get("/api/reviews/between/"+c._id+"/"+t._id);case 6:(a=e.sent).data.length>0?(v(!0),k(a.data),console.log(a.data)):v(!1);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[c,t]);var B=function(){var e=Object(l.a)(o.a.mark((function e(a,n){var s,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(O||!(n>0)){e.next=13;break}return console.log("reviewText is: "+a+"\n rating is: "+n),s={reviewerId:t._id,revieweeId:c._id,rating:n,reviewText:a},e.next=5,y.a.post("/api/reviews",s);case 5:return r=e.sent,k([].concat(Object(Ce.a)(N),[r.data])),v(!0),e.next=10,y.a.put("/api/users/"+c._id,{cumulativeRating:P+n,ratedByUsers:L+1});case 10:e.sent,T(P+n),U(L+1);case 13:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),R=function(){var e=Object(l.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!O){e.next=14;break}return console.log(t),e.next=4,y.a.delete("/api/reviews/id/"+t._id);case 4:return a=e.sent,console.log(a.status),console.log(typeof a.status),k([]),v(!1),e.next=11,y.a.put("/api/users/"+c._id,{cumulativeRating:P-t.rating,ratedByUsers:L-1});case 11:e.sent,T(P-t.rating),U(L-1);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(w.jsxs)("div",{children:[Object(w.jsx)(C,{currentUser:t}),Object(w.jsxs)("div",{className:"userReviewsContainer",children:[Object(w.jsx)(Oe,{sidebarUser:c}),Object(w.jsx)("div",{className:"userReviewsRight",children:Object(w.jsxs)(le.a,{className:"userReviewsWrapper",children:[Object(w.jsx)("span",{className:"userReviewsHeader",children:"Reviews"}),O?Object(w.jsx)(w.Fragment,{}):Object(w.jsx)(Ie,{className:"userReview",doneReview:!1,handleSubmit:B,handleDelete:R}),N.map((function(e){return Object(w.jsx)(Ie,{className:"userReview",review:e,doneReview:!0,handleSubmit:B,handleDelete:R},e._id)})),p.map((function(e){return Object(w.jsx)(Ie,{className:"userReview",review:e,doneReview:!0,handleSubmit:B,handleDelete:R},e._id)}))]})})]})]})}a(331);function Pe(){var e=Object(h.h)().categoryName,t=Object(h.h)().pageType,a=Object(n.useState)([]),s=Object(u.a)(a,2),c=s[0],r=s[1],i=Object(n.useContext)(ee),d=i.user;i.sockio;return Object(n.useEffect)((function(){console.log("categoryName is: "+e),console.log("pageType is "+t),function(){var a=Object(l.a)(o.a.mark((function a(){var n,s,c,i;return o.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,"categories"!==t||!e){a.next=11;break}return a.next=4,y.a.get("/api/items/categories?categoryName="+e);case 4:if(200!==(n=a.sent).status){a.next=9;break}return s=n.data.filter((function(e){return e.userId!==(null===d||void 0===d?void 0:d._id)})),a.next=9,r(s);case 9:a.next=19;break;case 11:if("search"!==t||!e){a.next=19;break}return a.next=14,y.a.get("/api/items?search="+e);case 14:if(200!==(c=a.sent).status){a.next=19;break}return i=c.data.filter((function(e){return e.userId!==(null===d||void 0===d?void 0:d._id)})),a.next=19,r(i);case 19:a.next=24;break;case 21:a.prev=21,a.t0=a.catch(0),console.log(a.t0);case 24:case"end":return a.stop()}}),a,null,[[0,21]])})));return function(){return a.apply(this,arguments)}}()()}),[e,t]),Object(w.jsxs)("div",{children:[Object(w.jsx)(C,{currentUser:d}),Object(w.jsxs)("div",{className:"productWrapper",children:[Object(w.jsx)("span",{className:"productHeader",children:"search"===t?"Search results for: "+e:"categories"===t&&e?e.charAt(0).toUpperCase()+e.slice(1):"Product Descrption Header"}),Object(w.jsx)(f.a,{className:"listingRow",xl:4,lg:3,md:2,sm:1,xs:1,children:c.map((function(e){return Object(w.jsx)("div",{children:Object(w.jsx)(ve,{item:e},e._id)})}))})]})]})}var Te=a(79),_e=a(21),Ee=a(241),Le=(a(332),a(441)),Ue=a(227),Be=a.n(Ue),Re=a(443),De=a(438),Ae=a(440),Fe=Object(De.a)((function(e){return{root:{width:500,"& > * + *":{marginTop:e.spacing(3)}}}})),Me={flex:1,display:"flex",flexDirection:"column",alignItems:"center",padding:"20px",borderWidth:2,borderRadius:2,borderColor:"#eeeeee",borderStyle:"dashed",backgroundColor:"#fafafa",color:"#bdbdbd",outline:"none",transition:"border .24s ease-in-out"},Ge={borderColor:"#2196f3"},We={borderColor:"#00e676"},He={borderColor:"#ff1744"};function ze(){var e=Object(n.useContext)(ee),t=e.user,a=(e.sockio,Fe()),s=[{title:"Clothing"},{title:"Beauty"},{title:"Sports Equipments"},{title:"Home Appliances"},{title:"Automotive"},{title:"Clothing"},{title:"Hobbies"},{title:"Computers and Tech"},{title:"Outdoor Activities"},{title:"Travel"},{title:"Discussion"},{title:"Food"},{title:"Indoor Activities"},{title:"Sports"},{title:"Games and Esports"},{title:"Others"}],c=Object(n.useState)([]),r=Object(u.a)(c,2),i=r[0],d=r[1],j=Object(n.useState)({}),p=Object(u.a)(j,2),b=p[0],m=p[1],x=Object(n.useState)({}),h=Object(u.a)(x,2),O=h[0],v=h[1],g=Object(n.useState)([]),k=Object(u.a)(g,2),I=k[0],P=k[1],T=Object(n.useState)([]),_=Object(u.a)(T,2),E=_[0],L=_[1],U=Object(n.useCallback)((function(e){O.images&&v(Object(_e.a)(Object(_e.a)({},O),{},{images:null}));var t=e.map((function(e){return Object.assign(e,{preview:URL.createObjectURL(e),customFileName:Date.now().toString().concat(e.name)})})),a=[].concat(Object(Ce.a)(i),Object(Ce.a)(t));console.log(a),console.log(a.length),a.length>6&&(a=a.slice(a.length-6,a.length),console.log(a)),d(a)}),[O,i]),B=Object(Ee.a)({accept:"image/*",onDrop:U,maxFiles:6}),R=B.getRootProps,D=B.getInputProps,A=B.isDragActive,F=B.isDragAccept,M=B.isDragReject,G=Object(n.useMemo)((function(){return Object(_e.a)(Object(_e.a)(Object(_e.a)(Object(_e.a)({},Me),A?Ge:{}),F?We:{}),M?He:{})}),[A,M,F]),W=i.map((function(e){return Object(w.jsx)("div",{className:"thumb",children:Object(w.jsx)("img",{src:e.preview,className:"userSwapImg",alt:""})},e.customFileName)}));Object(n.useEffect)((function(){return function(){i.forEach((function(e){return URL.revokeObjectURL(e.preview)}))}}),[i]);var H=function(e,t){m(Object(_e.a)(Object(_e.a)({},b),{},Object(Te.a)({},e,t))),O[e]&&v(Object(_e.a)(Object(_e.a)({},O),{},Object(Te.a)({},e,null)))},z=function(){var e=b.title,t=b.description,a=b.tangible,n={};return e&&""!==e?e.length>50&&(n.title="title cannot be more than 50 characters"):n.title="title cannot be blank!",t&&""!==t?t.length>500&&(n.description="description cannot be more than 500 characters"):n.description="description cannot be blank!",a&&""!==a||(n.tangible="specify whether your item is tangible or intangible!"),E&&0!==E.length||(n.swapCategories="select at least 1 category!"),I&&0!==I.length||(n.idealCategories="select at least 1 category!"),0===i.length&&(n.images="you have to upload at least 1 image!"),n},J=function(){var e=Object(l.a)(o.a.mark((function e(a){var n,s,c,r,l,u,j,p;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),n=z(),!(Object.keys(n).length>0)){e.next=7;break}v(n),console.log(n),e.next=27;break;case 7:for(s=E.map((function(e){return e.title.toLowerCase()})),s=[].concat(Object(Ce.a)(s),[b.tangible]),c=I.map((function(e){return e.title.toLowerCase()})),r=new FormData,l=0;l<i.length;l+=1)r.append("file",i[l]),r.append("name",i[l].customFileName),console.log("customFileName is: "+i[l].customFileName),console.log(typeof i[l].customFileName);return console.log(r),e.next=15,y.a.post("/api/upload/items",r);case 15:if(200!==(u=e.sent).status){e.next=23;break}return j={userId:t._id,title:b.title,desc:b.description,img:u.data.imagePaths,categories:s,idealSwaps:c,status:"waiting"},console.log(j),e.next=21,y.a.post("/api/items",j);case 21:p=e.sent,console.log(p.data);case 23:d([]),m({tangible:""}),P([]),L([]);case 27:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(w.jsxs)("div",{children:[Object(w.jsx)(C,{currentUser:t}),Object(w.jsxs)("div",{className:"createListingContainer",children:[Object(w.jsx)("div",{className:"createListingHeader",children:Object(w.jsx)("span",{children:"Make your swap today!"})}),Object(w.jsxs)(f.a,{className:"createListingContent",children:[Object(w.jsx)(N.a,{xs:6,children:Object(w.jsx)($.a,{className:"uploadImagesCard shadow p-3 mb-5 bg-white rounded",children:Object(w.jsxs)($.a.Body,{children:[Object(w.jsx)("h5",{className:"uploadImagesCardHeader",children:"Drag and Drop images here"}),Object(w.jsx)("h6",{className:"uploadImagesCardSubHeader",children:"or click to upload"}),Object(w.jsx)(Le.a,{children:Object(w.jsxs)(Le.a.Group,{controlId:"images",children:[Object(w.jsx)(Le.a.Control,{type:"text",style:{display:"none"},isInvalid:!!O.images}),Object(w.jsx)("div",{className:"swapImgDragAndDropWrapper",children:Object(w.jsxs)("section",{className:"container",children:[Object(w.jsxs)("div",Object(_e.a)(Object(_e.a)({},R({style:G})),{},{className:"dragAndDropDiv",children:[Object(w.jsx)("input",Object(_e.a)({},D())),Object(w.jsx)("p",{children:Object(w.jsx)(Be.a,{fontSize:"large"})}),Object(w.jsx)("p",{children:"Drop away your swap images..."})]})),Object(w.jsx)("aside",{className:"thumbsContainer",children:W})]})}),Object(w.jsx)(Le.a.Control.Feedback,{type:"invalid",children:O.images})]})})]})})}),Object(w.jsx)(N.a,{xs:6,className:"createListingContentRight",children:Object(w.jsxs)(Le.a,{className:"formWrapper",children:[Object(w.jsxs)(Le.a.Group,{controlId:"title",children:[Object(w.jsx)(Le.a.Label,{children:"Title"}),Object(w.jsx)(Le.a.Control,{className:"swapAwayFormControl",type:"text",maxlength:"50",placeholder:"Enter your swap title",value:b.title?b.title:"",onChange:function(e){return H("title",e.target.value)},isInvalid:!!O.title}),Object(w.jsx)(Le.a.Control.Feedback,{type:"invalid",children:O.title}),Object(w.jsx)(Le.a.Text,{className:"text-muted",children:"Create an interesting title for your swap!"})]}),Object(w.jsxs)(Le.a.Group,{controlId:"description",children:[Object(w.jsx)(Le.a.Label,{children:"Description"}),Object(w.jsx)(Le.a.Control,{className:"swapAwayFormControl",as:"textarea",maxlength:"500",rows:3,value:b.description?b.description:"",placeholder:"Describe your swap",onChange:function(e){return H("description",e.target.value)},isInvalid:!!O.description}),Object(w.jsx)(Le.a.Control.Feedback,{type:"invalid",children:O.description})]}),Object(w.jsxs)(Le.a.Group,{controlId:"tangible",children:[Object(w.jsx)(Le.a.Label,{children:"Is your item Tangible or Intangible?"}),Object(w.jsxs)(Le.a.Control,{className:"swapAwayFormControl",as:"select",value:b.tangible,onChange:function(e){return H("tangible",e.target.value)},isInvalid:!!O.tangible,children:[Object(w.jsx)("option",{value:"",disabled:!0,hidden:!0,selected:!0,children:"Select category:"}),Object(w.jsx)("option",{value:"tangibles",children:"Tangible"}),Object(w.jsx)("option",{value:"intagibles",children:"Intangible"})]}),Object(w.jsx)(Le.a.Control.Feedback,{type:"invalid",children:O.tangible})]}),Object(w.jsxs)(Le.a.Group,{controlId:"swapCategories",children:[Object(w.jsx)(Le.a.Label,{children:"What is your swap category?"}),Object(w.jsx)(Le.a.Control,{type:"text",style:{display:"none"},isInvalid:!!O.swapCategories}),Object(w.jsx)("div",{className:a.root,children:Object(w.jsx)(Re.a,{multiple:!0,limitTags:2,id:"multiple-limit-tags",options:s,value:E,getOptionLabel:function(e){return e.title},onChange:function(e,t){O.swapCategories&&v(Object(_e.a)(Object(_e.a)({},O),{},{swapCategories:null})),L(t),console.log(t)},renderInput:function(e){return Object(w.jsx)(Ae.a,Object(_e.a)(Object(_e.a)({},e),{},{variant:"outlined",label:"Select categories"}))}})}),Object(w.jsx)(Le.a.Control.Feedback,{type:"invalid",children:O.swapCategories})]}),Object(w.jsxs)(Le.a.Group,{controlId:"idealCategories",children:[Object(w.jsx)(Le.a.Label,{children:"What is your ideal swap?"}),Object(w.jsx)(Le.a.Control,{type:"text",style:{display:"none"},isInvalid:!!O.idealCategories}),Object(w.jsx)("div",{className:a.root,children:Object(w.jsx)(Re.a,{multiple:!0,limitTags:2,id:"multiple-limit-tags2",options:s,value:I,getOptionLabel:function(e){return e.title},onChange:function(e,t){O.idealCategories&&v(Object(_e.a)(Object(_e.a)({},O),{},{idealCategories:null})),P(t),console.log(t)},renderInput:function(e){return Object(w.jsx)(Ae.a,Object(_e.a)(Object(_e.a)({},e),{},{variant:"outlined",label:"Select ideal swaps"}))}})}),Object(w.jsx)(Le.a.Control.Feedback,{type:"invalid",children:O.idealCategories})]}),Object(w.jsx)(S.a,{className:"postButton",variant:"warning",onClick:J,children:"Post Swap"})]})})]})]})]})}a(333),a(334);function Je(e){var t=e.imgLinkArray;return Object(n.useEffect)((function(){console.log(t)}),[t]),Object(w.jsx)("div",{className:"singleItemWrapper",children:Object(w.jsx)(Y.a,{responsive:{superLargeDesktop:{breakpoint:{max:4e3,min:3e3},items:8},desktop:{breakpoint:{max:3e3,min:1024},items:6},tablet:{breakpoint:{max:1024,min:464},items:2},mobile:{breakpoint:{max:464,min:0},items:1}},children:null===t||void 0===t?void 0:t.map((function(e){return Object(w.jsx)(Y.a.Item,{children:Object(w.jsx)("img",{className:"singleItemCarouselItemImg",src:"http://localhost:8080/images/"+e,alt:""})})}))})})}a(335);var qe=a(446);function Ke(e){var t=e.itemUserId,a="http://localhost:8080/images/",s=Object(n.useState)(null),c=Object(u.a)(s,2),r=c[0],i=c[1],d=Object(h.g)(),j=Object(n.useContext)(ee).user;Object(n.useEffect)((function(){(function(){var e=Object(l.a)(o.a.mark((function e(){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=6;break}return e.next=3,y.a.get("/api/users?userId="+t);case 3:a=e.sent,i(a.data),console.log("itemUser is: "+a.data);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[t]);var p=function(){var e=Object(l.a)(o.a.mark((function e(){var a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(j){e.next=5;break}d.push("/"),console.log("pushed to login"),e.next=18;break;case 5:return e.next=7,y.a.get("/api/conversations/find/"+j._id+"/"+t);case 7:if(!((a=e.sent).data.length>0)){e.next=13;break}d.push("/chat/"+a.data[0]._id),console.log("pushed to chat id:"+a.data[0]._id),e.next=18;break;case 13:return e.next=15,y.a.post("/api/conversations",{members:[t,j._id]});case 15:n=e.sent,d.push("/chat/"+n._id),console.log(n.data);case 18:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(w.jsx)("div",{children:Object(w.jsxs)(qe.a,{className:"swapAwayPrompt",children:[Object(w.jsx)(le.a,{children:Object(w.jsxs)(f.a,{children:[Object(w.jsx)(N.a,{sm:2,children:Object(w.jsx)("img",{className:"swapAwayUserImg",src:r&&r.profilePicture?a+r.profilePicture:a+"person/noAvatar.png",onClick:function(){r&&d.push("/profile/"+r.username+"/listings")},alt:""})}),Object(w.jsx)(N.a,{sm:10,children:Object(w.jsx)(qe.a.Heading,{className:"swapAwayUsername",style:{fontSize:"1rem"},children:r?r.username:""})})]})}),Object(w.jsx)(S.a,{className:"swapAwayButton",variant:"warning",onClick:p,children:Object(w.jsxs)("div",{className:"swapAwayButtonTextGroup",children:[Object(w.jsx)(x.a,{}),Object(w.jsx)("span",{className:"swapAwayButtonText",children:"Swap Away!"})]})})]})})}a(336);var $e=a(167),Ve=a.n($e),Ye=a(168),Qe=a.n(Ye),Xe=a(229),Ze=a.n(Xe);function et(e){var t=e.itemUserId,a=e.itemStatus,s=e.handleReserve,c=e.handleUnreserve,r=e.handleSwap,i=e.handleUnswap,d=e.handleDelete,j="http://localhost:8080/images/",p=Object(n.useState)(null),b=Object(u.a)(p,2),m=b[0],x=b[1],O=Object(n.useState)(!1),v=Object(u.a)(O,2),g=v[0],k=v[1],I=Object(n.useState)(""),C=Object(u.a)(I,2),P=C[0],T=C[1],_=Object(n.useState)(""),E=Object(u.a)(_,2),L=E[0],U=E[1],B=Object(h.g)();Object(n.useEffect)((function(){(function(){var e=Object(l.a)(o.a.mark((function e(){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=6;break}return e.next=3,y.a.get("/api/users?userId="+t);case 3:a=e.sent,x(a.data),console.log("itemUser is: "+a.data);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[t]);var R=function(){var e=Object(l.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("Enter"!==t.key){e.next=20;break}if(t.preventDefault(),console.log("user pressed enter key and the value is: "+P),""===P){e.next=18;break}return console.log("input is not empty"),e.prev=5,e.next=8,y.a.get("/api/agreements?id="+P);case 8:(a=e.sent)&&200===a.status&&a.data?a.data.parties.length>=2||a.data.items.length>=2?(console.log("Error 2"),U("This agreement id already involves 2 parties or 2 items")):(r(a.data._id),T(""),k(!1)):(console.log("Error 1"),U("Agreement does not exist!")),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(5),console.log("Error 1"),U("Agreement does not exist!");case 16:e.next=20;break;case 18:console.log("input empty!"),U("Agreement code cannot be empty!");case 20:case"end":return e.stop()}}),e,null,[[5,12]])})));return function(t){return e.apply(this,arguments)}}();return Object(w.jsx)("div",{children:Object(w.jsx)(qe.a,{className:"userItemCommandPrompt",children:Object(w.jsxs)(le.a,{children:[Object(w.jsxs)(f.a,{children:[Object(w.jsx)(N.a,{sm:2,children:Object(w.jsx)("img",{className:"userItemCommandUserImg",src:m&&m.profilePicture?j+m.profilePicture:j+"person/noAvatar.png",onClick:function(){m&&B.push("/profile/"+m.username+"/listings")},alt:""})}),Object(w.jsx)(N.a,{sm:10,children:Object(w.jsx)(qe.a.Heading,{className:"userItemCommandUsername",style:{fontSize:"1rem"},children:m?m.username:"Anonymous"})})]}),Object(w.jsxs)("div",{className:"buttonWrapper",children:["waiting"===a?Object(w.jsx)("div",{children:Object(w.jsxs)(S.a,{className:"button",variant:"warning",onClick:s,children:[Object(w.jsx)(Ve.a,{className:"icons"}),Object(w.jsx)("span",{className:"action",children:"Mark as Reserve"})]})}):"reserved"===a?Object(w.jsx)("div",{children:Object(w.jsxs)(S.a,{className:"button",variant:"warning",onClick:c,children:[Object(w.jsx)(Ve.a,{className:"icons"}),Object(w.jsx)("span",{className:"action",children:"Unreserve"})]})}):Object(w.jsx)(w.Fragment,{}),Object(w.jsx)("div",{children:"deleted"===a?Object(w.jsx)(w.Fragment,{}):"swapped"===a?Object(w.jsxs)(S.a,{className:"button",variant:"warning",children:[Object(w.jsx)(Qe.a,{className:"icons"}),Object(w.jsx)("span",{className:"action",onClick:i,children:"Cancel Agreement"})]}):Object(w.jsxs)(w.Fragment,{children:[Object(w.jsxs)(S.a,{className:"button",variant:"warning",children:[Object(w.jsx)(Qe.a,{className:"icons"}),Object(w.jsx)("span",{className:"action",onClick:function(){return k(!g)},children:"Mark as Swapped"})]}),g?Object(w.jsx)(Le.a,{className:"userItemCommandForm",children:Object(w.jsxs)(Le.a.Group,{controlId:"title",children:[Object(w.jsx)(Le.a.Control,{className:"userItemCommandFormControl",type:"input",maxlength:"30",placeholder:"Enter your agreement code",value:P,onChange:function(e){T(e.target.value),U(""),console.log("changed to: "+e.target.value)},onKeyDown:R,isInvalid:""!==L}),Object(w.jsx)(Le.a.Control.Feedback,{type:"invalid",children:L})]})}):Object(w.jsx)(w.Fragment,{})]})}),Object(w.jsx)("div",{children:"deleted"===a||"swapped"===a?Object(w.jsx)(w.Fragment,{}):Object(w.jsxs)(S.a,{className:"button",variant:"warning",onClick:d,children:[Object(w.jsx)(Ze.a,{className:"icons"}),Object(w.jsx)("span",{className:"action",children:"Delete"})]})})]})]})})})}function tt(){var e=Object(n.useContext)(ee),t=e.user,a=(e.sockio,Object(h.h)().itemId),s=Object(n.useState)(null),c=Object(u.a)(s,2),r=c[0],i=c[1],d=Object(h.g)(),j=Object(n.useState)(""),p=Object(u.a)(j,2),b=p[0],m=p[1];Object(n.useEffect)((function(){(function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!a){e.next=7;break}return e.next=4,y.a.get("/api/items?itemId="+a);case 4:return t=e.sent,e.next=7,i(t.data);case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}})()()}),[a]);var x=function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!a){e.next=6;break}return e.next=4,y.a.put("/api/items/update/status/"+a,{status:"reserved"});case 4:200===(t=e.sent).status&&t.data&&i(t.data);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),O=function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!a){e.next=6;break}return e.next=4,y.a.put("/api/items/update/status/"+a,{status:"waiting"});case 4:200===(t=e.sent).status&&t.data&&i(t.data);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),v=function(){var e=Object(l.a)(o.a.mark((function e(n){var s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("handleSwap called with agreementId: "+n),e.prev=1,e.next=4,y.a.put("/api/agreements/update/addParties/"+n,{userId:null===t||void 0===t?void 0:t._id,itemId:a});case 4:if(200!==e.sent.status||!a){e.next=10;break}return e.next=8,y.a.put("/api/items/update/status/"+a,{status:"swapped"});case 8:200===(s=e.sent).status&&s.data&&i(s.data);case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(l.a)(o.a.mark((function e(){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("handleUnswap called"),e.prev=1,e.next=4,y.a.put("/api/agreements/update/removeParties",{userId:null===t||void 0===t?void 0:t._id,itemId:a});case 4:if(200!==e.sent.status||!a){e.next=10;break}return e.next=8,y.a.put("/api/items/update/status/"+a,{status:"waiting"});case 8:200===(n=e.sent).status&&n.data&&i(n.data);case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(){return e.apply(this,arguments)}}(),k=function(){var e=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("handleDelete called"),e.prev=1,e.next=4,y.a.delete("/api/items?itemId="+(null===r||void 0===r?void 0:r._id));case 4:200===e.sent.status&&d.push("/profile/"+t.username+"/listings"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),I=function(e){console.log("copy link");var t=document.createElement("input"),a="link"===e?window.location.href:(null===r||void 0===r?void 0:r._id)?r._id:"";document.body.appendChild(t),t.value=a,t.select(),document.execCommand("copy"),document.body.removeChild(t),m("link"===e?"Link to this page has been copied":"Item ID has been copied")};return Object(w.jsxs)("div",{className:"itemPage",children:[Object(w.jsx)(C,{currentUser:t}),Object(w.jsxs)("label",{className:"itemHeader",children:[r?r.title:"Error: No Item Displayed",r?Object(w.jsx)(V.a,{className:"itemTag",label:"waiting"===r.status?"available":r.status,size:"small",color:"waiting"===r.status?"":"reserved"===r.status?"primary":"secondary",style:{marginLeft:"15px",marginRight:"10px",marginTop:"0px"}}):Object(w.jsx)(w.Fragment,{})]}),Object(w.jsx)(le.a,{className:"itemImg",children:Object(w.jsxs)(f.a,{children:[Object(w.jsx)(N.a,{children:Object(w.jsx)(Je,{imgLinkArray:r?r.img:[]})}),Object(w.jsx)(N.a,{children:(null===t||void 0===t?void 0:t._id)===(null===r||void 0===r?void 0:r.userId)?Object(w.jsx)(et,{itemUserId:null===r||void 0===r?void 0:r.userId,itemStatus:null===r||void 0===r?void 0:r.status,handleReserve:x,handleUnreserve:O,handleDelete:k,handleSwap:v,handleUnswap:g}):Object(w.jsx)(Ke,{itemUserId:null===r||void 0===r?void 0:r.userId})})]})}),Object(w.jsxs)("div",{className:"itemHeaderSecond",children:[Object(w.jsx)("div",{className:"itemGetLink",onClick:function(){return I("link")},children:"Copy Link"}),Object(w.jsx)("div",{className:"itemGetLink",onClick:function(){return I("id")},children:"Copy Item ID"}),Object(w.jsx)("div",{className:"itemCopyLinkText",children:b})]}),Object(w.jsxs)("div",{className:"itemDescription",children:[Object(w.jsx)("h5",{children:"Description"}),Object(w.jsx)("span",{children:r?r.desc:"The item does not exist, and hence no description"})]}),Object(w.jsxs)("div",{className:"itemIdealSwaps",children:[Object(w.jsx)("h5",{children:"Ideal swaps"}),null===r||void 0===r?void 0:r.idealSwaps.map((function(e){return Object(w.jsx)(V.a,{className:"tag",label:e,size:"small",color:"secondary",style:{marginRight:"5px"}},e)}))]})]})}a(337);var at=a(231),nt=a.n(at),st=a(232),ct=a.n(st),rt=a(233),it=a.n(rt),ot=a(230);function lt(){var e=Object(n.useState)(""),t=Object(u.a)(e,2),a=t[0],s=t[1],c=Object(n.useState)(""),r=Object(u.a)(c,2),i=r[0],d=r[1],j=Object(n.useState)(""),p=Object(u.a)(j,2),b=p[0],m=p[1],x=Object(n.useContext)(ee),h=x.user,v=x.dispatch,g=x.isFetching;Object(n.useEffect)((function(){console.log("user is changed"),console.log(h)}),[h]);var f=function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s(t.target.value),console.log(t.target.value);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:d(t.target.value),console.log(t.target.value);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),function(){var e=Object(l.a)(o.a.mark((function e(t,a){var n,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a({type:"LOGIN_START"}),e.prev=1,e.next=4,y.a.post("/api/auth/login",t);case 4:return n=e.sent,e.next=7,Object(ot.io)();case 7:(s=e.sent).on("connect",(function(){s.emit("addUser",n.data._id),console.log("sock inside try block: ",s),a({type:"LOGIN_SUCCESS",payload:{user:n.data,sock:s}})})),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),m("Incorrect username or password"),a({type:"LOGIN_FAILURE",payload:e.t0});case 15:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t,a){return e.apply(this,arguments)}}()({username:a,password:i},v);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(w.jsx)("div",{className:"login",children:Object(w.jsxs)("div",{className:"loginWrapper",children:[Object(w.jsx)("div",{className:"loginTop",children:Object(w.jsx)(nt.a,{className:"loginShoppingCartIcon",style:{fontSize:220,color:"white"}})}),Object(w.jsxs)("form",{className:"loginBottom",onSubmit:k,children:[Object(w.jsxs)("div",{className:"loginInputWrapper",children:[Object(w.jsx)(ct.a,{style:{position:"absolute",color:"white",fontSize:32,top:32,left:10}}),Object(w.jsx)("input",{placeholder:"USERNAME",onChange:f,value:a,required:!0,className:"loginInput"})]}),Object(w.jsxs)("div",{className:"loginInputWrapper",children:[Object(w.jsx)(it.a,{style:{position:"absolute",color:"white",fontSize:32,top:32,left:10}}),Object(w.jsx)("input",{placeholder:"PASSWORD",required:!0,onChange:N,value:i,className:"loginInput",type:"password"})]}),Object(w.jsx)("div",{className:"loginErrorMessageWrapper",children:b}),Object(w.jsx)("button",{className:"loginButton",type:"submit",disabled:g,children:g?Object(w.jsx)(ie.a,{color:"white",size:"20px"}):"LOGIN"}),Object(w.jsx)(O.b,{to:"/register",className:"loginBottomLink",children:"New to ReHash? Sign up now!"})]})]})})}a(358);var ut=a(64);function dt(e){var t=e.active,a=e.userId,s=e.lastMessageText,c=e.lastMessageTime,r=e.online,i="http://localhost:8080/images/",d=Object(n.useState)(""),j=Object(u.a)(d,2),p=j[0],b=j[1],m=Object(n.useState)(null),x=Object(u.a)(m,2),h=x[0],O=x[1];return Object(n.useEffect)((function(){console.log("lastMessageText updated. the new message is: ",s)}),[s]),Object(n.useEffect)((function(){c&&b(Object(ut.a)(c));var e=setInterval((function(){c&&p!==Object(ut.a)(c)&&b(Object(ut.a)(c))}),6e4);return function(){return clearInterval(e)}}),[c]),Object(n.useEffect)((function(){(function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y()("/api/users?userId="+a);case 3:return t=e.sent,e.next=6,O(t.data);case 6:console.log("successfully got user"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}})()()}),[a]),Object(w.jsxs)("div",{className:t?"conversation conversationActive":"conversation",children:[Object(w.jsxs)("div",{className:"conversationLeft",children:[Object(w.jsx)("img",{src:(null===h||void 0===h?void 0:h.profilePicture)?i+h.profilePicture:i+"person/noAvatar.png",alt:"",className:"conversationImg"}),r?Object(w.jsx)("div",{className:"conversationBadge"}):Object(w.jsx)(w.Fragment,{})]}),Object(w.jsxs)("div",{className:"conversationRight",children:[Object(w.jsxs)("div",{className:"conversationRightTop",children:[Object(w.jsx)("div",{className:"conversationName",children:null===h||void 0===h?void 0:h.username}),Object(w.jsx)("div",{className:"conversationStatus",children:p})]}),Object(w.jsx)("span",{className:"conversationLastMsg",children:s})]})]})}a(359);function jt(e){var t=e.message,a=e.own,s=e.pictureLink,c=Object(n.useState)(""),r=Object(u.a)(c,2),i=r[0],o=r[1],l=Object(n.useState)(!1),d=Object(u.a)(l,2),j=d[0],p=d[1];return Object(n.useEffect)((function(){t&&o(Object(ut.a)(t.createdAt));var e=setInterval((function(){i!==Object(ut.a)(t.createdAt)&&o(Object(ut.a)(t.createdAt))}),6e4);return function(){return clearInterval(e)}}),[t]),a?Object(w.jsxs)("div",{className:"messageOwn",children:[Object(w.jsxs)("div",{className:"messageTopOwn",children:[Object(w.jsx)("img",{className:"messageImgOwn",src:s,alt:""}),Object(w.jsx)("p",{className:"messageTextOwn",onClick:function(){p(!j)},children:t.text})]}),j?Object(w.jsx)("div",{className:"messageBottom",children:i}):Object(w.jsx)(w.Fragment,{})]}):Object(w.jsxs)("div",{className:"message",children:[Object(w.jsxs)("div",{className:"messageTop",children:[Object(w.jsx)("img",{className:"messageImg",src:s,alt:""}),Object(w.jsx)("p",{className:"messageText",onClick:function(){p(!j)},children:t.text})]}),j?Object(w.jsx)("div",{className:"messageBottom",children:i}):Object(w.jsx)(w.Fragment,{})]})}a(360);function pt(){var e=Object(n.useState)([]),t=Object(u.a)(e,2),a=t[0],s=t[1],c=Object(n.useState)(null),r=Object(u.a)(c,2),i=r[0],d=r[1],j=Object(n.useState)([]),p=Object(u.a)(j,2),b=p[0],m=p[1],x=Object(n.useState)(""),O=Object(u.a)(x,2),v=O[0],g=O[1],f=Object(n.useState)(null),N=Object(u.a)(f,2),k=N[0],I=N[1],S=Object(n.useState)([]),P=Object(u.a)(S,2),T=P[0],_=P[1],E=Object(n.useState)(""),L=Object(u.a)(E,2),U=L[0],B=L[1],R=Object(n.useState)(null),D=Object(u.a)(R,2),A=D[0],F=D[1],M=Object(n.useState)(""),G=Object(u.a)(M,2),W=G[0],H=G[1],z="http://localhost:8080/images/",J=Object(n.useRef)(),q=Object(h.h)().initialActiveConvoId,K=Object(n.useContext)(ee),$=K.user,V=K.sockio,Y=Object(h.g)();Object(n.useEffect)((function(){(function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("0"===q){e.next=6;break}return console.log("initialActiveConvoId is: "+q),e.next=4,y.a.get("/api/conversations/id/"+q);case 4:t=e.sent,d(t.data);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[q]),Object(n.useEffect)((function(){console.log("socket is: ",V.id),V.on("getMessage",(function(e){I({sender:e.senderId,text:e.text,createdAt:Date.now()})}))}),[V]),Object(n.useEffect)((function(){k&&(null===i||void 0===i?void 0:i.members.includes(k.sender))&&m((function(e){return[].concat(Object(Ce.a)(e),[k])}))}),[k,i]),Object(n.useEffect)((function(){V.on("getUsers",(function(e){console.log("getUser received on client side"),_($.chatFollow.filter((function(t){return e.some((function(e){return e.userId===t}))})))}))}),[$,V]),Object(n.useEffect)((function(){(function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.a.get("/api/conversations/search/"+$._id+"/searchText?searchText="+U);case 3:200===(t=e.sent).status&&s(t.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}})()()}),[$,b,T,U]),Object(n.useEffect)((function(){(function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.a.get("/api/messages/"+(null===i||void 0===i?void 0:i._id));case 3:t=e.sent,m(t.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}})()()}),[i]),Object(n.useEffect)((function(){var e=null===i||void 0===i?void 0:i.members.find((function(e){return e!==$._id}));(function(){var t=Object(l.a)(o.a.mark((function t(){var a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,y.a.get("/api/users?userId="+e);case 3:return a=t.sent,t.next=6,F(a.data);case 6:t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}})()()}),[$,i]),Object(n.useEffect)((function(){var e=function(){var e=Object(l.a)(o.a.mark((function e(){var t,a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t="",e.prev=1,!A){e.next=10;break}return e.next=5,y.a.get("/api/users?userId="+(null===A||void 0===A?void 0:A._id));case 5:a=e.sent,n=a.data.lastActive,console.log("newLastActive: ",n),t=Object(ut.a)(n),console.log("LOOK AT ME: TIMEAGO ",t);case 10:e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),t=Object(ut.a)(null===A||void 0===A?void 0:A.lastActive),console.log(e.t0);case 16:H("Active "+t);case 17:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(){return e.apply(this,arguments)}}();e();var t=setInterval((function(){e()}),5e3);return function(){return clearInterval(t)}}),[A]);var Q=function(){var e=Object(l.a)(o.a.mark((function e(t){var a,n,s,c,r,l;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===v){e.next=26;break}return t.preventDefault(),e.next=4,g("");case 4:return a={sender:$._id,text:v,conversationId:i._id},e.prev=5,e.next=8,y.a.post("/api/messages",a);case 8:return n=e.sent,s=n.data.text,c=n.data.createdAt,e.next=13,y.a.put("/api/conversations/"+i._id+"/lastmessage",{lastMessageText:s,lastMessageTime:c});case 13:return r=e.sent,console.log(r),console.log("currentChat is: ",i),e.next=18,m([].concat(Object(Ce.a)(b),[n.data]));case 18:console.log("updated messages. the new messaged sent is: ",n.data.text),l=i.members.find((function(e){return e!==$._id})),V.emit("sendMessage",{senderId:$._id,receiverId:l,text:v}),e.next=26;break;case 23:e.prev=23,e.t0=e.catch(5),console.log(e.t0);case 26:case"end":return e.stop()}}),e,null,[[5,23]])})));return function(t){return e.apply(this,arguments)}}(),X=function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("generate agreement is clicked"),e.next=3,y.a.post("/api/agreements");case 3:(t=e.sent).data&&t.data._id&&g("Your agreement code has been generated: "+t.data._id);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){var e;null===(e=J.current)||void 0===e||e.scrollIntoView({behavior:"auto"})}),[b]);var Z=function(){var e=Object(l.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("Enter"!==t.key){e.next=17;break}if(t.preventDefault(),!((U.match(/^\s*\n*\t*$/)||[]).length>0)){e.next=6;break}console.log("searchText is empty"),e.next=17;break;case 6:if(!$){e.next=17;break}return e.prev=7,e.next=10,y.a.get("/api/conversations/search/"+$._id+"/searchText?searchText="+U);case 10:200===(a=e.sent).status&&s(a.data),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(7),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[7,14]])})));return function(t){return e.apply(this,arguments)}}();return Object(w.jsxs)("div",{children:[Object(w.jsx)(C,{currentUser:$}),Object(w.jsxs)("div",{className:"messenger",children:[Object(w.jsx)("div",{className:"chatMenu",children:Object(w.jsxs)("div",{className:"chatMenuWrapper",children:[Object(w.jsx)("input",{placeholder:"Search for users...",className:"chatMenuInput",onChange:function(e){return B(e.target.value)},onKeyDown:Z,value:U}),a.map((function(e){var t=e.members.find((function(e){return e!==$._id}));return Object(w.jsx)("div",{onClick:function(){return d(e)},children:Object(w.jsx)(dt,{online:T.includes(t),lastMessageText:e.lastMessageText,lastMessageTime:e.lastMessageTime,userId:t,active:!!i&&e._id===i._id})})}))]})}),Object(w.jsx)("div",{className:"chatBox",children:Object(w.jsx)("div",{className:"chatBoxWrapper",children:i?Object(w.jsxs)(w.Fragment,{children:[Object(w.jsxs)("div",{className:"chatBoxHeader",children:[Object(w.jsxs)("div",{className:"chatBoxHeaderLeft",children:[Object(w.jsx)("img",{src:(null===A||void 0===A?void 0:A.profilePicture)?z+A.profilePicture:z+"person/noAvatar.png",alt:"",className:"chatBoxHeaderImg"}),Object(w.jsxs)("div",{className:"chatBoxHeaderContent",children:[Object(w.jsx)("div",{className:"chatBoxHeaderName",children:null===A||void 0===A?void 0:A.username}),Object(w.jsx)("div",{className:"chatBoxHeaderStatus",children:T.includes(null===A||void 0===A?void 0:A._id)?"Online now":W})]})]}),Object(w.jsx)("button",{className:"chatBoxViewProfileButton",onClick:function(){Y.push("/profile/"+A.username+"/listings")},children:"View Profile"})]}),Object(w.jsx)("div",{className:"chatBoxTop",children:b.map((function(e){return Object(w.jsx)("div",{ref:J,children:Object(w.jsx)(jt,{message:e,own:e.sender===$._id,pictureLink:e.sender===$._id?(null===$||void 0===$?void 0:$.profilePicture)?z+$.profilePicture:z+"person/noAvatar.png":(null===A||void 0===A?void 0:A.profilePicture)?z+A.profilePicture:z+"person/noAvatar.png"})})}))}),Object(w.jsxs)("div",{className:"chatBoxBottom",children:[Object(w.jsx)("textarea",{className:"chatMessageInput",placeholder:"Write a message ...",onChange:function(e){return g(e.target.value)},value:v,onKeyDown:function(e){"Enter"===e.key&&(e.preventDefault(),console.log("new message when eneter is pressed: ",v),g(v),""!==v&&(Q(e),console.log("passing to handleSendMessage")))}}),Object(w.jsx)("button",{className:"chatAgreementButton",onClick:X,children:"Generate Agreement"}),Object(w.jsx)("button",{className:"chatSubmitButton",onClick:Q,children:"Send"})]})]}):Object(w.jsxs)("span",{className:"noConversationText",children:["Open a conversation to start a chat ",V.id]})})})]})]})}a(361);function bt(){var e=Object(n.useContext)(ee),t=e.user,a=(e.sockio,Object(h.h)().username),s=Object(n.useState)(null),c=Object(u.a)(s,2),r=c[0],i=c[1],d=Object(n.useState)([]),j=Object(u.a)(d,2),p=j[0],b=j[1];Object(n.useEffect)((function(){(function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=6;break}return e.next=3,y.a.get("/api/users?username="+a);case 3:t=e.sent,i(t.data),console.log("profileUser is: "+t.data);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[a]),Object(n.useEffect)((function(){(function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=5;break}return e.next=3,y.a.get("/api/groups/filter?userId="+r._id);case 3:t=e.sent,b(t.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[r]);return Object(w.jsxs)("div",{children:[Object(w.jsx)("div",{className:"myGroupsPageTopSection",children:Object(w.jsx)(C,{currentUser:t,handleUpdateGroup:function(e){e&&e.length>0&&e[0]&&b([].concat(Object(Ce.a)(e),Object(Ce.a)(p)))}})}),Object(w.jsxs)("div",{className:"myGroupsPageMiddleSection",children:[Object(w.jsx)(Oe,{className:"sidebar",sidebarUser:r}),Object(w.jsx)("div",{className:"myGroupsPageMiddleSectionRight",children:Object(w.jsxs)("div",{className:"myGroupsPageMiddleSectionRightHeader",children:[Object(w.jsx)("span",{className:"myGroupsPageMiddleSectionRightHeaderText",children:"Groups You Have Joined"}),Object(w.jsx)("div",{className:"myGroupsPageGroupIconWrapper",children:Object(w.jsxs)(f.a,{className:"myGroupsPageGroupIconContainer",xl:5,lg:4,md:3,xs:2,children:[Object(w.jsx)(N.a,{children:Object(w.jsx)(ae,{groupImg:"group/add.jpg",create:!0})}),p.map((function(e){return Object(w.jsx)(N.a,{children:Object(w.jsx)(ae,{groupImg:e.groupImg,groupName:e.groupName,groupId:e._id})},e._id)}))]})})]})})]})]})}a(362);function mt(){var e=Object(n.useContext)(ee),t=e.user,a=e.sockio,s=e.dispatch,c=(Object(h.h)().username,Object(n.useState)(null)),r=Object(u.a)(c,2),i=r[0],d=r[1],j=Object(n.useState)({showPassword:!1}),p=Object(u.a)(j,2),b=p[0],m=p[1],x=Object(n.useState)({}),O=Object(u.a)(x,2),v=O[0],g=O[1],k=Object(n.useState)({}),I=Object(u.a)(k,2),P=I[0],T=I[1],_=Object(n.useState)(!1),E=Object(u.a)(_,2),L=E[0],U=E[1];Object(n.useEffect)((function(){console.log("user is changed"),console.log(t)}),[t]);Object(n.useEffect)((function(){return function(){i&&URL.revokeObjectURL(i.preview)}}),[i]);var B=function(){var e=Object(l.a)(o.a.mark((function e(n){var c,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),i){e.next=5;break}T({imgFile:"No image uploaded!"}),e.next=12;break;case 5:return(c=new FormData).append("file",i),console.log(c),r=function(){var e=Object(l.a)(o.a.mark((function e(){var n,r,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.a.post("/api/upload/person",c);case 3:if(200!==(n=e.sent).status){e.next=12;break}return r={profilePicture:n.data.imagePath},i=Object(_e.a)(Object(_e.a)({},t),r),console.log(i),e.next=10,y.a.put("/api/users/"+t._id,{profilePicture:n.data.imagePath});case 10:200===e.sent.status&&s({type:"UPDATE",payload:{user:i,sock:a}});case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}(),e.next=11,r();case 11:d(null);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=function(e,t){m(Object(_e.a)(Object(_e.a)({},b),{},Object(Te.a)({},e,t))),v[e]&&g(Object(_e.a)(Object(_e.a)({},v),{},Object(Te.a)({},e,null))),L&&U(!1)},D=function(){var e=Object(l.a)(o.a.mark((function e(a){var n,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),U(!1),n=A(),!(Object.keys(n).length>0)){e.next=8;break}g(n),console.log(n),e.next=11;break;case 8:return s=function(){var e=Object(l.a)(o.a.mark((function e(){var a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.a.put("/api/auth/updatePassword/"+t._id,{currentPassword:b.currentPassword,newPassword:b.newPassword});case 3:(a=e.sent)&&200===a.status&&"User password has been updated"===a.data.message?(U(!0),m({showPassword:!1,confirmPassword:"",newPassword:"",currentPassword:""})):a&&200===a.status&&"wrong password"===a.data.message&&(n={currentPassword:"Wrong Password!"},g(Object(_e.a)(Object(_e.a)({},v),n))),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),e.next=11,s();case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=b.currentPassword,t=b.newPassword,a=b.confirmPassword,n={};return e&&""!==e||(n.currentPassword="Current password cannot be empty!"),(!t||t.length<6)&&(n.newPassword="New password must have at least 6 characters!"),a&&a===t||(n.confirmPassword="New and confirm passwords do not match!"),n};return Object(w.jsxs)("div",{children:[Object(w.jsx)(C,{currentUser:t}),Object(w.jsxs)("div",{className:"settingsContainer",children:[Object(w.jsx)(Oe,{sidebarUser:t}),Object(w.jsxs)("div",{className:"settingsRight",children:[Object(w.jsx)("span",{className:"settingsHeader",children:"Settings"}),Object(w.jsxs)(le.a,{className:"settingsWrapper",children:[Object(w.jsxs)($.a,{style:{width:"60em",height:"19em"},className:"settingsUserProfileContainer shadow p-3 mb-5 bg-white rounded",children:[Object(w.jsx)("span",{className:"settingsUserProfileHeader",children:"User Profile"}),Object(w.jsx)(le.a,{children:Object(w.jsxs)(f.a,{children:[Object(w.jsx)(N.a,{children:Object(w.jsx)("img",{src:i&&i.preview?i.preview:t&&t.profilePicture?"http://localhost:8080/images/"+t.profilePicture:"/assests/userProfile.png",alt:"",className:"userProfileImg"})}),Object(w.jsx)(N.a,{children:Object(w.jsxs)("div",{className:"settingsImgInstructions",children:[Object(w.jsx)("div",{className:"settingsImgInstructionsText",children:"Upload a profile picture of yourself to help others know more about you!"}),Object(w.jsxs)(Le.a.Group,{children:[Object(w.jsx)(Le.a.Control,{className:"imgUploadButton",as:"input",name:"image-upload",type:"file",accept:"image/*",onChange:function(e){var t=Object.assign(e.target.files[0],{preview:URL.createObjectURL(e.target.files[0])});d(t),t&&P.imgFile&&T({imgFile:null}),console.log(t.preview)},isInvalid:!!P.imgFile}),Object(w.jsx)(Le.a.Control.Feedback,{type:"invalid",children:P.imgFile})]}),Object(w.jsx)(S.a,{className:"changeProfilePictureButton",variant:"warning",onClick:B,children:"Change profile picture"})]})})]})})]}),Object(w.jsxs)($.a,{style:{width:"60em"},className:"settingsPasswordContainer shadow p-3 mb-5 bg-white rounded",children:[Object(w.jsx)("span",{className:"settingsPasswordHeader",children:"Password"}),Object(w.jsxs)(Le.a,{children:[Object(w.jsxs)("div",{className:"passwordInputWrapper",children:[Object(w.jsxs)(Le.a.Group,{controlId:"oldPassword",children:[Object(w.jsx)(Le.a.Control,{className:"passwordInput",name:"currentPassword",type:b.showPassword?"text":"password",placeHolder:"Current Password",value:b.currentPassword,onChange:function(e){return R("currentPassword",e.target.value)},isInvalid:!!v.currentPassword,isValid:L}),Object(w.jsx)(Le.a.Control.Feedback,{type:"invalid",children:v.currentPassword})]}),Object(w.jsxs)(Le.a.Group,{controlId:"newPassword",children:[Object(w.jsx)(Le.a.Control,{className:"passwordInput",name:"newPassword",type:b.showPassword?"text":"password",placeHolder:"New Password",value:b.newPassword,onChange:function(e){return R("newPassword",e.target.value)},isInvalid:!!v.newPassword,isValid:L}),Object(w.jsx)(Le.a.Control.Feedback,{type:"invalid",children:v.newPassword})]}),Object(w.jsxs)(Le.a.Group,{controlId:"confirmPassword",children:[Object(w.jsx)(Le.a.Control,{className:"passwordInput",name:"confirmPassword",type:b.showPassword?"text":"password",placeHolder:"Confirm Password",value:b.confirmPassword,onChange:function(e){return R("confirmPassword",e.target.value)},isInvalid:!!v.confirmPassword,isValid:L}),Object(w.jsx)(Le.a.Control.Feedback,{type:"invalid",children:v.confirmPassword}),Object(w.jsx)(Le.a.Control.Feedback,{type:"valid",children:'"Password updated successfully"'})]})]}),Object(w.jsxs)("div",{children:[Object(w.jsx)("input",{type:"checkbox",checked:b.showPassword,onClick:function(){return R("showPassword",!b.showPassword)}}),Object(w.jsx)("label",{className:"checkboxLabel",children:"Show input"})]}),Object(w.jsx)("div",{children:Object(w.jsx)(S.a,{className:"passwordButton",variant:"warning",onClick:D,children:"Update password"})})]})]})]})]})]})]})}a(363),a(364);var xt=a(235),ht=a.n(xt),Ot=a(234),vt=a.n(Ot);function gt(e){var t=e.group,a=e.isGroupMember,s=e.handleLeave,c=e.handleJoin,r=e.handleUpdateGroup,i="http://localhost:8080/images/",d=Object(n.useContext)(ee),j=d.user,p=(d.sockio,Object(n.useState)(!1)),b=Object(u.a)(p,2),m=b[0],x=b[1],O=Object(n.useState)(null),v=Object(u.a)(O,2),g=v[0],f=v[1],N=Object(n.useState)(""),k=Object(u.a)(N,2),I=k[0],C=k[1],S=Object(n.useState)(""),P=Object(u.a)(S,2),T=P[0],_=P[1],E=Object(n.useState)(""),L=Object(u.a)(E,2),U=L[0],B=L[1],R=Object(n.useState)(""),D=Object(u.a)(R,2),A=D[0],F=D[1],M=Object(n.useState)(!1),G=Object(u.a)(M,2),W=G[0],H=G[1],z=Object(n.useState)(""),J=Object(u.a)(z,2),q=J[0],K=J[1],$=Object(h.g)();Object(n.useEffect)((function(){t&&F(t.description+"(Delete this and press 'Enter' when done editing)")}),[t]);var V=function(){var e=Object(l.a)(o.a.mark((function e(a){var n,s,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("Enter"!==a.key){e.next=43;break}if(a.preventDefault(),_(T),!((T.match(/^\s*\n*\t*$/)||[]).length>0)){e.next=8;break}console.log("invitation name is empty!"),_(""),e.next=43;break;case 8:return console.log("trying to find user to invite..."),e.prev=9,e.next=12,y.a.get("/api/users?username="+T);case 12:if(200!==(n=e.sent).status||!t||!n.data){e.next=37;break}if(!t.members.includes(n.data._id)){e.next=18;break}C("User already in this group!"),e.next=37;break;case 18:return e.next=20,y.a.get("/api/notifications/filter?userId="+n.data._id+"&invitationId="+t._id);case 20:if(!(200===(s=e.sent).status&&s.data.length>0)){e.next=32;break}if(!s.data[0].senderName.includes(j.username)){e.next=26;break}C("User previously invited and has not responded!"),e.next=30;break;case 26:return e.next=28,y.a.put("/api/notifications/"+s.data[0]._id+"/addSender/"+j.username);case 28:200===e.sent.status?(_(""),B("Invitation sent!")):C("Server error. Unable to send notification");case 30:e.next=37;break;case 32:return c={senderName:[j.username],receiverId:n.data._id,invitationId:t._id,invitationName:t.groupName},e.next=35,y.a.post("/api/notifications",c);case 35:200===e.sent.status?(_(""),B("Invitation sent!")):C("Server error. Unable to send notification");case 37:e.next=43;break;case 39:e.prev=39,e.t0=e.catch(9),console.log(e.t0),C("User not found!");case 43:case"end":return e.stop()}}),e,null,[[9,39]])})));return function(t){return e.apply(this,arguments)}}(),Y=function(){var e=Object(l.a)(o.a.mark((function e(a){var n,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("Enter"!==a.key){e.next=23;break}if(a.preventDefault(),F(A),!((A.match(/^\s*\n*\t*$/)||[]).length>0)){e.next=7;break}return console.log("editedDescription is empty!"),K("Description cannot be empty!"),e.abrupt("return");case 7:if(!(A.length>200)){e.next=10;break}return K("Description cannot exceed 200 characters!"),e.abrupt("return");case 10:return e.prev=10,n={description:A},e.next=14,y.a.put("/api/groups/"+t._id,n);case 14:200===(s=e.sent).status&&(H(!1),r(s.data)),e.next=23;break;case 18:e.prev=18,e.t0=e.catch(10),console.log(e.t0),K("Server error: unable to update!"),H(!1);case 23:case"end":return e.stop()}}),e,null,[[10,18]])})));return function(t){return e.apply(this,arguments)}}(),Q=Object(w.jsx)("div",{className:"inviteComponentWrapper",children:Object(w.jsxs)("div",{className:"inviteComponentContainer",children:[Object(w.jsx)("span",{className:"inviteComponentText",children:"Who do you want to invite?"}),Object(w.jsx)("input",{className:"inviteComponentInput",placeholder:"Input name and Enter...",value:T,onChange:function(e){_(e.target.value),""!==I&&C(""),""!==U&&B("")},onKeyDown:V}),Object(w.jsx)("div",{className:"inviteComponentErrorMessage",children:I}),Object(w.jsx)("div",{className:"inviteComponentSuccessMessage",children:U})]})}),X=function(){var e=Object(l.a)(o.a.mark((function e(a){var n,s,c,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.target.files[0]){e.next=21;break}return n=a.target.files[0],console.log(n),e.prev=3,(s=new FormData).append("file",n),e.next=8,y.a.post("/api/upload/group",s);case 8:if(200!==(c=e.sent).status||!t){e.next=16;break}return r={groupImg:c.data.imagePath},console.log(r),e.next=14,y.a.put("/api/groups/"+t._id,r);case 14:200===e.sent.status&&f(c.data.imagePath);case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(3),console.log(e.t0);case 21:case"end":return e.stop()}}),e,null,[[3,18]])})));return function(t){return e.apply(this,arguments)}}();return Object(w.jsx)("div",{className:"GroupSidebarWrapper",children:Object(w.jsxs)(de.a,{textColor:"black",backgroundColor:"#FFD68D",children:[Object(w.jsx)(de.d,{prefix:Object(w.jsx)("i",{className:"fa fa-bars fa-large"}),children:Object(w.jsxs)("div",{className:"groupProfileDiv",children:[Object(w.jsx)("img",{className:"groupProfile",src:g?i+g:(null===t||void 0===t?void 0:t.groupImg)?i+t.groupImg:i+"group/noImageUploaded.png",alt:"",onClick:function(){j&&t&&j._id===t.creatorId?(alert("Close this dialogue and select image to upload"),document.getElementById("groupImageUploadInput").click()):alert("You must be logged in and be the creator of this group to change the group photo")}}),Object(w.jsx)("input",{style:{display:"none"},type:"file",id:"groupImageUploadInput",accept:"image/*",onChange:X})]})}),Object(w.jsxs)(de.d,{style:{textAlign:"center"},children:[Object(w.jsx)("div",{className:"groupNameWrapper",children:Object(w.jsx)("div",{className:"groupName",children:Object(w.jsx)("span",{className:"groupNameText",children:(null===t||void 0===t?void 0:t.groupName)?t.groupName:"No Group Name"})})}),a?Object(w.jsxs)("div",{children:[Object(w.jsx)("div",{className:"groupInviteButtonWrapper",children:Object(w.jsx)("div",{className:"groupInviteButton",onClick:function(){x(!m)},children:Object(w.jsx)("span",{className:"groupInviteButtonText",children:"+ Invite"})})}),Object(w.jsx)("div",{children:m?Q:Object(w.jsx)(w.Fragment,{})})]}):Object(w.jsx)("div",{className:"groupJoinButtonWrapper",children:Object(w.jsx)("div",{className:"groupJoinButton",onClick:c,children:Object(w.jsx)("span",{className:"groupJoinButtonText",children:"+ Join Group"})})})]}),Object(w.jsx)(de.b,{children:Object(w.jsxs)(de.e,{children:[Object(w.jsxs)("div",{className:"groupDescriptionContainer",children:[Object(w.jsxs)("div",{className:"groupDescriptionHeader",children:[Object(w.jsx)("div",{className:"groupDescriptionHeaderText",children:"Group Description:"}),j&&t&&j._id===t.creatorId&&!W?Object(w.jsx)("div",{className:"groupDescriptionHeaderEdit",onClick:function(){return H(!0)},children:"edit"}):Object(w.jsx)(w.Fragment,{})]}),W?Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("textarea",{className:"groupDescriptionTextArea",rows:6,value:A,onChange:function(e){""!==q&&K(""),F(e.target.value)},onKeyDown:Y}),Object(w.jsx)("div",{className:"groupDescriptionError",children:q})]}):Object(w.jsx)("div",{className:"groupDescriptionContent",children:(null===t||void 0===t?void 0:t.description)?t.description:"This group creator has left no description of this group"})]}),Object(w.jsxs)(de.f,{className:"groupMenuItem",onClick:function(){t&&$.push("/groups/"+t._id+"/main")},children:[Object(w.jsx)(vt.a,{className:"groupMyPostsIcon"}),Object(w.jsx)("span",{className:"groupMyPosts",children:"Group Home"})]}),a?Object(w.jsxs)(de.f,{className:"groupMenuItem",onClick:function(){t&&$.push("/groups/"+t._id+"/myPosts")},children:[Object(w.jsx)(ht.a,{className:"groupMyPostsIcon"}),Object(w.jsx)("span",{className:"groupMyPosts",children:"My Posts"})]}):Object(w.jsx)(w.Fragment,{})]})}),Object(w.jsx)(de.c,{children:a?Object(w.jsx)("div",{className:"groupLeaveButtonWrapper",children:Object(w.jsx)("div",{className:"groupLeaveButton",onClick:s,children:Object(w.jsx)("span",{className:"groupLeaveButtonText",children:"Leave Group"})})}):Object(w.jsx)(w.Fragment,{})})]})})}a(365);function ft(e){var t=e.handleAdd,a="http://localhost:8080/images/",s=Object(n.useContext)(ee),c=s.user,r=(s.sockio,Object(n.useState)("")),i=Object(u.a)(r,2),d=i[0],j=i[1],p=Object(n.useState)(""),b=Object(u.a)(p,2),m=b[0],x=b[1],h=Object(n.useState)(""),O=Object(u.a)(h,2),v=O[0],g=O[1],f=Object(n.useState)(""),N=Object(u.a)(f,2),k=N[0],I=N[1],C=function(){var e=Object(l.a)(o.a.mark((function e(){var a,n,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((m.match(/^\s*\n*\t*$/)||[]).length>0)){e.next=3;break}return g("Item ID cannot be empty!"),e.abrupt("return");case 3:if(!((d.match(/^\s*\n*\t*$/)||[]).length>0)){e.next=6;break}return I("Description cannot be empty!"),e.abrupt("return");case 6:return console.log("itemId: "+m),console.log("description: "+d),e.prev=8,e.next=11,y.a.get("/api/items?itemId="+m);case 11:if((a=e.sent).data){e.next=15;break}return g("Item with given Item ID does not exist!"),e.abrupt("return");case 15:if(c&&a.data.userId===c._id){e.next=18;break}return g("Item with given ID does not belong to you!"),e.abrupt("return");case 18:n=m,s=d,x(""),j(""),t(n,s),e.next=29;break;case 25:e.prev=25,e.t0=e.catch(8),console.log(e.t0),g("Item with given Item ID does not exist!");case 29:case"end":return e.stop()}}),e,null,[[8,25]])})));return function(){return e.apply(this,arguments)}}();return Object(w.jsx)("div",{className:"groupSharePostWrapper",children:Object(w.jsxs)("div",{className:"groupSharePostContainer",children:[Object(w.jsx)("div",{className:"sharePostTop",children:Object(w.jsxs)("div",{className:"sharePostTopContainer",children:[Object(w.jsx)("img",{className:"sharePostProfileImg",src:(null===c||void 0===c?void 0:c.profilePicture)?a+c.profilePicture:a+"person/noAvatar.png",alt:""}),Object(w.jsx)("span",{className:"sharePostProfileText",children:(null===c||void 0===c?void 0:c.username)?c.username:"No Name"})]})}),Object(w.jsx)("div",{className:"sharePostContainer",children:Object(w.jsxs)("div",{className:"sharePostContainerWrapper",children:[Object(w.jsxs)("div",{className:"sharePostContainerTop",children:[Object(w.jsxs)("div",{className:"sharePostContainerItemId",children:[Object(w.jsx)("input",{value:m,onChange:function(e){x(e.target.value),""!==v&&g("")},className:"sharePostContainerItemIdInput",placeholder:"Input your post ID..."}),Object(w.jsx)("span",{className:"sharePostContainerErrorMessage",children:v})]}),Object(w.jsx)("div",{className:"sharePostButton",onClick:C,children:"Post"})]}),Object(w.jsxs)("div",{className:"sharePostContainerTextArea",children:[Object(w.jsx)("textarea",{value:d,onChange:function(e){j(e.target.value),""!==k&&I("")},className:"sharePostContainerTextAreaInput",placeholder:"Describe your post..."}),Object(w.jsx)("span",{className:"sharePostContainerErrorMessage",children:k})]})]})})]})})}a(366);var Nt=a(236),wt=a.n(Nt),kt=a(237),It=a.n(kt),yt=a(238),Ct=a.n(yt),St=a(239),Pt=a.n(St);a(367);function Tt(e){var t=e.commentText,a=e.commentUserId,s=(e.own,e.handleDelete,"http://localhost:8080/images/"),c=Object(n.useState)(null),r=Object(u.a)(c,2),i=r[0],d=r[1];return Object(n.useEffect)((function(){(function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y()("/api/users?userId="+a);case 3:return t=e.sent,e.next=6,d(t.data);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}})()()}),[a]),Object(w.jsx)("div",{className:"commentWrapper",children:Object(w.jsxs)("div",{className:"commentContainer",children:[Object(w.jsxs)("div",{className:"commentUserDetails",children:[Object(w.jsx)("img",{className:"commentProfileImg",src:i&&i.profilePicture?s+i.profilePicture:s+"person/noAvatar.png",alt:""}),Object(w.jsx)("span",{className:"commentProfileText",children:(null===i||void 0===i?void 0:i.username)?i.username:"No Name"})]}),Object(w.jsx)("div",{className:"commentUserContent",children:t})]})})}function _t(e){var t=e.post,a=e.handleDelete,s=e.canCommentAndLike,c="http://localhost:8080/images/",r=Object(n.useContext)(ee),i=r.user,d=(r.sockio,Object(n.useState)(null)),j=Object(u.a)(d,2),p=j[0],b=j[1],m=Object(n.useState)([]),x=Object(u.a)(m,2),O=x[0],v=x[1],g=Object(n.useState)(null),k=Object(u.a)(g,2),I=k[0],C=k[1],S=Object(n.useState)(""),P=Object(u.a)(S,2),T=P[0],_=P[1],E=Object(n.useState)(!1),L=Object(u.a)(E,2),U=L[0],B=L[1],R=Object(n.useState)(0),D=Object(u.a)(R,2),A=D[0],F=D[1],M=Object(h.g)();Object(n.useEffect)((function(){(function(){var e=Object(l.a)(o.a.mark((function e(){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.a.get("/api/users?userId="+(null===t||void 0===t?void 0:t.postUserId));case 3:return a=e.sent,e.next=6,b(a.data);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}})()()}),[t]),Object(n.useEffect)((function(){(function(){var e=Object(l.a)(o.a.mark((function e(){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.a.get("/api/comments/filter?postId="+(null===t||void 0===t?void 0:t._id));case 3:return a=e.sent,e.next=6,v(a.data);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}})()()}),[t]),Object(n.useEffect)((function(){(function(){var e=Object(l.a)(o.a.mark((function e(){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.a.get("/api/items?itemId="+(null===t||void 0===t?void 0:t.itemId));case 3:return a=e.sent,e.next=6,C(a.data);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}})()()}),[t]),Object(n.useEffect)((function(){t&&(F(t.likedBy.length),B(!!i&&t.likedBy.includes(i._id)))}),[t,i]);var G=function(){var e=Object(l.a)(o.a.mark((function e(a){var n,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("Enter"!==a.key){e.next=22;break}if(a.preventDefault(),_(T),!((T.match(/^\s*\n*\t*$/)||[]).length>0)){e.next=8;break}console.log("comment is empty!"),_(""),e.next=22;break;case 8:return console.log("adding new comment..."),n={postId:t._id,commentUserId:i._id,commentText:T},e.prev=10,_(""),e.next=14,y.a.post("/api/comments",n);case 14:return s=e.sent,e.next=17,v([].concat(Object(Ce.a)(O),[s.data]));case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(10),console.log(e.t0);case 22:case"end":return e.stop()}}),e,null,[[10,19]])})));return function(t){return e.apply(this,arguments)}}(),W=function(){var e=Object(l.a)(o.a.mark((function e(){var a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i){e.next=5;break}M.push("/"),console.log("pushed to login"),e.next=18;break;case 5:return e.next=7,y.a.get("/api/conversations/find/"+i._id+"/"+t.postUserId);case 7:if(!((a=e.sent).data.length>0)){e.next=13;break}M.push("/chat/"+a.data[0]._id),console.log("pushed to chat id:"+a.data[0]._id),e.next=18;break;case 13:return e.next=15,y.a.post("/api/conversations",{members:[t.postUserId,i._id]});case 15:n=e.sent,M.push("/chat/"+n._id),console.log(n.data);case 18:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),H=function(){var e=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!s){e.next=14;break}return B(!1),F(A-1),e.prev=3,e.next=6,y.a.put("/api/posts/"+t._id+"/removeLike/"+(null===i||void 0===i?void 0:i._id));case 6:e.sent,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),console.log(e.t0);case 12:e.next=15;break;case 14:alert("You cannot dislike this post as you are either not logged in or not a member of this group!");case 15:case"end":return e.stop()}}),e,null,[[3,9]])})));return function(){return e.apply(this,arguments)}}(),z=function(){var e=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!s){e.next=14;break}return B(!0),F(A+1),e.prev=3,e.next=6,y.a.put("/api/posts/"+t._id+"/addLike/"+(null===i||void 0===i?void 0:i._id));case 6:e.sent,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),console.log(e.t0);case 12:e.next=15;break;case 14:alert("You cannot like this post as you are either not logged in or not a member of this group!");case 15:case"end":return e.stop()}}),e,null,[[3,9]])})));return function(){return e.apply(this,arguments)}}();return Object(w.jsx)("div",{className:"postWrapper",children:Object(w.jsxs)("div",{className:"postContainer",children:[Object(w.jsx)("div",{className:"postTop",children:Object(w.jsxs)(f.a,{className:"postTopContainerWrapper",children:[Object(w.jsxs)(N.a,{className:"postTopContainerLeft",children:[Object(w.jsx)("img",{className:"postProfileImg",src:p&&p.profilePicture?c+p.profilePicture:c+"person/noAvatar.png",alt:"",onClick:function(){p&&M.push("/profile/"+p.username+"/listings")}}),Object(w.jsx)("span",{className:"postProfileText",children:(null===p||void 0===p?void 0:p.username)?p.username:"No Name"})]}),Object(w.jsx)(N.a,{className:"postTopContainerRight",children:i&&i._id===t.postUserId?Object(w.jsx)("div",{className:"deleteButtonWrapper",children:Object(w.jsx)("div",{className:"deleteButton",onClick:function(){return a(t._id)},children:Object(w.jsx)("span",{className:"deleteButtonText",children:"Delete"})})}):Object(w.jsx)("div",{className:"postSwapButtonWrapper",children:Object(w.jsxs)("div",{className:"postSwapButton",onClick:W,children:[Object(w.jsx)(wt.a,{className:"chatIcon"}),Object(w.jsx)("span",{className:"postSwapButtonText",children:"Swap Away!"})]})})})]})}),Object(w.jsxs)("div",{className:"postMiddle",children:[Object(w.jsx)("div",{className:"postMiddleDescription",children:Object(w.jsx)("div",{className:"postMiddleDescriptionContainer",children:(null===t||void 0===t?void 0:t.description)?t.description:"No description available"})}),Object(w.jsx)("div",{className:"postMiddleItemListing",children:Object(w.jsx)(ve,{item:I,inPost:!0})}),Object(w.jsx)("div",{className:"postMiddleItemLikesComments",children:Object(w.jsxs)("div",{className:"postMiddleItemLikesCommentsContainer",children:[Object(w.jsxs)("div",{className:"postMiddleItemLikes",children:[U?Object(w.jsx)(It.a,{onClick:H}):Object(w.jsx)(Ct.a,{onClick:z}),Object(w.jsx)("span",{className:"numberLikes",children:A})]}),Object(w.jsxs)("div",{className:"postMiddleItemComments",children:[Object(w.jsx)(Pt.a,{}),Object(w.jsx)("span",{className:"numberComments",children:O.length})]})]})})]}),Object(w.jsxs)("div",{className:"postBottom",children:[s&&Object(w.jsx)("div",{className:"postCommentInputWrapper",children:Object(w.jsx)("textarea",{value:T,onChange:function(e){return _(e.target.value)},onKeyDown:G,className:"postCommentInput",placeholder:"Write a comment and press enter to send..."})}),Object(w.jsx)("div",{className:"postCommentContentSection",children:O.map((function(e){return Object(w.jsx)(Tt,{commentText:e.commentText,commentUserId:e.commentUserId},e._id)}))})]})]})})}function Et(){var e=Object(n.useContext)(ee),t=e.user,a=(e.sockio,Object(h.h)().groupId),s=Object(h.h)().pageType,c=Object(n.useState)([]),r=Object(u.a)(c,2),i=r[0],d=r[1],j=Object(n.useState)(null),p=Object(u.a)(j,2),b=p[0],m=p[1],x=Object(n.useState)(!1),O=Object(u.a)(x,2),v=O[0],g=O[1],f=Object(h.g)();Object(n.useEffect)((function(){(function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.a.get("/api/groups?groupId="+a);case 3:return t=e.sent,e.next=6,m(t.data);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}})()()}),[a]),Object(n.useEffect)((function(){b&&t&&g(b.members.includes(t._id))}),[b,t]),Object(n.useEffect)((function(){(function(){var e=Object(l.a)(o.a.mark((function e(){var n,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,"main"!==s){e.next=10;break}return console.log("page type is main"),e.next=5,y.a.get("/api/posts/filter?groupId="+a);case 5:return n=e.sent,e.next=8,d(n.data);case 8:e.next=17;break;case 10:if("myPosts"!==s){e.next=17;break}return console.log("page type is myPosts"),e.next=14,y.a.get("/api/posts/filter?groupId="+a+"&userId="+(null===t||void 0===t?void 0:t._id));case 14:return c=e.sent,e.next=17,d(c.data);case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(0),console.log(e.t0);case 22:case"end":return e.stop()}}),e,null,[[0,19]])})));return function(){return e.apply(this,arguments)}})()()}),[s,a,t]);var N=function(){var e=Object(l.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("deleting post with id: "+t),e.next=4,y.a.delete("/api/posts?postId="+t);case 4:if(200!==(a=e.sent).status){e.next=10;break}return console.log(a.data.message),d(i.filter((function(e){return e._id!==t}))),e.next=10,y.a.delete("/api/comments/filter?postId="+t);case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=Object(l.a)(o.a.mark((function e(a,n){var s,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!b||!t){e.next=8;break}return s={groupId:b._id,postUserId:t._id,description:n,itemId:a},console.log(s),e.next=6,y.a.post("/api/posts",s);case 6:200===(c=e.sent).status&&d([c.data].concat(Object(Ce.a)(i)));case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,a){return e.apply(this,arguments)}}(),I=function(){var e=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!b||!t){e.next=6;break}return e.next=4,y.a.put("/api/groups/"+b._id+"/removeMember/"+t._id);case 4:200===e.sent.status&&g(!1);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t||f.push("/"),!b||!t){e.next=7;break}return e.next=5,y.a.put("/api/groups/"+b._id+"/addMember/"+t._id);case 5:200===e.sent.status&&g(!0);case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();return Object(w.jsxs)("div",{children:[Object(w.jsx)("div",{className:"groupPageTop",children:Object(w.jsx)(C,{currentUser:t,handleUpdateGroup:function(e){e&&e.length>0&&e[0]&&t&&g(e[0].members.includes(t._id))}})}),Object(w.jsxs)("div",{className:"groupPageContainer",children:[Object(w.jsx)("div",{className:"groupSidebarWrapper",children:Object(w.jsx)(gt,{className:"groupSidebarComponent",group:b,isGroupMember:v,handleLeave:I,handleJoin:S,handleUpdateGroup:function(e){e&&m(e)}})}),Object(w.jsxs)("div",{className:"groupPageContainerRight",children:[Object(w.jsx)("div",{className:"groupPagecontainerRightShareWrapper",children:b&&t&&v&&"main"===s?Object(w.jsx)(ft,{handleAdd:k}):Object(w.jsx)(w.Fragment,{})}),i.map((function(e){return Object(w.jsx)(_t,{post:e,handleDelete:N,canCommentAndLike:b&&t&&v},e._id)}))]})]})]})}a(368);function Lt(){var e=Object(h.h)().searchText,t=Object(n.useState)([]),a=Object(u.a)(t,2),s=a[0],c=a[1],r=Object(n.useContext)(ee),i=r.user;r.sockio;return Object(n.useEffect)((function(){(function(){var t=Object(l.a)(o.a.mark((function t(){var a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!e){t.next=7;break}return t.next=4,y.a.get("/api/groups?search="+e);case 4:return a=t.sent,t.next=7,c(a.data);case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(){return t.apply(this,arguments)}})()()}),[e]),Object(w.jsxs)("div",{children:[Object(w.jsx)(C,{currentUser:i}),Object(w.jsxs)("div",{className:"productWrapper",children:[Object(w.jsx)("div",{className:"productHeader",children:e?"Search results for: "+e:""}),Object(w.jsx)(f.a,{className:"listingRow",xl:5,lg:4,md:3,sm:2,children:s.map((function(e){return Object(w.jsx)("div",{children:Object(w.jsx)(ae,{groupImg:e.groupImg,groupName:e.groupName,groupId:e._id},e._id)})}))})]})]})}var Ut=function(){var e=Object(n.useContext)(ee).user;return Object(w.jsx)(O.a,{children:Object(w.jsxs)(h.d,{children:[Object(w.jsx)(h.b,{exact:!0,path:"/",children:e?Object(w.jsx)(h.a,{to:"/home"}):Object(w.jsx)(lt,{})}),Object(w.jsx)(h.b,{path:"/register",children:e?Object(w.jsx)(h.a,{to:"/home"}):Object(w.jsx)(oe,{})}),Object(w.jsx)(h.b,{exact:!0,path:"/product/:pageType/:categoryName",children:Object(w.jsx)(Pe,{})}),Object(w.jsx)(h.b,{exact:!0,path:"/home",children:Object(w.jsx)(se,{})}),Object(w.jsx)(h.b,{exact:!0,path:"/create",children:e?Object(w.jsx)(ze,{}):Object(w.jsx)(lt,{})}),Object(w.jsx)(h.b,{exact:!0,path:"/chat/:initialActiveConvoId",children:e?Object(w.jsx)(pt,{}):Object(w.jsx)(lt,{})}),Object(w.jsx)(h.b,{exact:!0,path:"/profile/:username/listings",children:Object(w.jsx)(ye,{})}),Object(w.jsx)(h.b,{exact:!0,path:"/profile/:username/reviews",children:Object(w.jsx)(Se,{})}),Object(w.jsx)(h.b,{exact:!0,path:"/profile/:username/settings",children:Object(w.jsx)(mt,{})}),Object(w.jsx)(h.b,{exact:!0,path:"/profile/:username/mygroups",children:Object(w.jsx)(bt,{})}),Object(w.jsx)(h.b,{exact:!0,path:"/items/:itemId",children:Object(w.jsx)(tt,{})}),Object(w.jsx)(h.b,{exact:!0,path:"/groups/search/:searchText",children:Object(w.jsx)(Lt,{})}),Object(w.jsx)(h.b,{exact:!0,path:"/groups/:groupId/:pageType",children:Object(w.jsx)(Et,{})})]})})},Bt=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,450)).then((function(t){var a=t.getCLS,n=t.getFID,s=t.getFCP,c=t.getLCP,r=t.getTTFB;a(e),n(e),s(e),c(e),r(e)}))};r.a.render(Object(w.jsx)(s.a.StrictMode,{children:Object(w.jsx)(te,{children:Object(w.jsx)(Ut,{})})}),document.getElementById("root")),Bt()}},[[369,1,2]]]);
//# sourceMappingURL=main.d90606e9.chunk.js.map