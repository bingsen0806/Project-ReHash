(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{195:function(e,t,a){},196:function(e,t,a){},197:function(e,t,a){},204:function(e,t,a){},217:function(e,t,a){},218:function(e,t,a){},219:function(e,t,a){},220:function(e,t,a){},222:function(e,t,a){},241:function(e,t,a){},242:function(e,t,a){},264:function(e,t,a){},265:function(e,t,a){},267:function(e,t,a){},268:function(e,t,a){},269:function(e,t,a){},270:function(e,t,a){},271:function(e,t,a){},272:function(e,t,a){},273:function(e,t,a){},274:function(e,t,a){},295:function(e,t,a){},296:function(e,t,a){},297:function(e,t,a){},298:function(e,t,a){},299:function(e,t,a){"use strict";a.r(t);var s=a(0),n=a.n(s),c=a(21),r=a.n(c),i=(a(195),a(196),a(11)),o=a(376),l=a(373),j=(a(197),a(125),a(339)),d=a(343),u=a(24),b=a(22),m=a(2);function p(e){var t=e.currentUser,a="http://localhost:8080/images/",n=Object(u.g)(),c=Object(s.useState)(""),r=Object(i.a)(c,2),p=r[0],x=r[1];return Object(m.jsxs)(o.a,{className:"topbarWrapper fixed-top",expand:"lg",children:[Object(m.jsxs)(o.a.Brand,{onClick:function(){n.push("/home")},children:[Object(m.jsx)("img",{className:"ReHashLogo",src:a+"ReHashLogo.png",alt:""}),Object(m.jsx)("span",{className:"logoText",children:"ReHash"})]}),Object(m.jsx)(o.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(m.jsx)(o.a.Collapse,{id:"basic-navbar-nav",className:"collapseBar",children:Object(m.jsxs)(l.a,{className:"mr-auto",children:[Object(m.jsx)(l.a.Link,{className:"swap",onClick:function(){n.push("/create")},children:"Swap on ReHash"}),Object(m.jsxs)("div",{className:"searchbar",children:[Object(m.jsx)(j.a,{className:"searchIcon"}),Object(m.jsx)("input",{placeholder:"Seach for a swap...",className:"searchInput",value:p,onChange:function(e){return x(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&(e.preventDefault(),(p.match(/^\s*\n*\t*$/)||[]).length>0?console.log("search string is empty!"):n.push("/product/search/"+p))}})]}),Object(m.jsx)(b.b,{to:"/chat/0",children:Object(m.jsx)(d.a,{className:"chat",htmlColor:"orange"})}),Object(m.jsx)(b.b,{to:t?"/profile/"+t.username+"/listings":"/",children:Object(m.jsx)("img",{className:"userProfilePic",src:t&&t.profilePicture?a+t.profilePicture:a+"person/noAvatar.png",alt:"userProfile"})})]})})]})}var x=a(344),O=a(162),h=a(345),g=a(346),v=a(347),f=a(348),w=a(349),N=a(350),y=a(351),k=a(352),I=a(353),C=(a(204),a(101)),S=a.n(C);a(105);function T(){var e=Object(u.g)(),t=function(t){e.push("/product/categories/"+t)};return Object(m.jsxs)(S.a,{responsive:{superLargeDesktop:{breakpoint:{max:4e3,min:3e3},items:8},desktop:{breakpoint:{max:3e3,min:1024},items:6},tablet:{breakpoint:{max:1024,min:464},items:2},mobile:{breakpoint:{max:464,min:0},items:1}},children:[Object(m.jsx)("div",{className:"item",onClick:function(){return t("clothing")},children:Object(m.jsx)("div",{className:"button",children:Object(m.jsx)(x.a,{className:"itemButton",children:Object(m.jsxs)(O.a,{children:[Object(m.jsx)(h.a,{children:Object(m.jsx)(g.a,{className:"itemIcon"})}),Object(m.jsx)(h.a,{children:Object(m.jsx)("span",{className:"itemText text-center",children:"Clothing"})})]})})})}),Object(m.jsx)("div",{className:"item",onClick:function(){return t("beauty")},children:Object(m.jsx)("div",{className:"button",children:Object(m.jsx)(x.a,{className:"itemButton",children:Object(m.jsxs)(O.a,{children:[Object(m.jsx)(h.a,{children:Object(m.jsx)(v.a,{className:"itemIcon"})}),Object(m.jsx)(h.a,{children:Object(m.jsx)("span",{className:"itemText text-center",children:"Beauty"})})]})})})}),Object(m.jsx)("div",{className:"item",onClick:function(){return t("sports equipments")},children:Object(m.jsx)("div",{className:"button",children:Object(m.jsx)(x.a,{className:"itemButton",children:Object(m.jsxs)(O.a,{children:[Object(m.jsx)(h.a,{children:Object(m.jsx)(f.a,{className:"itemIcon"})}),Object(m.jsx)(h.a,{children:Object(m.jsx)("span",{className:"itemText text-center",children:"Sports Equipments"})})]})})})}),Object(m.jsx)("div",{className:"item",onClick:function(){return t("home appliances")},children:Object(m.jsx)("div",{className:"button",children:Object(m.jsx)(x.a,{className:"itemButton",children:Object(m.jsxs)(O.a,{children:[Object(m.jsx)(h.a,{children:Object(m.jsx)(w.a,{className:"itemIcon"})}),Object(m.jsx)(h.a,{children:Object(m.jsx)("span",{className:"itemText text-center",children:"Home Appliances"})})]})})})}),Object(m.jsx)("div",{className:"item",onClick:function(){return t("automotive")},children:Object(m.jsx)("div",{className:"button",children:Object(m.jsx)(x.a,{className:"itemButton",children:Object(m.jsxs)(O.a,{children:[Object(m.jsx)(h.a,{children:Object(m.jsx)(N.a,{className:"itemIcon"})}),Object(m.jsx)(h.a,{children:Object(m.jsx)("span",{className:"itemText text-center",children:"Automotive"})})]})})})}),Object(m.jsx)("div",{className:"item",onClick:function(){return t("hobbies")},children:Object(m.jsx)("div",{className:"button",children:Object(m.jsx)(x.a,{className:"itemButton",children:Object(m.jsxs)(O.a,{children:[Object(m.jsx)(h.a,{children:Object(m.jsx)(y.a,{className:"itemIcon"})}),Object(m.jsx)(h.a,{children:Object(m.jsx)("span",{className:"itemText text-center",children:"Hobbies"})})]})})})}),Object(m.jsx)("div",{className:"item",onClick:function(){return t("computers and tech")},children:Object(m.jsx)("div",{className:"button",children:Object(m.jsx)(x.a,{className:"itemButton",children:Object(m.jsxs)(O.a,{children:[Object(m.jsx)(h.a,{children:Object(m.jsx)(k.a,{className:"itemIcon"})}),Object(m.jsx)(h.a,{children:Object(m.jsx)("span",{className:"itemText text-center",children:"Computers & Tech"})})]})})})}),Object(m.jsx)("div",{className:"item",onClick:function(){return t("other tangibles")},children:Object(m.jsx)("div",{className:"button",children:Object(m.jsx)(x.a,{className:"itemButton",children:Object(m.jsxs)(O.a,{children:[Object(m.jsx)(h.a,{children:Object(m.jsx)(I.a,{className:"itemIcon"})}),Object(m.jsx)(h.a,{children:Object(m.jsx)("span",{className:"itemText text-center",children:"Others"})})]})})})})]})}a(217),a(218);var P=a(354),B=a(355),R=a(356),L=a(357),A=a(358),E=a(359),F=a(360);function U(){var e=Object(u.g)(),t=function(t){e.push("/product/categories/"+t)};return Object(m.jsxs)(S.a,{responsive:{superLargeDesktop:{breakpoint:{max:4e3,min:3e3},items:8},desktop:{breakpoint:{max:3e3,min:1024},items:6},tablet:{breakpoint:{max:1024,min:464},items:2},mobile:{breakpoint:{max:464,min:0},items:1}},children:[Object(m.jsx)("div",{className:"item",onClick:function(){return t("outdoor activities")},children:Object(m.jsx)("div",{className:"button",children:Object(m.jsx)(x.a,{className:"itemButton",children:Object(m.jsxs)(O.a,{children:[Object(m.jsx)(h.a,{children:Object(m.jsx)(P.a,{className:"itemIcon"})}),Object(m.jsx)(h.a,{children:Object(m.jsx)("span",{className:"itemText text-center",children:"Outdoor Activities"})})]})})})}),Object(m.jsx)("div",{className:"item",onClick:function(){return t("travel")},children:Object(m.jsx)("div",{className:"button",children:Object(m.jsx)(x.a,{className:"itemButton",children:Object(m.jsxs)(O.a,{children:[Object(m.jsx)(h.a,{children:Object(m.jsx)(B.a,{className:"itemIcon"})}),Object(m.jsx)(h.a,{children:Object(m.jsx)("span",{className:"itemText text-center",children:"Travel"})})]})})})}),Object(m.jsx)("div",{className:"item",onClick:function(){return t("discussion")},children:Object(m.jsx)("div",{className:"button",children:Object(m.jsx)(x.a,{className:"itemButton",children:Object(m.jsxs)(O.a,{children:[Object(m.jsx)(h.a,{children:Object(m.jsx)(R.a,{className:"itemIcon"})}),Object(m.jsx)(h.a,{children:Object(m.jsx)("span",{className:"itemText text-center",children:"Discussion"})})]})})})}),Object(m.jsx)("div",{className:"item",onClick:function(){return t("food")},children:Object(m.jsx)("div",{className:"button",children:Object(m.jsx)(x.a,{className:"itemButton",children:Object(m.jsxs)(O.a,{children:[Object(m.jsx)(h.a,{children:Object(m.jsx)(L.a,{className:"itemIcon"})}),Object(m.jsx)(h.a,{children:Object(m.jsx)("span",{className:"itemText text-center",children:"Food"})})]})})})}),Object(m.jsx)("div",{className:"item",onClick:function(){return t("indoor activities")},children:Object(m.jsx)("div",{className:"button",children:Object(m.jsx)(x.a,{className:"itemButton",children:Object(m.jsxs)(O.a,{children:[Object(m.jsx)(h.a,{children:Object(m.jsx)(A.a,{className:"itemIcon"})}),Object(m.jsx)(h.a,{children:Object(m.jsx)("span",{className:"itemText text-center",children:"Indoor Activities"})})]})})})}),Object(m.jsx)("div",{className:"item",onClick:function(){return t("sports")},children:Object(m.jsx)("div",{className:"button",children:Object(m.jsx)(x.a,{className:"itemButton",children:Object(m.jsxs)(O.a,{children:[Object(m.jsx)(h.a,{children:Object(m.jsx)(E.a,{className:"itemIcon"})}),Object(m.jsx)(h.a,{children:Object(m.jsx)("span",{className:"itemText text-center",children:"Sports"})})]})})})}),Object(m.jsx)("div",{className:"item",onClick:function(){return t("games and esports")},children:Object(m.jsx)("div",{className:"button",children:Object(m.jsx)(x.a,{className:"itemButton",children:Object(m.jsxs)(O.a,{children:[Object(m.jsx)(h.a,{children:Object(m.jsx)(F.a,{className:"itemIcon"})}),Object(m.jsx)(h.a,{children:Object(m.jsx)("span",{className:"itemText text-center",children:"Games & Esports"})})]})})})}),Object(m.jsx)("div",{className:"item",onClick:function(){return t("other intangibles")},children:Object(m.jsx)("div",{className:"button",children:Object(m.jsx)(x.a,{className:"itemButton",children:Object(m.jsxs)(O.a,{children:[Object(m.jsx)(h.a,{children:Object(m.jsx)(I.a,{className:"itemIcon"})}),Object(m.jsx)(h.a,{children:Object(m.jsx)("span",{className:"itemText text-center",children:"Others"})})]})})})})]})}var _=a(378),D=(a(219),a(379));function M(){return Object(m.jsx)("div",{className:"trendingSwap",children:Object(m.jsxs)(h.a,{xs:1,md:3,className:"g-4",children:[Object(m.jsx)(O.a,{children:Object(m.jsxs)(_.a,{children:[Object(m.jsx)(_.a.Img,{variant:"top",src:"/assests/trendingItems/levijeans.jpg",className:"trendingSwapItemImg"}),Object(m.jsxs)(_.a.Body,{className:"trendingSwapItemBody",children:[Object(m.jsx)(_.a.Title,{children:"Male Levi Jeans (size 28)"}),Object(m.jsx)("span",{className:"trendingSwapText",children:"Ideal Swap: "}),Object(m.jsx)(D.a,{className:"tag",label:"Beauty",size:"small",color:"secondary"}),Object(m.jsx)(D.a,{className:"tag",label:"Clothing",size:"small",color:"secondary"}),Object(m.jsx)(_.a.Text,{children:"Looking for a swap as I am trying to clear my wardrobe. The jeans are still in very good conditions. Open to all swaps!"})]})]})}),Object(m.jsx)(O.a,{children:Object(m.jsxs)(_.a,{children:[Object(m.jsx)(_.a.Img,{variant:"top",src:"/assests/trendingItems/basketball.jpg",className:"trendingSwapItemImg"}),Object(m.jsxs)(_.a.Body,{className:"trendingSwapItemBody",children:[Object(m.jsx)(_.a.Title,{children:"Basketball Experience Session"}),Object(m.jsx)("span",{className:"trendingSwapText",children:"Ideal Swap: "}),Object(m.jsx)(D.a,{className:"tag",label:"Sports Equipments",size:"small",color:"secondary"}),Object(m.jsx)(D.a,{className:"tag",label:"Outdoor Activities",size:"small",color:"primary"}),Object(m.jsx)(_.a.Text,{children:"I'm offering a Basketball experience session for people who are new to the sport. Looking forward to receiving swap offers!"})]})]})}),Object(m.jsx)(O.a,{children:Object(m.jsxs)(_.a,{children:[Object(m.jsx)(_.a.Img,{variant:"top",src:"/assests/trendingItems/cooking.jpg",className:"trendingSwapItemImg"}),Object(m.jsxs)(_.a.Body,{className:"trendingSwapItemBody",children:[Object(m.jsx)(_.a.Title,{children:"Brownies Baking Session"}),Object(m.jsx)("span",{className:"trendingSwapText",children:"Ideal Swap: "}),Object(m.jsx)(D.a,{className:"tag",label:"Indoor Activities",size:"small",color:"primary"}),Object(m.jsx)(_.a.Text,{children:"I am an experienced baker and looking step out of my comfort zones to explore new activities. Indoor activities would be a nice match but I am also open to other swaps as well! Swap away!"})]})]})}),Object(m.jsx)(O.a,{children:Object(m.jsxs)(_.a,{children:[Object(m.jsx)(_.a.Img,{variant:"top",src:"/assests/trendingItems/drone.jpg",className:"trendingSwapItemImg"}),Object(m.jsxs)(_.a.Body,{className:"trendingSwapItemBody",children:[Object(m.jsx)(_.a.Title,{children:"Drone"}),Object(m.jsx)("span",{className:"trendingSwapText",children:"Ideal Swap: "}),Object(m.jsx)(D.a,{className:"tag",label:"Games & Esports",size:"small",color:"primary"}),Object(m.jsx)(D.a,{className:"tag",label:"Hobbies",size:"small",color:"secondary"}),Object(m.jsx)(D.a,{className:"tag",label:"Computers & Tech",size:"small",color:"secondary"}),Object(m.jsx)(_.a.Text,{children:"I bought this drone a few months ago but barely used. Looking for a new hobby as I don't really enjoy drone flying. I like gadgets and IT a lot so i want to explore or own cool gadgets as a replacement for my drones."})]})]})}),Object(m.jsx)(O.a,{children:Object(m.jsxs)(_.a,{children:[Object(m.jsx)(_.a.Img,{variant:"top",src:"/assests/trendingItems/esports.jpg",className:"trendingSwapItemImg"}),Object(m.jsxs)(_.a.Body,{className:"trendingSwapItemBody",children:[Object(m.jsx)(_.a.Title,{children:"Dota Online Gaming Session"}),Object(m.jsx)("span",{className:"trendingSwapText",children:"Ideal Swap: "}),Object(m.jsx)(D.a,{className:"tag",label:"Computers & Tech",size:"small",color:"secondary"}),Object(m.jsx)(D.a,{className:"tag",label:"Games & Esports",size:"small",color:"primary"}),Object(m.jsx)(D.a,{className:"tag",label:"Discussion",size:"small",color:"secondary"}),Object(m.jsx)(_.a.Text,{children:"I'm a bored gamer who really love to play Dota. I want to find a friend who could play together as make friends :) I also like to discuss game strategies as well as tech related stuff!"})]})]})}),Object(m.jsx)(O.a,{children:Object(m.jsxs)(_.a,{children:[Object(m.jsx)(_.a.Img,{variant:"top",src:"/assests/trendingItems/guitar.jpg",className:"trendingSwapItemImg"}),Object(m.jsxs)(_.a.Body,{className:"trendingSwapItemBody",children:[Object(m.jsx)(_.a.Title,{children:"Guitar Jamming Session"}),Object(m.jsx)("span",{className:"trendingSwapText",children:"Ideal Swap: "}),Object(m.jsx)(D.a,{className:"tag",label:"Indoor Activities",size:"small",color:"primary"}),Object(m.jsx)(D.a,{className:"tag",label:"Others",size:"small"}),Object(m.jsx)(_.a.Text,{children:"Looking for someone who wanna do song covers together. I'm a guitarist so I wanna find a drummer to wanna make music together and jam with me!"})]})]})}),Object(m.jsx)(O.a,{children:Object(m.jsxs)(_.a,{children:[Object(m.jsx)(_.a.Img,{variant:"top",src:"/assests/trendingItems/hiking.jpg",className:"trendingSwapItemImg"}),Object(m.jsxs)(_.a.Body,{className:"trendingSwapItemBody",children:[Object(m.jsx)(_.a.Title,{children:"Hiking Exploration Session"}),Object(m.jsx)("span",{className:"trendingSwapText",children:"Ideal Swap: "}),Object(m.jsx)(D.a,{className:"tag",label:"Outdoor Activities",size:"small",color:"primary"}),Object(m.jsx)(D.a,{className:"tag",label:"Food",size:"small",color:"primary"}),Object(m.jsx)(D.a,{className:"tag",label:"Others",size:"small"}),Object(m.jsx)(_.a.Text,{children:"If you wanna explore hiking do offer me some swap! Details can be discussed later :)"})]})]})}),Object(m.jsx)(O.a,{children:Object(m.jsxs)(_.a,{children:[Object(m.jsx)(_.a.Img,{variant:"top",src:"/assests/trendingItems/tetris.jpg",className:"trendingSwapItemImg"}),Object(m.jsxs)(_.a.Body,{className:"trendingSwapItemBody",children:[Object(m.jsx)(_.a.Title,{children:"Tetris Strategy Discussion"}),Object(m.jsx)("span",{className:"trendingSwapText",children:"Ideal Swap: "}),Object(m.jsx)(D.a,{className:"tag",label:"Games & Esports",size:"small",color:"primary"}),Object(m.jsx)(D.a,{className:"tag",label:"Hobbies",size:"small",color:"secondary"}),Object(m.jsx)(D.a,{className:"tag",label:"Discussion",size:"small",color:"primary"}),Object(m.jsx)(_.a.Text,{children:"Tetris is such a niche game and I don't really have friends around me who emjoy playing such a game. Looking for a tetris player who wanna play together and learn from each other!"})]})]})}),Object(m.jsx)(O.a,{children:Object(m.jsxs)(_.a,{children:[Object(m.jsx)(_.a.Img,{variant:"top",src:"/assests/trendingItems/watch.jpg",className:"trendingSwapItemImg"}),Object(m.jsxs)(_.a.Body,{className:"trendingSwapItemBody",children:[Object(m.jsx)(_.a.Title,{children:"Fossil Watch"}),Object(m.jsx)("span",{className:"trendingSwapText",children:"Ideal Swap: "}),Object(m.jsx)(D.a,{className:"tag",label:"Clothing",size:"small",color:"secondary"}),Object(m.jsx)(D.a,{className:"tag",label:"Beauty",size:"small",color:"secondary"}),Object(m.jsx)(D.a,{className:"tag",label:"Others",size:"small",color:"primary"}),Object(m.jsx)(_.a.Text,{children:"Bought this watch compulsively but barely used. Looking for a cool swap with this cool watch!"})]})]})})]})})}a(220);var G=a(88);function z(){return Object(m.jsx)("div",{children:Object(m.jsxs)(G.a,{className:"adsWrapper",children:[Object(m.jsx)(G.a.Item,{interval:3e3,children:Object(m.jsx)("img",{className:"adsPics d-block w-50",src:"assests/adsPics/ads1.jpeg",alt:"First slide"})}),Object(m.jsx)(G.a.Item,{interval:3e3,children:Object(m.jsx)("img",{className:"adsPics d-block w-50",src:"/assests/adsPics/ads2.jpeg",alt:"Second slide"})}),Object(m.jsx)(G.a.Item,{interval:3e3,children:Object(m.jsx)("img",{className:"adsPics d-block w-50",src:"/assests/adsPics/ads3.jpeg",alt:"Third slide"})})]})})}var H=function(e,t){switch(t.type){case"LOGIN_START":return{user:null,isFetching:!0,error:!1,sockio:null};case"LOGIN_SUCCESS":return{user:t.payload.user,isFetching:!1,error:!1,sockio:t.payload.sock};case"LOGIN_FAILURE":return{user:null,isFetching:!1,error:t.payload,sockio:null};case"LOGOUT_START":return{user:t.payload.user,isFetching:!0,error:!1,sockio:t.payload.sock};case"LOGOUT_SUCCESS":return{user:null,isFetching:!1,error:!1,sockio:null};case"LOGOUT_FAILURE":return{user:null,isFetching:!1,error:t.payload,sockio:null};case"UPDATE":return{user:t.payload.user,isFetching:!1,error:!1,sockio:t.payload.sock};default:return e}},W={user:null,isFetching:!1,error:!1,sockio:null},V=Object(s.createContext)(W),q=function(e){var t=e.children,a=Object(s.useReducer)(H,W),n=Object(i.a)(a,2),c=n[0],r=n[1];return Object(m.jsx)(V.Provider,{value:{user:c.user,isFetching:c.isFetching,error:c.error,sockio:c.sockio,dispatch:r},children:t})};function K(){var e=Object(s.useContext)(V),t=e.user,a=e.sockio;return Object(s.useEffect)((function(){console.log("socket is: ",null===a||void 0===a?void 0:a.id),console.log("user is: ",t)}),[a,t]),Object(m.jsxs)("div",{children:[Object(m.jsx)(p,{currentUser:t}),Object(m.jsx)(z,{}),Object(m.jsxs)("div",{className:"homeWrapper",children:[Object(m.jsxs)("div",{className:"tangible",children:[Object(m.jsx)("div",{className:"itemsType",children:Object(m.jsx)("span",{children:"Explore Tangible"})}),Object(m.jsx)(T,{})]}),Object(m.jsxs)("div",{className:"intangible",children:[Object(m.jsx)("div",{className:"itemsType",children:Object(m.jsxs)("span",{children:["Explore Intangible ",null===a||void 0===a?void 0:a.id]})}),Object(m.jsx)(U,{})]}),Object(m.jsxs)("div",{className:"trendingSwap",children:[Object(m.jsx)("span",{className:"trendingSwapHead",children:"Trending Swaps"}),Object(m.jsx)(M,{className:"trendingSwapItems"})]})]})]})}var J=a(6),Y=a.n(J),$=a(14),Q=(a(222),a(164),a(12)),X=a.n(Q);a(241);var Z=a(365),ee=(a(242),a(380)),te=a(34),ae=a(361),se=a(362),ne=a(363),ce=a(364);function re(e){var t=e.sidebarUser,a="http://localhost:8080/images/",n=Object(s.useContext)(V),c=n.user,r=n.sockio,i=n.dispatch,o=Object(u.g)(),l=function(){var e=Object($.a)(Y.a.mark((function e(t){var a;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a=function(){var e=Object($.a)(Y.a.mark((function e(t){return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"LOGOUT_START",payload:{user:c,sock:r}}),e.prev=1,e.next=4,r.disconnect();case 4:t({type:"LOGOUT_SUCCESS"}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),t({type:"LOGIN_FAILURE",payload:e.t0});case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),e.next=4,a(i);case 4:o.push("/"),console.log("logged out");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(m.jsx)("div",{className:"sidebar",style:{display:"flex",height:"100vh",overflow:"scroll initial"},children:Object(m.jsxs)(te.a,{textColor:"black",backgroundColor:"#FFD68D",children:[Object(m.jsx)(te.e,{className:"dummyslot"}),Object(m.jsx)(te.e,{className:"dummyslot"}),Object(m.jsx)(te.e,{className:"dummyslot"}),Object(m.jsx)(te.e,{className:"dummyslot"}),Object(m.jsx)(te.d,{prefix:Object(m.jsx)("i",{className:"fa fa-bars fa-large"}),children:Object(m.jsx)("img",{className:"userProfile",src:(null===t||void 0===t?void 0:t.profilePicture)?a+t.profilePicture:a+"person/noAvatar.png",alt:""})}),Object(m.jsxs)(te.d,{style:{textAlign:"center"},children:[Object(m.jsx)("div",{children:null===t||void 0===t?void 0:t.username}),Object(m.jsxs)("div",{className:"ratings",children:[Object(m.jsx)("div",{children:"Ratings: "}),Object(m.jsx)(ee.a,{value:t?t.cumulativeRating/t.ratedByUsers:3,precision:.1,readOnly:!0})]})]}),Object(m.jsx)(te.b,{children:Object(m.jsxs)(te.e,{children:[Object(m.jsxs)(te.f,{onClick:function(){o.push("/profile/"+(null===t||void 0===t?void 0:t.username)+"/listings"),console.log("done")},className:"sidebarMenuItem",children:[Object(m.jsx)(ae.a,{className:"sidebarIcons"}),Object(m.jsx)("span",{className:"sidebarMenuText",children:"Listings"})]}),Object(m.jsxs)(te.f,{className:"sidebarMenuItem",onClick:function(){o.push("/profile/"+(null===t||void 0===t?void 0:t.username)+"/reviews")},children:[Object(m.jsx)(se.a,{className:"sidebarIcons"}),Object(m.jsx)("span",{className:"sidebarMenuText",children:"Reviews"})]}),t&&t._id===(null===c||void 0===c?void 0:c._id)?Object(m.jsxs)(te.f,{className:"sidebarMenuItem",onClick:function(){o.push("/profile/"+(null===t||void 0===t?void 0:t.username)+"/settings")},children:[Object(m.jsx)(ne.a,{className:"sidebarIcons"}),Object(m.jsx)("span",{className:"sidebarMenuText",children:"Settings"})]}):Object(m.jsx)(m.Fragment,{})]})}),t&&t._id===(null===c||void 0===c?void 0:c._id)?Object(m.jsx)(te.c,{style:{textAlign:"center"},children:Object(m.jsxs)("div",{className:"sidebar-btn-wrapper",style:{padding:"20px 5px"},children:[Object(m.jsx)(ce.a,{className:"sidebarIcons",onClick:l}),Object(m.jsx)("span",{className:"sidebarMenuText",onClick:l,children:"Log out"})]})}):Object(m.jsx)(m.Fragment,{})]})})}a(264);function ie(e){var t=e.item,a=Object(u.g)();return Object(s.useEffect)((function(){console.log(t)}),[t]),Object(m.jsx)("div",{className:"itemListingWrapper",onClick:function(){a.push("/items/"+t._id)},children:Object(m.jsxs)(_.a,{children:[Object(m.jsx)(_.a.Img,{variant:"top",src:"http://localhost:8080/images/"+t.img[0],className:"trendingSwapItemImg"}),Object(m.jsxs)(_.a.Body,{className:"trendingSwapItemBody",children:[Object(m.jsxs)(_.a.Title,{className:"itemListingCardTitle",children:[Object(m.jsx)("span",{style:{marginRight:"10px"},children:t.title}),Object(m.jsx)(D.a,{className:"tag",label:"waiting"===t.status?"available":t.status,size:"small",color:"waiting"===t.status?"":"reserved"===t.status?"primary":"secondary",style:{marginBottom:"5px",marginTop:"5px"}})]}),Object(m.jsx)("span",{className:"trendingSwapText",children:"Ideal Swap: "}),t.idealSwaps.map((function(e){return Object(m.jsx)(D.a,{className:"tag",label:e,size:"small",color:"secondary",style:{marginRight:"5px"}},e)})),Object(m.jsx)(_.a.Text,{children:t.desc})]})]})})}var oe=a(366),le=a(374),je=a(367);a(265);function de(e){var t=e.fill,a=void 0===t?"none":t;return Object(m.jsx)("svg",{class:"w-6 h-6 star",fill:a,stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:Object(m.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"0",d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})})}function ue(e){var t=e.index,a=e.rating,n=e.hoverRating,c=e.onMouseEnter,r=e.onMouseLeave,i=e.onSaveRating,o=e.selected,l=e.notSelected,j=Object(s.useMemo)((function(){return n>=t||!n&&a>=t?"rgb(240, 158, 6)":"rgb(145, 144, 144)"}),[a,n,t]);return Object(m.jsx)("div",{style:{height:"20px",width:"20px"},className:"cursor-pointer",onMouseEnter:function(){return c(t)},onMouseLeave:function(){return r()},onClick:function(){return i(t)},children:o?Object(m.jsx)(de,{fill:"rgb(240, 158, 6)"}):l?Object(m.jsx)(de,{fill:"rgb(145, 144, 144)"}):Object(m.jsx)(de,{fill:j})})}a(266);function be(e){var t=e.review,a=e.doneReview,n=e.handleSubmit,c=e.handleDelete,r=Object(s.useState)(0),o=Object(i.a)(r,2),l=o[0],j=o[1],d=Object(s.useState)(0),u=Object(i.a)(d,2),b=u[0],p=u[1],x=Object(s.useContext)(V).user,O="http://localhost:8080/images/",h=Object(s.useState)(null),g=Object(i.a)(h,2),v=g[0],f=g[1],w=Object(s.useState)(""),N=Object(i.a)(w,2),y=N[0],k=N[1];Object(s.useEffect)((function(){t&&function(){var e=Object($.a)(Y.a.mark((function e(){var a;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,X.a.get("/api/users?userId="+t.reviewerId);case 2:a=e.sent,f(a.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[t]);var I=function(e){a||(p(e),console.log("hover rating is: "+e))},C=function(){a||p(0)},S=function(e){a||(j(e),console.log("your rating is: "+e))};return Object(m.jsxs)("div",{className:"userReview",children:[Object(m.jsxs)("div",{className:"userReviewTop",children:[Object(m.jsx)("img",{src:a?v&&v.profilePicture?O+v.profilePicture:O+"person/noAvatar.png":x&&x.profilePicture?O+x.profilePicture:O+"person/noAvatar.png",alt:"",className:"userReviewImg"}),Object(m.jsxs)("div",{className:"userReviewTopMiddle",children:[Object(m.jsx)("div",{className:"userReviewTopMiddleName",children:a?null===v||void 0===v?void 0:v.username:x?x.username:"Anonymous"}),Object(m.jsxs)("div",{className:"userReviewTopMiddleRatings",children:[Object(m.jsx)("div",{className:"userReviewTopMiddleRatingsText",children:"Ratings: "}),Object(m.jsx)("div",{className:"userReviewRatingStars",children:[1,2,3,4,5].map(t?function(e){return Object(m.jsx)(ue,{index:e,rating:l,hoverRating:b,onMouseEnter:I,onMouseLeave:C,onSaveRating:S,selected:t.rating>=e,notSelected:t.rating<e})}:function(e){return Object(m.jsx)(ue,{index:e,rating:l,hoverRating:b,onMouseEnter:I,onMouseLeave:C,onSaveRating:S})})})]})]}),Object(m.jsx)("div",{className:"userReviewTopRight",children:a?t.reviewerId===(null===x||void 0===x?void 0:x._id)?Object(m.jsx)("button",{className:"userReviewSubmitButton",onClick:function(){return c(t)},children:"Delete"}):Object(m.jsx)(m.Fragment,{}):Object(m.jsx)("button",{className:"userReviewSubmitButton",onClick:function(){return n(y,l)},children:"Submit"})})]}),Object(m.jsx)("div",{className:"userReviewBottom",children:a?Object(m.jsx)("div",{className:"userReviewedText",children:t.reviewText}):Object(m.jsx)("textarea",{placeholder:"(Optional) Leave a review ...",className:"userReviewInput",value:y,onChange:function(e){return k(e.target.value)}})})]})}function me(){var e=Object(s.useContext)(V),t=e.user,a=e.sockio,n=Object(u.h)().username,c=Object(s.useState)([]),r=Object(i.a)(c,2),o=r[0],l=r[1],j=Object(s.useState)("tangibles"),d=Object(i.a)(j,2),b=d[0],x=d[1],O=Object(s.useState)(null),g=Object(i.a)(O,2),v=g[0],f=g[1],w=Object(s.useState)(0),N=Object(i.a)(w,2),y=N[0],k=N[1];Object(s.useEffect)((function(){console.log("socket is: ",null===a||void 0===a?void 0:a.id),console.log("username is: ",n)}),[a,n]),Object(s.useEffect)((function(){(function(){var e=Object($.a)(Y.a.mark((function e(){var t;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=6;break}return e.next=3,X.a.get("/api/users?username="+n);case 3:t=e.sent,f(t.data),console.log("profileUser is: "+t.data);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[n]),Object(s.useEffect)((function(){(function(){var e=Object($.a)(Y.a.mark((function e(){var t;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!v){e.next=5;break}return e.next=3,X.a.get("/api/items/categories?categoryName="+b+"&userId="+v._id);case 3:t=e.sent,l(t.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[b,v]);return Object(m.jsxs)("div",{children:[Object(m.jsx)(p,{currentUser:t}),Object(m.jsxs)("div",{className:"userlistingContainer",children:[Object(m.jsx)(re,{className:"sidebar",sidebarUser:v}),Object(m.jsxs)(Z.a,{className:"userlistingWrapper",children:[Object(m.jsx)("div",{className:"tabBar",children:Object(m.jsx)(oe.a,{margin:200,style:{marginBottom:"10px"},children:Object(m.jsxs)(le.a,{value:y,indicatorColor:"primary",textColor:"primary",centered:!0,children:[Object(m.jsx)(je.a,{label:"Tangible",onClick:function(){x("tangibles"),k(0)}}),Object(m.jsx)(je.a,{label:"Intangible",onClick:function(){x("intangibles"),k(1)}})]})})}),Object(m.jsx)(h.a,{className:"listingRow",xs:1,md:3,children:o.length?o.map((function(e){return Object(m.jsx)(ie,{item:e},e._id)})):Object(m.jsx)("div",{children:"User does not have any item in this category"})})]})]})]})}var pe=a(54);a(267);function xe(){var e=Object(s.useContext)(V),t=e.user,a=(e.sockio,Object(s.useState)(null)),n=Object(i.a)(a,2),c=n[0],r=n[1],o=Object(u.h)().username,l=Object(s.useState)([]),j=Object(i.a)(l,2),d=j[0],b=j[1],x=Object(s.useState)(!1),O=Object(i.a)(x,2),h=O[0],g=O[1],v=Object(s.useState)([]),f=Object(i.a)(v,2),w=f[0],N=f[1],y=Object(s.useState)(0),k=Object(i.a)(y,2),I=k[0],C=k[1],S=Object(s.useState)(0),T=Object(i.a)(S,2),P=T[0],B=T[1];Object(s.useEffect)((function(){(function(){var e=Object($.a)(Y.a.mark((function e(){var t;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=6;break}return e.next=3,X.a.get("/api/users?username="+o);case 3:t=e.sent,r(t.data),console.log("profileUser is: "+t.data);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[o]),Object(s.useEffect)((function(){console.log("user is changed"),console.log(t)}),[t]),Object(s.useEffect)((function(){console.log(t),c&&(function(){var e=Object($.a)(Y.a.mark((function e(){var a,s;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,X.a.get("/api/reviews/profileUser/"+c._id);case 2:a=e.sent,s=a.data.filter((function(e){return e.reviewerId!==(null===t||void 0===t?void 0:t._id)})),b(s),console.log(s);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()(),C(c.cumulativeRating),B(c.ratedByUsers))}),[c,t]),Object(s.useEffect)((function(){(function(){var e=Object($.a)(Y.a.mark((function e(){var a;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&c&&c._id!==t._id){e.next=4;break}g(!0),e.next=8;break;case 4:return e.next=6,X.a.get("/api/reviews/between/"+c._id+"/"+t._id);case 6:(a=e.sent).data.length>0?(g(!0),N(a.data),console.log(a.data)):g(!1);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[c,t]);var R=function(){var e=Object($.a)(Y.a.mark((function e(a,s){var n,r;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(h||!(s>0)){e.next=13;break}return console.log("reviewText is: "+a+"\n rating is: "+s),n={reviewerId:t._id,revieweeId:c._id,rating:s,reviewText:a},e.next=5,X.a.post("/api/reviews",n);case 5:return r=e.sent,N([].concat(Object(pe.a)(w),[r.data])),g(!0),e.next=10,X.a.put("/api/users/"+c._id,{cumulativeRating:I+s,ratedByUsers:P+1});case 10:e.sent,C(I+s),B(P+1);case 13:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),L=function(){var e=Object($.a)(Y.a.mark((function e(t){var a;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!h){e.next=14;break}return console.log(t),e.next=4,X.a.delete("/api/reviews/id/"+t._id);case 4:return a=e.sent,console.log(a.status),console.log(typeof a.status),N([]),g(!1),e.next=11,X.a.put("/api/users/"+c._id,{cumulativeRating:I-t.rating,ratedByUsers:P-1});case 11:e.sent,C(I-t.rating),B(P-1);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(m.jsxs)("div",{children:[Object(m.jsx)(p,{currentUser:t}),Object(m.jsxs)("div",{className:"userReviewsContainer",children:[Object(m.jsx)(re,{sidebarUser:c}),Object(m.jsxs)(Z.a,{className:"userReviewsWrapper",children:[Object(m.jsx)("span",{className:"userReviewsHeader",children:"Reviews"}),h?Object(m.jsx)(m.Fragment,{}):Object(m.jsx)(be,{className:"userReview",doneReview:!1,handleSubmit:R,handleDelete:L}),w.map((function(e){return Object(m.jsx)(be,{className:"userReview",review:e,doneReview:!0,handleSubmit:R,handleDelete:L},e._id)})),d.map((function(e){return Object(m.jsx)(be,{className:"userReview",review:e,doneReview:!0,handleSubmit:R,handleDelete:L},e._id)}))]})]})]})}a(268);var Oe=a(368);function he(){var e=Object(u.h)().categoryName,t=Object(u.h)().pageType,a=Object(s.useState)([]),n=Object(i.a)(a,2),c=n[0],r=n[1],o=Object(s.useContext)(V),l=o.user;o.sockio;return Object(s.useEffect)((function(){console.log("categoryName is: "+e),console.log("pageType is "+t),function(){var a=Object($.a)(Y.a.mark((function a(){var s,n;return Y.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,"categories"!==t||!e){a.next=9;break}return a.next=4,X.a.get("/api/items/categories?categoryName="+e);case 4:return s=a.sent,a.next=7,r(s.data);case 7:a.next=15;break;case 9:if("search"!==t||!e){a.next=15;break}return a.next=12,X.a.get("/api/items?search="+e);case 12:return n=a.sent,a.next=15,r(n.data);case 15:a.next=20;break;case 17:a.prev=17,a.t0=a.catch(0),console.log(a.t0);case 20:case"end":return a.stop()}}),a,null,[[0,17]])})));return function(){return a.apply(this,arguments)}}()()}),[e,t]),Object(m.jsxs)("div",{children:[Object(m.jsx)(p,{currentUser:l}),Object(m.jsxs)("div",{className:"productWrapper",children:[Object(m.jsxs)("div",{className:"backArrow",children:[Object(m.jsx)(Oe.a,{}),Object(m.jsx)("span",{children:"Back"})]}),Object(m.jsx)("span",{className:"productHeader",children:"search"===t?"Search results for: "+e:"categories"===t&&e?e.charAt(0).toUpperCase()+e.slice(1):"Product Descrption Header"}),Object(m.jsx)(h.a,{className:"listingRow",xs:1,md:3,children:c.map((function(e){return Object(m.jsx)("div",{children:Object(m.jsx)(ie,{item:e},e._id)})}))})]})]})}var ge=a(64),ve=a(18),fe=a(182),we=(a(269),a(372)),Ne=a(175),ye=a.n(Ne),ke=a(375),Ie=a(369),Ce=a(371),Se=Object(Ie.a)((function(e){return{root:{width:500,"& > * + *":{marginTop:e.spacing(3)}}}})),Te={flex:1,display:"flex",flexDirection:"column",alignItems:"center",padding:"20px",borderWidth:2,borderRadius:2,borderColor:"#eeeeee",borderStyle:"dashed",backgroundColor:"#fafafa",color:"#bdbdbd",outline:"none",transition:"border .24s ease-in-out"},Pe={borderColor:"#2196f3"},Be={borderColor:"#00e676"},Re={borderColor:"#ff1744"};function Le(){var e=Object(s.useContext)(V),t=e.user,a=(e.sockio,Se()),n=[{title:"Clothing"},{title:"Beauty"},{title:"Sports Equipments"},{title:"Home Appliances"},{title:"Automotive"},{title:"Clothing"},{title:"Hobbies"},{title:"Computers and Tech"},{title:"Outdoor Activities"},{title:"Travel"},{title:"Discussion"},{title:"Food"},{title:"Indoor Activities"},{title:"Sports"},{title:"Games and Esports"},{title:"Others"}],c=Object(s.useState)([]),r=Object(i.a)(c,2),o=r[0],l=r[1],j=Object(s.useState)({}),d=Object(i.a)(j,2),u=d[0],b=d[1],g=Object(s.useState)({}),v=Object(i.a)(g,2),f=v[0],w=v[1],N=Object(s.useState)([]),y=Object(i.a)(N,2),k=y[0],I=y[1],C=Object(s.useState)([]),S=Object(i.a)(C,2),T=S[0],P=S[1],B=Object(s.useCallback)((function(e){f.images&&w(Object(ve.a)(Object(ve.a)({},f),{},{images:null}));var t=e.map((function(e){return Object.assign(e,{preview:URL.createObjectURL(e),customFileName:Date.now().toString().concat(e.name)})})),a=[].concat(Object(pe.a)(o),Object(pe.a)(t));console.log(a),console.log(a.length),a.length>6&&(a=a.slice(a.length-6,a.length),console.log(a)),l(a)}),[f,o]),R=Object(fe.a)({accept:"image/*",onDrop:B,maxFiles:6}),L=R.getRootProps,A=R.getInputProps,E=R.isDragActive,F=R.isDragAccept,U=R.isDragReject,D=Object(s.useMemo)((function(){return Object(ve.a)(Object(ve.a)(Object(ve.a)(Object(ve.a)({},Te),E?Pe:{}),F?Be:{}),U?Re:{})}),[E,U,F]),M=o.map((function(e){return Object(m.jsx)("div",{className:"thumb",children:Object(m.jsx)("img",{src:e.preview,className:"userSwapImg",alt:""})},e.customFileName)}));Object(s.useEffect)((function(){return function(){o.forEach((function(e){return URL.revokeObjectURL(e.preview)}))}}),[o]);var G=function(e,t){b(Object(ve.a)(Object(ve.a)({},u),{},Object(ge.a)({},e,t))),f[e]&&w(Object(ve.a)(Object(ve.a)({},f),{},Object(ge.a)({},e,null)))},z=function(){var e=u.title,t=u.description,a=u.tangible,s={};return e&&""!==e?e.length>50&&(s.title="title cannot be more than 50 characters"):s.title="title cannot be blank!",t&&""!==t?t.length>500&&(s.description="description cannot be more than 500 characters"):s.description="description cannot be blank!",a&&""!==a||(s.tangible="specify whether your item is tangible or intangible!"),T&&0!==T.length||(s.swapCategories="select at least 1 category!"),k&&0!==k.length||(s.idealCategories="select at least 1 category!"),0===o.length&&(s.images="you have to upload at least 1 image!"),s},H=function(){var e=Object($.a)(Y.a.mark((function e(a){var s,n,c,r,i,j,d,m;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),s=z(),!(Object.keys(s).length>0)){e.next=7;break}w(s),console.log(s),e.next=27;break;case 7:for(n=T.map((function(e){return e.title.toLowerCase()})),n=[].concat(Object(pe.a)(n),[u.tangible]),c=k.map((function(e){return e.title.toLowerCase()})),r=new FormData,i=0;i<o.length;i+=1)r.append("file",o[i]),r.append("name",o[i].customFileName),console.log("customFileName is: "+o[i].customFileName),console.log(typeof o[i].customFileName);return console.log(r),e.next=15,X.a.post("/api/upload/items",r);case 15:if(200!==(j=e.sent).status){e.next=23;break}return d={userId:t._id,title:u.title,desc:u.description,img:j.data.imagePaths,categories:n,idealSwaps:c,status:"waiting"},console.log(d),e.next=21,X.a.post("/api/items",d);case 21:m=e.sent,console.log(m.data);case 23:l([]),b({tangible:""}),I([]),P([]);case 27:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(m.jsxs)("div",{children:[Object(m.jsx)(p,{currentUser:t}),Object(m.jsx)("div",{className:"createListingHeader",children:Object(m.jsx)("span",{children:"Make your swap today!"})}),Object(m.jsxs)(h.a,{children:[Object(m.jsx)(O.a,{xs:5,children:Object(m.jsx)(_.a,{className:"uploadImagesCard shadow p-3 mb-5 bg-white rounded",children:Object(m.jsxs)(_.a.Body,{children:[Object(m.jsx)("h5",{className:"uploadImagesCardHeader",children:"Drag and Drop images here"}),Object(m.jsx)("h6",{className:"uploadImagesCardSubHeader",children:"or click to upload"}),Object(m.jsx)(we.a,{children:Object(m.jsxs)(we.a.Group,{controlId:"images",children:[Object(m.jsx)(we.a.Control,{type:"text",style:{display:"none"},isInvalid:!!f.images}),Object(m.jsx)("div",{className:"swapImgDragAndDropWrapper",children:Object(m.jsxs)("section",{className:"container",children:[Object(m.jsxs)("div",Object(ve.a)(Object(ve.a)({},L({style:D})),{},{className:"dragAndDropDiv",children:[Object(m.jsx)("input",Object(ve.a)({},A())),Object(m.jsx)("p",{children:Object(m.jsx)(ye.a,{fontSize:"large"})}),Object(m.jsx)("p",{children:"Drop away your swap images..."})]})),Object(m.jsx)("aside",{className:"thumbsContainer",children:M})]})}),Object(m.jsx)(we.a.Control.Feedback,{type:"invalid",children:f.images})]})})]})})}),Object(m.jsx)(O.a,{xs:7,children:Object(m.jsxs)(we.a,{className:"formWrapper",children:[Object(m.jsxs)(we.a.Group,{controlId:"title",children:[Object(m.jsx)(we.a.Label,{children:"Title"}),Object(m.jsx)(we.a.Control,{className:"swapAwayFormControl",type:"text",maxlength:"50",placeholder:"Enter your swap title",value:u.title?u.title:"",onChange:function(e){return G("title",e.target.value)},isInvalid:!!f.title}),Object(m.jsx)(we.a.Control.Feedback,{type:"invalid",children:f.title}),Object(m.jsx)(we.a.Text,{className:"text-muted",children:"Create an interesting title for your swap!"})]}),Object(m.jsxs)(we.a.Group,{controlId:"description",children:[Object(m.jsx)(we.a.Label,{children:"Description"}),Object(m.jsx)(we.a.Control,{className:"swapAwayFormControl",as:"textarea",maxlength:"500",rows:3,value:u.description?u.description:"",placeholder:"Describe your swap",onChange:function(e){return G("description",e.target.value)},isInvalid:!!f.description}),Object(m.jsx)(we.a.Control.Feedback,{type:"invalid",children:f.description})]}),Object(m.jsxs)(we.a.Group,{controlId:"tangible",children:[Object(m.jsx)(we.a.Label,{children:"Is your item Tangible or Intangible?"}),Object(m.jsxs)(we.a.Control,{className:"swapAwayFormControl",as:"select",value:u.tangible,onChange:function(e){return G("tangible",e.target.value)},isInvalid:!!f.tangible,children:[Object(m.jsx)("option",{value:"",disabled:!0,hidden:!0,selected:!0,children:"Select category:"}),Object(m.jsx)("option",{value:"tangibles",children:"Tangible"}),Object(m.jsx)("option",{value:"intagibles",children:"Intangible"})]}),Object(m.jsx)(we.a.Control.Feedback,{type:"invalid",children:f.tangible})]}),Object(m.jsxs)(we.a.Group,{controlId:"swapCategories",children:[Object(m.jsx)(we.a.Label,{children:"What is your swap category?"}),Object(m.jsx)(we.a.Control,{type:"text",style:{display:"none"},isInvalid:!!f.swapCategories}),Object(m.jsx)("div",{className:a.root,children:Object(m.jsx)(ke.a,{multiple:!0,limitTags:2,id:"multiple-limit-tags",options:n,value:T,getOptionLabel:function(e){return e.title},onChange:function(e,t){f.swapCategories&&w(Object(ve.a)(Object(ve.a)({},f),{},{swapCategories:null})),P(t),console.log(t)},renderInput:function(e){return Object(m.jsx)(Ce.a,Object(ve.a)(Object(ve.a)({},e),{},{variant:"outlined",label:"Select categories"}))}})}),Object(m.jsx)(we.a.Control.Feedback,{type:"invalid",children:f.swapCategories})]}),Object(m.jsxs)(we.a.Group,{controlId:"idealCategories",children:[Object(m.jsx)(we.a.Label,{children:"What is your ideal swap?"}),Object(m.jsx)(we.a.Control,{type:"text",style:{display:"none"},isInvalid:!!f.idealCategories}),Object(m.jsx)("div",{className:a.root,children:Object(m.jsx)(ke.a,{multiple:!0,limitTags:2,id:"multiple-limit-tags",options:n,value:k,getOptionLabel:function(e){return e.title},onChange:function(e,t){f.idealCategories&&w(Object(ve.a)(Object(ve.a)({},f),{},{idealCategories:null})),I(t),console.log(t)},renderInput:function(e){return Object(m.jsx)(Ce.a,Object(ve.a)(Object(ve.a)({},e),{},{variant:"outlined",label:"Select ideal swaps"}))}})}),Object(m.jsx)(we.a.Control.Feedback,{type:"invalid",children:f.idealCategories})]}),Object(m.jsx)(x.a,{className:"postButton",variant:"warning",onClick:H,children:"Post Swap"})]})})]})]})}a(270),a(271);function Ae(e){var t=e.imgLinkArray;return Object(s.useEffect)((function(){console.log(t)}),[t]),Object(m.jsx)("div",{className:"singleItemWrapper",children:Object(m.jsxs)(G.a,{responsive:{superLargeDesktop:{breakpoint:{max:4e3,min:3e3},items:8},desktop:{breakpoint:{max:3e3,min:1024},items:6},tablet:{breakpoint:{max:1024,min:464},items:2},mobile:{breakpoint:{max:464,min:0},items:1}},children:[null===t||void 0===t?void 0:t.map((function(e){return Object(m.jsx)(G.a.Item,{children:Object(m.jsx)("img",{className:"singleItemCarouselItemImg",src:"http://localhost:8080/images/"+e,alt:""})})})),Object(m.jsx)(G.a.Item,{children:Object(m.jsx)("img",{className:"singleItemCarouselItemImg",src:"/assests/singleItemPics/keychronK2Pic2.jpg",alt:""})}),Object(m.jsx)(G.a.Item,{children:Object(m.jsx)("img",{className:"singleItemCarouselItemImg",src:"/assests/singleItemPics/keychronK2Pic3.jpg",alt:""})})]})})}a(272);var Ee=a(377);function Fe(e){var t=e.itemUserId,a="http://localhost:8080/images/",n=Object(s.useState)(null),c=Object(i.a)(n,2),r=c[0],o=c[1],l=Object(u.g)(),j=Object(s.useContext)(V).user;Object(s.useEffect)((function(){(function(){var e=Object($.a)(Y.a.mark((function e(){var a;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=6;break}return e.next=3,X.a.get("/api/users?userId="+t);case 3:a=e.sent,o(a.data),console.log("itemUser is: "+a.data);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[t]);var b=function(){var e=Object($.a)(Y.a.mark((function e(){var a,s;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(j){e.next=5;break}l.push("/"),console.log("pushed to login"),e.next=18;break;case 5:return e.next=7,X.a.get("/api/conversations/find/"+j._id+"/"+t);case 7:if(!((a=e.sent).data.length>0)){e.next=13;break}l.push("/chat/"+a.data[0]._id),console.log("pushed to chat id:"+a.data[0]._id),e.next=18;break;case 13:return e.next=15,X.a.post("/api/conversations",{members:[t,j._id]});case 15:s=e.sent,l.push("/chat/"+s._id),console.log(s.data);case 18:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(m.jsx)("div",{children:Object(m.jsxs)(Ee.a,{className:"swapAwayPrompt",children:[Object(m.jsx)(Z.a,{children:Object(m.jsxs)(h.a,{children:[Object(m.jsx)(O.a,{sm:2,children:Object(m.jsx)("img",{className:"swapAwayUserImg",src:r&&r.profilePicture?a+r.profilePicture:a+"person/noAvatar.png",onClick:function(){r&&l.push("/profile/"+r.username+"/listings")},alt:""})}),Object(m.jsx)(O.a,{sm:10,children:Object(m.jsx)(Ee.a.Heading,{className:"swapAwayUsername",style:{fontSize:"1rem"},children:r?r.username:""})})]})}),Object(m.jsx)(x.a,{className:"swapAwayButton",variant:"warning",onClick:b,children:Object(m.jsxs)("div",{className:"swapAwayButtonTextGroup",children:[Object(m.jsx)(d.a,{}),Object(m.jsx)("span",{className:"swapAwayButtonText",children:"Swap Away!"})]})})]})})}a(273);var Ue=a(118),_e=a.n(Ue),De=a(119),Me=a.n(De),Ge=a(177),ze=a.n(Ge);function He(e){var t=e.itemUserId,a=e.itemStatus,n=e.handleReserve,c=e.handleUnreserve,r=e.handleSwap,o=e.handleUnswap,l=e.handleDelete,j="http://localhost:8080/images/",d=Object(s.useState)(null),b=Object(i.a)(d,2),p=b[0],g=b[1],v=Object(s.useState)(!1),f=Object(i.a)(v,2),w=f[0],N=f[1],y=Object(s.useState)(""),k=Object(i.a)(y,2),I=k[0],C=k[1],S=Object(s.useState)(""),T=Object(i.a)(S,2),P=T[0],B=T[1],R=Object(u.g)();Object(s.useEffect)((function(){(function(){var e=Object($.a)(Y.a.mark((function e(){var a;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=6;break}return e.next=3,X.a.get("/api/users?userId="+t);case 3:a=e.sent,g(a.data),console.log("itemUser is: "+a.data);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[t]);var L=function(){var e=Object($.a)(Y.a.mark((function e(t){var a;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("Enter"!==t.key){e.next=20;break}if(t.preventDefault(),console.log("user pressed enter key and the value is: "+I),""===I){e.next=18;break}return console.log("input is not empty"),e.prev=5,e.next=8,X.a.get("/api/agreements?id="+I);case 8:(a=e.sent)&&200===a.status&&a.data?a.data.parties.length>=2||a.data.items.length>=2?(console.log("Error 2"),B("This agreement id already involves 2 parties or 2 items")):(r(a.data._id),C(""),N(!1)):(console.log("Error 1"),B("Agreement does not exist!")),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(5),console.log("Error 1"),B("Agreement does not exist!");case 16:e.next=20;break;case 18:console.log("input empty!"),B("Agreement code cannot be empty!");case 20:case"end":return e.stop()}}),e,null,[[5,12]])})));return function(t){return e.apply(this,arguments)}}();return Object(m.jsx)("div",{children:Object(m.jsx)(Ee.a,{className:"userItemCommandPrompt",children:Object(m.jsxs)(Z.a,{children:[Object(m.jsxs)(h.a,{children:[Object(m.jsx)(O.a,{sm:2,children:Object(m.jsx)("img",{className:"userItemCommandUserImg",src:p&&p.profilePicture?j+p.profilePicture:j+"person/noAvatar.png",onClick:function(){p&&R.push("/profile/"+p.username+"/listings")},alt:""})}),Object(m.jsx)(O.a,{sm:10,children:Object(m.jsx)(Ee.a.Heading,{className:"userItemCommandUsername",style:{fontSize:"1rem"},children:p?p.username:"Anonymous"})})]}),Object(m.jsxs)("div",{className:"buttonWrapper",children:["waiting"===a?Object(m.jsx)("div",{children:Object(m.jsxs)(x.a,{className:"button",variant:"warning",onClick:n,children:[Object(m.jsx)(_e.a,{className:"icons"}),Object(m.jsx)("span",{className:"action",children:"Mark as Reserve"})]})}):"reserved"===a?Object(m.jsx)("div",{children:Object(m.jsxs)(x.a,{className:"button",variant:"warning",onClick:c,children:[Object(m.jsx)(_e.a,{className:"icons"}),Object(m.jsx)("span",{className:"action",children:"Unreserve"})]})}):Object(m.jsx)(m.Fragment,{}),Object(m.jsx)("div",{children:"deleted"===a?Object(m.jsx)(m.Fragment,{}):"swapped"===a?Object(m.jsxs)(x.a,{className:"button",variant:"warning",children:[Object(m.jsx)(Me.a,{className:"icons"}),Object(m.jsx)("span",{className:"action",onClick:o,children:"Cancel Agreement"})]}):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)(x.a,{className:"button",variant:"warning",children:[Object(m.jsx)(Me.a,{className:"icons"}),Object(m.jsx)("span",{className:"action",onClick:function(){return N(!w)},children:"Mark as Swapped"})]}),w?Object(m.jsx)(we.a,{className:"userItemCommandForm",children:Object(m.jsxs)(we.a.Group,{controlId:"title",children:[Object(m.jsx)(we.a.Control,{className:"userItemCommandFormControl",type:"input",maxlength:"30",placeholder:"Enter your agreement code",value:I,onChange:function(e){C(e.target.value),B(""),console.log("changed to: "+e.target.value)},onKeyDown:L,isInvalid:""!==P}),Object(m.jsx)(we.a.Control.Feedback,{type:"invalid",children:P})]})}):Object(m.jsx)(m.Fragment,{})]})}),Object(m.jsx)("div",{children:"deleted"===a||"swapped"===a?Object(m.jsx)(m.Fragment,{}):Object(m.jsxs)(x.a,{className:"button",variant:"warning",onClick:l,children:[Object(m.jsx)(ze.a,{className:"icons"}),Object(m.jsx)("span",{className:"action",children:"Delete"})]})})]})]})})})}function We(){var e=Object(s.useContext)(V),t=e.user,a=(e.sockio,Object(u.h)().itemId),n=Object(s.useState)(null),c=Object(i.a)(n,2),r=c[0],o=c[1],l=Object(u.g)(),j=Object(s.useState)(""),d=Object(i.a)(j,2),b=d[0],x=d[1];Object(s.useEffect)((function(){(function(){var e=Object($.a)(Y.a.mark((function e(){var t;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!a){e.next=7;break}return e.next=4,X.a.get("/api/items?itemId="+a);case 4:return t=e.sent,e.next=7,o(t.data);case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}})()()}),[a]);var g=function(){var e=Object($.a)(Y.a.mark((function e(){var t;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!a){e.next=6;break}return e.next=4,X.a.put("/api/items/update/status/"+a,{status:"reserved"});case 4:200===(t=e.sent).status&&t.data&&o(t.data);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),v=function(){var e=Object($.a)(Y.a.mark((function e(){var t;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!a){e.next=6;break}return e.next=4,X.a.put("/api/items/update/status/"+a,{status:"waiting"});case 4:200===(t=e.sent).status&&t.data&&o(t.data);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),f=function(){var e=Object($.a)(Y.a.mark((function e(s){var n;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("handleSwap called with agreementId: "+s),e.prev=1,e.next=4,X.a.put("/api/agreements/update/addParties/"+s,{userId:null===t||void 0===t?void 0:t._id,itemId:a});case 4:if(200!==e.sent.status||!a){e.next=10;break}return e.next=8,X.a.put("/api/items/update/status/"+a,{status:"swapped"});case 8:200===(n=e.sent).status&&n.data&&o(n.data);case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object($.a)(Y.a.mark((function e(){var s;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("handleUnswap called"),e.prev=1,e.next=4,X.a.put("/api/agreements/update/removeParties",{userId:null===t||void 0===t?void 0:t._id,itemId:a});case 4:if(200!==e.sent.status||!a){e.next=10;break}return e.next=8,X.a.put("/api/items/update/status/"+a,{status:"waiting"});case 8:200===(s=e.sent).status&&s.data&&o(s.data);case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(){return e.apply(this,arguments)}}(),N=function(){var e=Object($.a)(Y.a.mark((function e(){return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("handleDelete called"),e.prev=1,e.next=4,X.a.delete("/api/items?itemId="+(null===r||void 0===r?void 0:r._id));case 4:200===e.sent.status&&l.push("/profile/"+t.username+"/listings"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),y=function(e){console.log("copy link");var t=document.createElement("input"),a="link"===e?window.location.href:(null===r||void 0===r?void 0:r._id)?r._id:"";document.body.appendChild(t),t.value=a,t.select(),document.execCommand("copy"),document.body.removeChild(t),x("link"===e?"Link to this page has been copied":"Item ID has been copied")};return Object(m.jsxs)("div",{children:[Object(m.jsx)(p,{currentUser:t}),Object(m.jsxs)("div",{className:"itemBackArrow",children:[Object(m.jsx)(Oe.a,{}),Object(m.jsx)("span",{children:"Back"})]}),Object(m.jsxs)("label",{className:"itemHeader",children:[r?r.title:"Error: No Item Displayed",r?Object(m.jsx)(D.a,{className:"itemTag",label:"waiting"===r.status?"available":r.status,size:"small",color:"waiting"===r.status?"":"reserved"===r.status?"primary":"secondary",style:{marginLeft:"15px",marginRight:"10px",marginTop:"0px"}}):Object(m.jsx)(m.Fragment,{})]}),Object(m.jsx)(Z.a,{className:"itemImg",children:Object(m.jsxs)(h.a,{children:[Object(m.jsx)(O.a,{children:Object(m.jsx)(Ae,{imgLinkArray:r?r.img:[]})}),Object(m.jsx)(O.a,{children:(null===t||void 0===t?void 0:t._id)===(null===r||void 0===r?void 0:r.userId)?Object(m.jsx)(He,{itemUserId:null===r||void 0===r?void 0:r.userId,itemStatus:null===r||void 0===r?void 0:r.status,handleReserve:g,handleUnreserve:v,handleDelete:N,handleSwap:f,handleUnswap:w}):Object(m.jsx)(Fe,{itemUserId:null===r||void 0===r?void 0:r.userId})})]})}),Object(m.jsxs)("div",{className:"itemHeaderSecond",children:[Object(m.jsx)("div",{className:"itemGetLink",onClick:function(){return y("link")},children:"Copy Link"}),Object(m.jsx)("div",{className:"itemGetLink",onClick:function(){return y("id")},children:"Copy Item ID"}),Object(m.jsx)("div",{className:"itemCopyLinkText",children:b})]}),Object(m.jsxs)("div",{className:"itemDescription",children:[Object(m.jsx)("h5",{children:"Description"}),Object(m.jsx)("span",{children:r?r.desc:"The item does not exist, and hence no description"})]}),Object(m.jsxs)("div",{className:"itemIdealSwaps",children:[Object(m.jsx)("h5",{children:"Ideal swaps"}),null===r||void 0===r?void 0:r.idealSwaps.map((function(e){return Object(m.jsx)(D.a,{className:"tag",label:e,size:"small",color:"secondary",style:{marginRight:"5px"}},e)}))]})]})}a(274);var Ve=a(179),qe=a.n(Ve),Ke=a(180),Je=a.n(Ke),Ye=a(181),$e=a.n(Ye),Qe=a(178);function Xe(){var e=Object(s.useState)(""),t=Object(i.a)(e,2),a=t[0],n=t[1],c=Object(s.useState)(""),r=Object(i.a)(c,2),o=r[0],l=r[1],j=Object(s.useContext)(V),d=j.user,u=j.dispatch,p=Object(s.useRef)(),x=Object(s.useRef)();Object(s.useEffect)((function(){console.log("user is changed"),console.log(d)}),[d]);var O=function(){var e=Object($.a)(Y.a.mark((function e(){return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,X.a.post("/api/auth/login",{username:p.current.value,password:x.current.value}).then((function(){p.current.setCustomValidity(""),x.current.setCustomValidity("")}));case 3:e.sent,e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),400===e.t0.response.status&&p.current.setCustomValidity("Incorrect username or password");case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=Object($.a)(Y.a.mark((function e(t){return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n(t.target.value),console.log(t.target.value),O();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object($.a)(Y.a.mark((function e(t){return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l(t.target.value),console.log(t.target.value),O();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=Object($.a)(Y.a.mark((function e(t){return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),function(){var e=Object($.a)(Y.a.mark((function e(t,a){var s,n;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a({type:"LOGIN_START"}),e.prev=1,e.next=4,X.a.post("/api/auth/login",t);case 4:return s=e.sent,e.next=7,Object(Qe.io)();case 7:(n=e.sent).on("connect",(function(){n.emit("addUser",s.data._id),console.log("sock inside try block: ",n),a({type:"LOGIN_SUCCESS",payload:{user:s.data,sock:n}})})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),a({type:"LOGIN_FAILURE",payload:e.t0});case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t,a){return e.apply(this,arguments)}}()({username:a,password:o},u);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(m.jsx)("div",{className:"login",children:Object(m.jsxs)("div",{className:"loginWrapper",children:[Object(m.jsx)("div",{className:"loginTop",children:Object(m.jsx)(qe.a,{className:"loginShoppingCartIcon",style:{fontSize:220,color:"white"}})}),Object(m.jsxs)("form",{className:"loginBottom",onSubmit:v,children:[Object(m.jsxs)("div",{className:"loginInputWrapper",children:[Object(m.jsx)(Je.a,{style:{position:"absolute",color:"white",fontSize:32,top:32,left:10}}),Object(m.jsx)("input",{placeholder:"USERNAME",onChange:h,value:a,ref:p,required:!0,className:"loginInput"})]}),Object(m.jsxs)("div",{className:"loginInputWrapper",children:[Object(m.jsx)($e.a,{style:{position:"absolute",color:"white",fontSize:32,top:32,left:10}}),Object(m.jsx)("input",{placeholder:"PASSWORD",required:!0,onChange:g,value:o,ref:x,className:"loginInput",type:"password"})]}),Object(m.jsx)("button",{className:"loginButton",type:"submit",children:"LOGIN"}),Object(m.jsx)(b.b,{to:"/register",className:"loginBottomLink",children:"Forgot password?"}),Object(m.jsx)(b.b,{to:"/register",className:"loginBottomLink",children:"New to ReHash? Sign up now!"})]})]})})}a(295);var Ze=a(46);function et(e){var t=e.active,a=e.userId,n=e.lastMessageText,c=e.lastMessageTime,r=e.online,o="http://localhost:8080/images/",l=Object(s.useState)(""),j=Object(i.a)(l,2),d=j[0],u=j[1],b=Object(s.useState)(null),p=Object(i.a)(b,2),x=p[0],O=p[1];return Object(s.useEffect)((function(){console.log("lastMessageText updated. the new message is: ",n)}),[n]),Object(s.useEffect)((function(){c&&u(Object(Ze.a)(c));var e=setInterval((function(){c&&d!==Object(Ze.a)(c)&&u(Object(Ze.a)(c))}),6e4);return function(){return clearInterval(e)}}),[c]),Object(s.useEffect)((function(){(function(){var e=Object($.a)(Y.a.mark((function e(){var t;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,X()("/api/users?userId="+a);case 3:return t=e.sent,e.next=6,O(t.data);case 6:console.log("successfully got user"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}})()()}),[a]),Object(m.jsxs)("div",{className:t?"conversation conversationActive":"conversation",children:[Object(m.jsxs)("div",{className:"conversationLeft",children:[Object(m.jsx)("img",{src:(null===x||void 0===x?void 0:x.profilePicture)?o+x.profilePicture:o+"person/noAvatar.png",alt:"",className:"conversationImg"}),r?Object(m.jsx)("div",{className:"conversationBadge"}):Object(m.jsx)(m.Fragment,{})]}),Object(m.jsxs)("div",{className:"conversationRight",children:[Object(m.jsxs)("div",{className:"conversationRightTop",children:[Object(m.jsx)("div",{className:"conversationName",children:null===x||void 0===x?void 0:x.username}),Object(m.jsx)("div",{className:"conversationStatus",children:d})]}),Object(m.jsx)("span",{className:"conversationLastMsg",children:n})]})]})}a(296);function tt(e){var t=e.message,a=e.own,n=e.pictureLink,c=Object(s.useState)(""),r=Object(i.a)(c,2),o=r[0],l=r[1],j=Object(s.useState)(!1),d=Object(i.a)(j,2),u=d[0],b=d[1];return Object(s.useEffect)((function(){t&&l(Object(Ze.a)(t.createdAt));var e=setInterval((function(){o!==Object(Ze.a)(t.createdAt)&&l(Object(Ze.a)(t.createdAt))}),6e4);return function(){return clearInterval(e)}}),[t]),a?Object(m.jsxs)("div",{className:"messageOwn",children:[Object(m.jsxs)("div",{className:"messageTopOwn",children:[Object(m.jsx)("img",{className:"messageImgOwn",src:n,alt:""}),Object(m.jsx)("p",{className:"messageTextOwn",onClick:function(){b(!u)},children:t.text})]}),u?Object(m.jsx)("div",{className:"messageBottom",children:o}):Object(m.jsx)(m.Fragment,{})]}):Object(m.jsxs)("div",{className:"message",children:[Object(m.jsxs)("div",{className:"messageTop",children:[Object(m.jsx)("img",{className:"messageImg",src:n,alt:""}),Object(m.jsx)("p",{className:"messageText",onClick:function(){b(!u)},children:t.text})]}),u?Object(m.jsx)("div",{className:"messageBottom",children:o}):Object(m.jsx)(m.Fragment,{})]})}a(297);function at(){var e=Object(s.useState)([]),t=Object(i.a)(e,2),a=t[0],n=t[1],c=Object(s.useState)(null),r=Object(i.a)(c,2),o=r[0],l=r[1],j=Object(s.useState)([]),d=Object(i.a)(j,2),b=d[0],x=d[1],O=Object(s.useState)(""),h=Object(i.a)(O,2),g=h[0],v=h[1],f=Object(s.useState)(null),w=Object(i.a)(f,2),N=w[0],y=w[1],k=Object(s.useState)([]),I=Object(i.a)(k,2),C=I[0],S=I[1],T=Object(s.useState)(""),P=Object(i.a)(T,2),B=P[0],R=P[1],L=Object(s.useState)(null),A=Object(i.a)(L,2),E=A[0],F=A[1],U=Object(s.useState)(""),_=Object(i.a)(U,2),D=_[0],M=_[1],G="http://localhost:8080/images/",z=Object(s.useRef)(),H=Object(u.h)().initialActiveConvoId,W=Object(s.useContext)(V),q=W.user,K=W.sockio,J=Object(u.g)();Object(s.useEffect)((function(){(function(){var e=Object($.a)(Y.a.mark((function e(){var t;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("0"===H){e.next=6;break}return console.log("initialActiveConvoId is: "+H),e.next=4,X.a.get("/api/conversations/id/"+H);case 4:t=e.sent,l(t.data);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[H]),Object(s.useEffect)((function(){console.log("socket is: ",K.id),K.on("getMessage",(function(e){y({sender:e.senderId,text:e.text,createdAt:Date.now()})}))}),[K]),Object(s.useEffect)((function(){N&&(null===o||void 0===o?void 0:o.members.includes(N.sender))&&x((function(e){return[].concat(Object(pe.a)(e),[N])}))}),[N,o]),Object(s.useEffect)((function(){K.on("getUsers",(function(e){console.log("getUser received on client side"),S(q.chatFollow.filter((function(t){return e.some((function(e){return e.userId===t}))})))}))}),[q,K]),Object(s.useEffect)((function(){(function(){var e=Object($.a)(Y.a.mark((function e(){var t;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,X.a.get("/api/conversations/"+q._id);case 3:return t=e.sent,e.next=6,n(t.data);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}})()()}),[q._id,b,C]),Object(s.useEffect)((function(){(function(){var e=Object($.a)(Y.a.mark((function e(){var t;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,X.a.get("/api/messages/"+(null===o||void 0===o?void 0:o._id));case 3:t=e.sent,x(t.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}})()()}),[o]),Object(s.useEffect)((function(){var e=null===o||void 0===o?void 0:o.members.find((function(e){return e!==q._id}));(function(){var t=Object($.a)(Y.a.mark((function t(){var a;return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,X()("/api/users?userId="+e);case 3:return a=t.sent,t.next=6,F(a.data);case 6:t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}})()()}),[q,o]),Object(s.useEffect)((function(){var e=function(){var e=Object($.a)(Y.a.mark((function e(){var t,a,s;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="",e.prev=1,e.next=4,X()("/api/users?userId="+(null===E||void 0===E?void 0:E._id));case 4:a=e.sent,s=a.data.lastActive,console.log("newLastActive: ",s),t=Object(Ze.a)(s),console.log("LOOK AT ME: TIMEAGO ",t),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),t=Object(Ze.a)(null===E||void 0===E?void 0:E.lastActive),console.log(e.t0);case 15:M("Active "+t);case 16:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(){return e.apply(this,arguments)}}();e();var t=setInterval((function(){e()}),5e3);return function(){return clearInterval(t)}}),[E]);var Q=function(){var e=Object($.a)(Y.a.mark((function e(t){var a,s,n,c,r,i;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===g){e.next=26;break}return t.preventDefault(),e.next=4,v("");case 4:return a={sender:q._id,text:g,conversationId:o._id},e.prev=5,e.next=8,X.a.post("/api/messages",a);case 8:return s=e.sent,n=s.data.text,c=s.data.createdAt,e.next=13,X.a.put("/api/conversations/"+o._id+"/lastmessage",{lastMessageText:n,lastMessageTime:c});case 13:return r=e.sent,console.log(r),console.log("currentChat is: ",o),e.next=18,x([].concat(Object(pe.a)(b),[s.data]));case 18:console.log("updated messages. the new messaged sent is: ",s.data.text),i=o.members.find((function(e){return e!==q._id})),K.emit("sendMessage",{senderId:q._id,receiverId:i,text:g}),e.next=26;break;case 23:e.prev=23,e.t0=e.catch(5),console.log(e.t0);case 26:case"end":return e.stop()}}),e,null,[[5,23]])})));return function(t){return e.apply(this,arguments)}}(),Z=function(){var e=Object($.a)(Y.a.mark((function e(){var t;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("generate agreement is clicked"),e.next=3,X.a.post("/api/agreements");case 3:(t=e.sent).data&&t.data._id&&v("Your agreement code has been generated: "+t.data._id);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(s.useEffect)((function(){var e;null===(e=z.current)||void 0===e||e.scrollIntoView({behavior:"auto"})}),[b]),Object(m.jsxs)("div",{children:[Object(m.jsx)(p,{currentUser:q}),Object(m.jsxs)("div",{className:"messenger",children:[Object(m.jsx)("div",{className:"chatMenu",children:Object(m.jsxs)("div",{className:"chatMenuWrapper",children:[Object(m.jsx)("input",{placeholder:"Search for users",className:"chatMenuInput",onChange:function(e){return R(e.target.value)},value:B}),a.map((function(e){var t=e.members.find((function(e){return e!==q._id}));return Object(m.jsx)("div",{onClick:function(){return l(e)},children:Object(m.jsx)(et,{online:C.includes(t),lastMessageText:e.lastMessageText,lastMessageTime:e.lastMessageTime,userId:t,active:!!o&&e._id===o._id})})}))]})}),Object(m.jsx)("div",{className:"chatBox",children:Object(m.jsx)("div",{className:"chatBoxWrapper",children:o?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("div",{className:"chatBoxHeader",children:[Object(m.jsxs)("div",{className:"chatBoxHeaderLeft",children:[Object(m.jsx)("img",{src:(null===E||void 0===E?void 0:E.profilePicture)?G+E.profilePicture:G+"person/noAvatar.png",alt:"",className:"chatBoxHeaderImg"}),Object(m.jsxs)("div",{className:"chatBoxHeaderContent",children:[Object(m.jsx)("div",{className:"chatBoxHeaderName",children:null===E||void 0===E?void 0:E.username}),Object(m.jsx)("div",{className:"chatBoxHeaderStatus",children:C.includes(null===E||void 0===E?void 0:E._id)?"Online now":D})]})]}),Object(m.jsx)("button",{className:"chatBoxViewProfileButton",onClick:function(){J.push("/profile/"+E.username+"/listings")},children:"View Profile"})]}),Object(m.jsx)("div",{className:"chatBoxTop",children:b.map((function(e){return Object(m.jsx)("div",{ref:z,children:Object(m.jsx)(tt,{message:e,own:e.sender===q._id,pictureLink:e.sender===q._id?(null===q||void 0===q?void 0:q.profilePicture)?G+q.profilePicture:G+"person/noAvatar.png":(null===E||void 0===E?void 0:E.profilePicture)?G+E.profilePicture:G+"person/noAvatar.png"})})}))}),Object(m.jsxs)("div",{className:"chatBoxBottom",children:[Object(m.jsx)("textarea",{className:"chatMessageInput",placeholder:"Write a message ...",onChange:function(e){return v(e.target.value)},value:g,onKeyDown:function(e){"Enter"===e.key&&(e.preventDefault(),console.log("new message when eneter is pressed: ",g),v(g),""!==g&&(Q(e),console.log("passing to handleSendMessage")))}}),Object(m.jsx)("button",{className:"chatAgreementButton",onClick:Z,children:"Generate Agreement"}),Object(m.jsx)("button",{className:"chatSubmitButton",onClick:Q,children:"Send"})]})]}):Object(m.jsxs)("span",{className:"noConversationText",children:["Open a conversation to start a chat ",K.id]})})})]})]})}a(298);function st(){var e=Object(s.useContext)(V),t=e.user,a=e.sockio,n=e.dispatch,c=(Object(u.h)().username,Object(s.useState)(null)),r=Object(i.a)(c,2),o=r[0],l=r[1],j=Object(s.useState)({showPassword:!1}),d=Object(i.a)(j,2),b=d[0],g=d[1],v=Object(s.useState)({}),f=Object(i.a)(v,2),w=f[0],N=f[1],y=Object(s.useState)({}),k=Object(i.a)(y,2),I=k[0],C=k[1],S=Object(s.useState)(!1),T=Object(i.a)(S,2),P=T[0],B=T[1];Object(s.useEffect)((function(){console.log("user is changed"),console.log(t)}),[t]);Object(s.useEffect)((function(){return function(){o&&URL.revokeObjectURL(o.preview)}}),[o]);var R=function(){var e=Object($.a)(Y.a.mark((function e(s){var c,r;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s.preventDefault(),o){e.next=5;break}C({imgFile:"No image uploaded!"}),e.next=12;break;case 5:return(c=new FormData).append("file",o),console.log(c),r=function(){var e=Object($.a)(Y.a.mark((function e(){var s,r,i;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,X.a.post("/api/upload/person",c);case 3:if(200!==(s=e.sent).status){e.next=12;break}return r={profilePicture:s.data.imagePath},i=Object(ve.a)(Object(ve.a)({},t),r),console.log(i),e.next=10,X.a.put("/api/users/"+t._id,{profilePicture:s.data.imagePath});case 10:200===e.sent.status&&n({type:"UPDATE",payload:{user:i,sock:a}});case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}(),e.next=11,r();case 11:l(null);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=function(e,t){g(Object(ve.a)(Object(ve.a)({},b),{},Object(ge.a)({},e,t))),w[e]&&N(Object(ve.a)(Object(ve.a)({},w),{},Object(ge.a)({},e,null))),P&&B(!1)},A=function(){var e=Object($.a)(Y.a.mark((function e(a){var s,n;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),B(!1),s=E(),!(Object.keys(s).length>0)){e.next=8;break}N(s),console.log(s),e.next=11;break;case 8:return n=function(){var e=Object($.a)(Y.a.mark((function e(){var a,s;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,X.a.put("/api/auth/updatePassword/"+t._id,{currentPassword:b.currentPassword,newPassword:b.newPassword});case 3:(a=e.sent)&&200===a.status&&"User password has been updated"===a.data.message?(B(!0),g({showPassword:!1,confirmPassword:"",newPassword:"",currentPassword:""})):a&&200===a.status&&"wrong password"===a.data.message&&(s={currentPassword:"Wrong Password!"},N(Object(ve.a)(Object(ve.a)({},w),s))),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),e.next=11,n();case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=b.currentPassword,t=b.newPassword,a=b.confirmPassword,s={};return e&&""!==e||(s.currentPassword="Current password cannot be empty!"),(!t||t.length<6)&&(s.newPassword="New password must have at least 6 characters!"),a&&a===t||(s.confirmPassword="New and confirm passwords do not match!"),s};return Object(m.jsxs)("div",{children:[Object(m.jsx)(p,{currentUser:t}),Object(m.jsxs)("div",{className:"settingsContainer",children:[Object(m.jsx)(re,{sidebarUser:t}),Object(m.jsx)("span",{className:"settingsHeader",children:"Settings"}),Object(m.jsxs)(Z.a,{className:"settingsWrapper",children:[Object(m.jsxs)(_.a,{style:{width:"60em",height:"19em"},className:"settingsUserProfileContainer shadow p-3 mb-5 bg-white rounded",children:[Object(m.jsx)("span",{className:"settingsUserProfileHeader",children:"User Profile"}),Object(m.jsx)(Z.a,{children:Object(m.jsxs)(h.a,{children:[Object(m.jsx)(O.a,{children:Object(m.jsx)("img",{src:o&&o.preview?o.preview:t&&t.profilePicture?"http://localhost:8080/images/"+t.profilePicture:"/assests/userProfile.png",alt:"",className:"userProfileImg"})}),Object(m.jsx)(O.a,{children:Object(m.jsxs)("div",{className:"settingsImgInstructions",children:[Object(m.jsx)("div",{className:"settingsImgInstructionsText",children:"Upload a profile picture of yourself to help others know more about you!"}),Object(m.jsxs)(we.a.Group,{children:[Object(m.jsx)(we.a.Control,{className:"imgUploadButton",as:"input",name:"image-upload",type:"file",accept:"image/*",onChange:function(e){var t=Object.assign(e.target.files[0],{preview:URL.createObjectURL(e.target.files[0])});l(t),t&&I.imgFile&&C({imgFile:null}),console.log(t.preview)},isInvalid:!!I.imgFile}),Object(m.jsx)(we.a.Control.Feedback,{type:"invalid",children:I.imgFile})]}),Object(m.jsx)(x.a,{className:"changeProfilePictureButton",variant:"warning",onClick:R,children:"Change profile picture"})]})})]})})]}),Object(m.jsxs)(_.a,{style:{width:"60em"},className:"settingsPasswordContainer shadow p-3 mb-5 bg-white rounded",children:[Object(m.jsx)("span",{className:"settingsPasswordHeader",children:"Password"}),Object(m.jsxs)(we.a,{children:[Object(m.jsxs)("div",{className:"passwordInputWrapper",children:[Object(m.jsxs)(we.a.Group,{controlId:"oldPassword",children:[Object(m.jsx)(we.a.Control,{className:"passwordInput",name:"currentPassword",type:b.showPassword?"text":"password",placeHolder:"Current Password",value:b.currentPassword,onChange:function(e){return L("currentPassword",e.target.value)},isInvalid:!!w.currentPassword,isValid:P}),Object(m.jsx)(we.a.Control.Feedback,{type:"invalid",children:w.currentPassword})]}),Object(m.jsxs)(we.a.Group,{controlId:"newPassword",children:[Object(m.jsx)(we.a.Control,{className:"passwordInput",name:"newPassword",type:b.showPassword?"text":"password",placeHolder:"New Password",value:b.newPassword,onChange:function(e){return L("newPassword",e.target.value)},isInvalid:!!w.newPassword,isValid:P}),Object(m.jsx)(we.a.Control.Feedback,{type:"invalid",children:w.newPassword})]}),Object(m.jsxs)(we.a.Group,{controlId:"confirmPassword",children:[Object(m.jsx)(we.a.Control,{className:"passwordInput",name:"confirmPassword",type:b.showPassword?"text":"password",placeHolder:"Confirm Password",value:b.confirmPassword,onChange:function(e){return L("confirmPassword",e.target.value)},isInvalid:!!w.confirmPassword,isValid:P}),Object(m.jsx)(we.a.Control.Feedback,{type:"invalid",children:w.confirmPassword}),Object(m.jsx)(we.a.Control.Feedback,{type:"valid",children:'"Password updated successfully"'})]})]}),Object(m.jsxs)("div",{children:[Object(m.jsx)("input",{type:"checkbox",checked:b.showPassword,onClick:function(){return L("showPassword",!b.showPassword)}}),Object(m.jsx)("label",{className:"checkboxLabel",children:"Show input"})]}),Object(m.jsx)("div",{children:Object(m.jsx)(x.a,{className:"passwordButton",variant:"warning",onClick:A,children:"Update password"})})]})]})]})]})]})}var nt=function(){var e=Object(s.useContext)(V).user;return Object(m.jsx)(b.a,{children:Object(m.jsxs)(u.d,{children:[Object(m.jsx)(u.b,{exact:!0,path:"/",children:e?Object(m.jsx)(u.a,{to:"/home"}):Object(m.jsx)(Xe,{})}),Object(m.jsx)(u.b,{path:"/register",children:e?Object(m.jsx)(u.a,{to:"/home"}):Object(m.jsx)(Xe,{})}),Object(m.jsx)(u.b,{exact:!0,path:"/product/:pageType/:categoryName",children:Object(m.jsx)(he,{})}),Object(m.jsx)(u.b,{exact:!0,path:"/home",children:Object(m.jsx)(K,{})}),Object(m.jsx)(u.b,{exact:!0,path:"/create",children:e?Object(m.jsx)(Le,{}):Object(m.jsx)(Xe,{})}),Object(m.jsx)(u.b,{exact:!0,path:"/chat/:initialActiveConvoId",children:e?Object(m.jsx)(at,{}):Object(m.jsx)(Xe,{})}),Object(m.jsx)(u.b,{exact:!0,path:"/profile/:username/listings",children:Object(m.jsx)(me,{})}),Object(m.jsx)(u.b,{exact:!0,path:"/profile/:username/reviews",children:Object(m.jsx)(xe,{})}),Object(m.jsx)(u.b,{exact:!0,path:"/profile/:username/settings",children:Object(m.jsx)(st,{})}),Object(m.jsx)(u.b,{exact:!0,path:"/items/:itemId",children:Object(m.jsx)(We,{})})]})})},ct=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,381)).then((function(t){var a=t.getCLS,s=t.getFID,n=t.getFCP,c=t.getLCP,r=t.getTTFB;a(e),s(e),n(e),c(e),r(e)}))};r.a.render(Object(m.jsx)(n.a.StrictMode,{children:Object(m.jsx)(q,{children:Object(m.jsx)(nt,{})})}),document.getElementById("root")),ct()}},[[299,1,2]]]);
//# sourceMappingURL=main.0b6c7d93.chunk.js.map