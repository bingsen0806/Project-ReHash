(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{265:function(e,t,a){},266:function(e,t,a){},268:function(e,t,a){},269:function(e,t,a){},295:function(e,t,a){},308:function(e,t,a){},309:function(e,t,a){},310:function(e,t,a){},311:function(e,t,a){},339:function(e,t,a){},340:function(e,t,a){},341:function(e,t,a){},342:function(e,t,a){},343:function(e,t,a){},358:function(e,t,a){},359:function(e,t,a){},361:function(e,t,a){},362:function(e,t,a){},363:function(e,t,a){},369:function(e,t,a){},370:function(e,t,a){},371:function(e,t,a){},372:function(e,t,a){},373:function(e,t,a){},374:function(e,t,a){},375:function(e,t,a){},376:function(e,t,a){},377:function(e,t,a){},378:function(e,t,a){},379:function(e,t,a){},380:function(e,t,a){},381:function(e,t,a){},382:function(e,t,a){},383:function(e,t,a){},384:function(e,t,a){},385:function(e,t,a){"use strict";a.r(t);var s=a(0),n=a.n(s),c=a(28),r=a.n(c),i=(a(265),a(266),a(7)),o=a.n(i),l=a(11),u=a(9),d=a(461),j=a(460),p=a(430),b=a(251),m=(a(268),a(188),a(428)),h=a(429),x=a(33),g=a(22),O=a(221),v=a.n(O),f=(a(269),a(219)),N=a(122),w=a(2);function k(e){var t,a=e.notification,s=e.handleAccept,n=e.handleDeny;return Object(w.jsxs)("div",{className:"notiWrapper",children:[Object(w.jsxs)("div",{className:"notiContainer",children:[Object(w.jsx)("span",{className:"notiContainerUsername",children:a?(t=a.senderName,(null===t||void 0===t?void 0:t.length)&&1===t.length?t[0]:(null===t||void 0===t?void 0:t.length)&&2===t.length?t[0]+" and 1 other":(null===t||void 0===t?void 0:t.length)?t[0]+" and "+(t.length-1).toString()+" others":"No Name"):"username"})," ","has invited you to join"," ",Object(w.jsx)("span",{className:"notiContainerGroupName",children:a?a.invitationName:"group name"}),"."]}),Object(w.jsxs)(f.a,{className:"notibuttonGroupWrapper",children:[Object(w.jsx)(N.a,{children:Object(w.jsx)("div",{className:"acceptButtonWrapper",onClick:function(){s(a)},children:Object(w.jsx)("div",{className:"acceptButton",children:Object(w.jsx)("span",{className:"acceptButtonText",children:"Accept"})})})}),Object(w.jsx)(N.a,{children:Object(w.jsx)("div",{className:"denyButtonWrapper",onClick:function(){return n(a)},children:Object(w.jsx)("div",{className:"denyButton",children:Object(w.jsx)("span",{className:"denyButtonText",children:"Deny"})})})})]})]})}var I=a(10),y=a.n(I);function C(e){var t=e.currentUser,a=e.handleUpdateGroup,n=Object(x.g)(),c=Object(s.useState)(""),r=Object(u.a)(c,2),i=r[0],O=r[1],f=Object(s.useState)([]),N=Object(u.a)(f,2),I=N[0],C=N[1],S=Object(s.useState)("item"),P=Object(u.a)(S,2),_=P[0],T=P[1];Object(s.useEffect)((function(){(function(){var e=Object(l.a)(o.a.mark((function e(){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=11;break}return e.prev=1,e.next=4,y.a.get("/api/notifications/filter?userId="+t._id);case 4:200===(a=e.sent).status&&C(a.data),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}})()()}),[t]);var U=Object(w.jsx)(v.a,{className:"userNotificationIcon",htmlColor:"orange"}),L=function(){var e=Object(l.a)(o.a.mark((function e(s){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!s||!t){e.next=15;break}return e.prev=1,e.next=4,y.a.delete("/api/notifications?notificationId="+s._id);case 4:return 200===e.sent.status&&C(I.filter((function(e){return e.invitationId!==s.invitationId}))),e.next=8,y.a.put("/api/groups/"+s.invitationId+"/addMember/"+t._id);case 8:200===(n=e.sent).status&&a&&a([n.data]),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=Object(l.a)(o.a.mark((function e(a){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a||!t){e.next=11;break}return e.prev=1,e.next=4,y.a.delete("/api/notifications?notificationId="+a._id);case 4:200===e.sent.status&&C(I.filter((function(e){return e._id!==a._id}))),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(w.jsxs)(d.a,{className:"topbarWrapper fixed-top",expand:"lg",children:[Object(w.jsxs)(d.a.Brand,{onClick:function(){n.push("/home")},children:[Object(w.jsx)("img",{className:"ReHashLogo",src:"https://firebasestorage.googleapis.com/v0/b/projectrehash-e91c0.appspot.com/o/utils%2FReHashLogo.png?alt=media&token=bc74eadb-df39-4714-bebd-6a36d46d3193",alt:""}),Object(w.jsx)("span",{className:"logoText",children:"ReHash"})]}),Object(w.jsx)(d.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(w.jsx)(d.a.Collapse,{id:"basic-navbar-nav",className:"collapseBar",children:Object(w.jsxs)(j.a,{className:"mr-auto",children:[Object(w.jsx)(j.a.Link,{className:"swap",onClick:function(){n.push("/create")},children:"Post A Swap!"}),Object(w.jsxs)("div",{className:"searchbar",children:[Object(w.jsx)(m.a,{className:"searchIcon"}),Object(w.jsx)("input",{placeholder:"Enter at least 3 characters to search...",className:"searchInput",value:i,onChange:function(e){return O(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&(e.preventDefault(),(i.match(/^\s*\n*\t*$/)||[]).length>0||i.length<3?(console.log("search string is empty or too short!"),O("")):"item"===_?n.push("/product/search/"+i):"group"===_&&n.push("/groups/search/"+i))}}),Object(w.jsxs)("select",{name:"choice",className:"searchInputSelect",value:_,onChange:function(e){return T(e.target.value)},children:[Object(w.jsx)("option",{value:"item",selected:!0,children:"item"}),Object(w.jsx)("option",{value:"group",children:"group"})]})]}),Object(w.jsx)(g.b,{to:"/chat/0",children:Object(w.jsx)(h.a,{className:"chat",htmlColor:"orange"})}),Object(w.jsxs)(p.a,{className:"userNotification",variant:"warning",title:U,children:[Object(w.jsx)("div",{className:"userNotificationLabel",children:"Notifications"}),Object(w.jsx)("div",{className:"userNotificationList",children:I.length>0?I.map((function(e){return Object(w.jsx)(b.a.Item,{children:Object(w.jsx)(k,{notification:e,handleAccept:L,handleDeny:D})},e._id)})):Object(w.jsx)("div",{className:"userNoNotificationsLabel",children:"No notifcations"})})]}),Object(w.jsx)(g.b,{to:t?"/profile/"+t.username+"/listings":"/",children:Object(w.jsx)("img",{className:"userProfilePic",src:t&&t.profilePicture?"https://firebasestorage.googleapis.com/v0/b/projectrehash-e91c0.appspot.com/o/"+t.profilePicture:"https://firebasestorage.googleapis.com/v0/b/projectrehash-e91c0.appspot.com/o/utils%2FnoAvatar.png?alt=media&token=e42cd680-8605-49a8-a125-1dc70a68beb4",alt:"userProfile"})})]})})]})}var S=a(226),P=a(431),_=a(432),T=a(433),U=a(434),L=a(435),D=a(436),E=a(437),R=a(438),B=(a(295),a(109)),F=a.n(B);a(130);function A(){var e=Object(x.g)(),t=function(t){e.push("/product/categories/"+t)};return Object(w.jsxs)(F.a,{responsive:{superLargeDesktop:{breakpoint:{max:4e3,min:3e3},items:8},xl:{breakpoint:{max:3e3,min:1200},items:6},lg:{breakpoint:{max:1200,min:992},items:5},md:{breakpoint:{max:992,min:768},items:4},sm:{breakpoint:{max:768,min:576},items:3},xs:{breakpoint:{max:576,min:0},items:2}},children:[Object(w.jsx)("div",{className:"item",onClick:function(){return t("clothing")},children:Object(w.jsx)("div",{className:"button",children:Object(w.jsx)(S.a,{className:"itemButton",children:Object(w.jsxs)(N.a,{children:[Object(w.jsx)(f.a,{children:Object(w.jsx)(P.a,{className:"itemIcon"})}),Object(w.jsx)(f.a,{children:Object(w.jsx)("span",{className:"itemText text-center",children:"Clothing"})})]})})})}),Object(w.jsx)("div",{className:"item",onClick:function(){return t("beauty")},children:Object(w.jsx)("div",{className:"button",children:Object(w.jsx)(S.a,{className:"itemButton",children:Object(w.jsxs)(N.a,{children:[Object(w.jsx)(f.a,{children:Object(w.jsx)(_.a,{className:"itemIcon"})}),Object(w.jsx)(f.a,{children:Object(w.jsx)("span",{className:"itemText text-center",children:"Beauty"})})]})})})}),Object(w.jsx)("div",{className:"item",onClick:function(){return t("sports equipments")},children:Object(w.jsx)("div",{className:"button",children:Object(w.jsx)(S.a,{className:"itemButton",children:Object(w.jsxs)(N.a,{children:[Object(w.jsx)(f.a,{children:Object(w.jsx)(T.a,{className:"itemIcon"})}),Object(w.jsx)(f.a,{children:Object(w.jsx)("span",{className:"itemText text-center",children:"Sports Equipments"})})]})})})}),Object(w.jsx)("div",{className:"item",onClick:function(){return t("home appliances")},children:Object(w.jsx)("div",{className:"button",children:Object(w.jsx)(S.a,{className:"itemButton",children:Object(w.jsxs)(N.a,{children:[Object(w.jsx)(f.a,{children:Object(w.jsx)(U.a,{className:"itemIcon"})}),Object(w.jsx)(f.a,{children:Object(w.jsx)("span",{className:"itemText text-center",children:"Home Appliances"})})]})})})}),Object(w.jsx)("div",{className:"item",onClick:function(){return t("automotive")},children:Object(w.jsx)("div",{className:"button",children:Object(w.jsx)(S.a,{className:"itemButton",children:Object(w.jsxs)(N.a,{children:[Object(w.jsx)(f.a,{children:Object(w.jsx)(L.a,{className:"itemIcon"})}),Object(w.jsx)(f.a,{children:Object(w.jsx)("span",{className:"itemText text-center",children:"Automotive"})})]})})})}),Object(w.jsx)("div",{className:"item",onClick:function(){return t("hobbies")},children:Object(w.jsx)("div",{className:"button",children:Object(w.jsx)(S.a,{className:"itemButton",children:Object(w.jsxs)(N.a,{children:[Object(w.jsx)(f.a,{children:Object(w.jsx)(D.a,{className:"itemIcon"})}),Object(w.jsx)(f.a,{children:Object(w.jsx)("span",{className:"itemText text-center",children:"Hobbies"})})]})})})}),Object(w.jsx)("div",{className:"item",onClick:function(){return t("computers and tech")},children:Object(w.jsx)("div",{className:"button",children:Object(w.jsx)(S.a,{className:"itemButton",children:Object(w.jsxs)(N.a,{children:[Object(w.jsx)(f.a,{children:Object(w.jsx)(E.a,{className:"itemIcon"})}),Object(w.jsx)(f.a,{children:Object(w.jsx)("span",{className:"itemText text-center",children:"Computers & Tech"})})]})})})}),Object(w.jsx)("div",{className:"item",onClick:function(){return t("other tangibles")},children:Object(w.jsx)("div",{className:"button",children:Object(w.jsx)(S.a,{className:"itemButton",children:Object(w.jsxs)(N.a,{children:[Object(w.jsx)(f.a,{children:Object(w.jsx)(R.a,{className:"itemIcon"})}),Object(w.jsx)(f.a,{children:Object(w.jsx)("span",{className:"itemText text-center",children:"Others"})})]})})})})]})}a(308),a(309);var M=a(439),G=a(440),W=a(441),H=a(442),z=a(443),J=a(444),q=a(445);function K(){var e=Object(x.g)(),t=function(t){e.push("/product/categories/"+t)};return Object(w.jsxs)(F.a,{responsive:{superLargeDesktop:{breakpoint:{max:4e3,min:3e3},items:8},xl:{breakpoint:{max:3e3,min:1200},items:6},lg:{breakpoint:{max:1200,min:992},items:5},md:{breakpoint:{max:992,min:768},items:4},sm:{breakpoint:{max:768,min:576},items:3},xs:{breakpoint:{max:576,min:0},items:2}},children:[Object(w.jsx)("div",{className:"item",onClick:function(){return t("outdoor activities")},children:Object(w.jsx)("div",{className:"button",children:Object(w.jsx)(S.a,{className:"itemButton",children:Object(w.jsxs)(N.a,{children:[Object(w.jsx)(f.a,{children:Object(w.jsx)(M.a,{className:"itemIcon"})}),Object(w.jsx)(f.a,{children:Object(w.jsx)("span",{className:"itemText text-center",children:"Outdoor Activities"})})]})})})}),Object(w.jsx)("div",{className:"item",onClick:function(){return t("travel")},children:Object(w.jsx)("div",{className:"button",children:Object(w.jsx)(S.a,{className:"itemButton",children:Object(w.jsxs)(N.a,{children:[Object(w.jsx)(f.a,{children:Object(w.jsx)(G.a,{className:"itemIcon"})}),Object(w.jsx)(f.a,{children:Object(w.jsx)("span",{className:"itemText text-center",children:"Travel"})})]})})})}),Object(w.jsx)("div",{className:"item",onClick:function(){return t("discussion")},children:Object(w.jsx)("div",{className:"button",children:Object(w.jsx)(S.a,{className:"itemButton",children:Object(w.jsxs)(N.a,{children:[Object(w.jsx)(f.a,{children:Object(w.jsx)(W.a,{className:"itemIcon"})}),Object(w.jsx)(f.a,{children:Object(w.jsx)("span",{className:"itemText text-center",children:"Discussion"})})]})})})}),Object(w.jsx)("div",{className:"item",onClick:function(){return t("food")},children:Object(w.jsx)("div",{className:"button",children:Object(w.jsx)(S.a,{className:"itemButton",children:Object(w.jsxs)(N.a,{children:[Object(w.jsx)(f.a,{children:Object(w.jsx)(H.a,{className:"itemIcon"})}),Object(w.jsx)(f.a,{children:Object(w.jsx)("span",{className:"itemText text-center",children:"Food"})})]})})})}),Object(w.jsx)("div",{className:"item",onClick:function(){return t("indoor activities")},children:Object(w.jsx)("div",{className:"button",children:Object(w.jsx)(S.a,{className:"itemButton",children:Object(w.jsxs)(N.a,{children:[Object(w.jsx)(f.a,{children:Object(w.jsx)(z.a,{className:"itemIcon"})}),Object(w.jsx)(f.a,{children:Object(w.jsx)("span",{className:"itemText text-center",children:"Indoor Activities"})})]})})})}),Object(w.jsx)("div",{className:"item",onClick:function(){return t("sports")},children:Object(w.jsx)("div",{className:"button",children:Object(w.jsx)(S.a,{className:"itemButton",children:Object(w.jsxs)(N.a,{children:[Object(w.jsx)(f.a,{children:Object(w.jsx)(J.a,{className:"itemIcon"})}),Object(w.jsx)(f.a,{children:Object(w.jsx)("span",{className:"itemText text-center",children:"Sports"})})]})})})}),Object(w.jsx)("div",{className:"item",onClick:function(){return t("games and esports")},children:Object(w.jsx)("div",{className:"button",children:Object(w.jsx)(S.a,{className:"itemButton",children:Object(w.jsxs)(N.a,{children:[Object(w.jsx)(f.a,{children:Object(w.jsx)(q.a,{className:"itemIcon"})}),Object(w.jsx)(f.a,{children:Object(w.jsx)("span",{className:"itemText text-center",children:"Games & Esports"})})]})})})}),Object(w.jsx)("div",{className:"item",onClick:function(){return t("other intangibles")},children:Object(w.jsx)("div",{className:"button",children:Object(w.jsx)(S.a,{className:"itemButton",children:Object(w.jsxs)(N.a,{children:[Object(w.jsx)(f.a,{children:Object(w.jsx)(R.a,{className:"itemIcon"})}),Object(w.jsx)(f.a,{children:Object(w.jsx)("span",{className:"itemText text-center",children:"Others"})})]})})})})]})}var $=a(463),Y=(a(310),a(464));a(311);var V=a(182);function Z(e){var t=e.itemArray,a=Object(x.g)(),s=function(e){return Object(w.jsx)("img",{className:"adsPics d-block",src:(null===e||void 0===e?void 0:e.img)&&e.img.length>0?"https://firebasestorage.googleapis.com/v0/b/projectrehash-e91c0.appspot.com/o/"+e.img[0]:"https://firebasestorage.googleapis.com/v0/b/projectrehash-e91c0.appspot.com/o/utils%2FnoImageUploaded.png?alt=media&token=14da969b-3ca4-4a37-9f4c-16bed3c98a7e",alt:"cannot display"})};return Object(w.jsx)("div",{style:{width:"35%",outline:"none"},children:Object(w.jsxs)(V.a,{className:"adsWrapper",children:[Object(w.jsx)(V.a.Item,{interval:3e3,children:Object(w.jsx)("img",{className:"adsPics d-block",src:"https://firebasestorage.googleapis.com/v0/b/projectrehash-e91c0.appspot.com/o/utils%2Ftrending.jpg?alt=media&token=d9f53d99-a931-4e7b-8d1b-ffaed76bcde7",alt:"First slide"})}),t.map((function(e){return Object(w.jsx)(V.a.Item,{interval:3e3,onClick:function(){a.push("/items/"+e._id)},children:s(e)},e._id)}))]})})}var Q=function(e,t){switch(t.type){case"LOGIN_START":return{user:null,isFetching:!0,error:!1,sockio:null};case"LOGIN_SUCCESS":return{user:t.payload.user,isFetching:!1,error:!1,sockio:t.payload.sock};case"LOGIN_FAILURE":return{user:null,isFetching:!1,error:t.payload,sockio:null};case"LOGOUT_START":return{user:t.payload.user,isFetching:!0,error:!1,sockio:t.payload.sock};case"LOGOUT_SUCCESS":return{user:null,isFetching:!1,error:!1,sockio:null};case"LOGOUT_FAILURE":return{user:null,isFetching:!1,error:t.payload,sockio:null};case"UPDATE":return{user:t.payload.user,isFetching:!1,error:!1,sockio:t.payload.sock};default:return e}},X=a(159),ee={user:JSON.parse(localStorage.getItem("rehashUser"))||null,isFetching:!1,error:!1,sockio:JSON.parse(localStorage.getItem("rehashSockio"))||null},te=Object(s.createContext)(ee),ae=function(e){var t=e.children,a=Object(s.useReducer)(Q,ee),n=Object(u.a)(a,2),c=n[0],r=n[1];return Object(s.useEffect)((function(){(function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("state user is changed!"),localStorage.setItem("rehashUser",JSON.stringify(c.user)),!c.user){e.next=14;break}return console.log("state.user is true"),e.prev=4,e.next=7,Object(X.io)();case 7:(t=e.sent).on("connect",(function(){t.emit("addUser",c.user._id),console.log("sock inside try block: ",t),r({type:"LOGIN_SUCCESS",payload:{user:c.user,sock:t}})})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(){return e.apply(this,arguments)}})()()}),[c.user]),Object(w.jsx)(te.Provider,{value:{user:c.user,isFetching:c.isFetching,error:c.error,sockio:c.sockio,dispatch:r},children:t})};a(339),a(340);function se(e){var t=e.groupImg,a=e.groupName,n=e.groupId,c=e.create,r=Object(s.useContext)(te),i=r.user,d=(r.sockio,Object(s.useState)("")),j=Object(u.a)(d,2),p=j[0],b=j[1],m=Object(x.g)(),h=function(){var e=Object(l.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((p.match(/^\s*\n*\t*$/)||[]).length>0)){e.next=5;break}console.log("newGroupName is empty!"),b(""),e.next=17;break;case 5:if(!i){e.next=17;break}return e.prev=6,t={creatorId:i._id,members:[i._id],description:"No description yet. Waiting for group creator to update description.",groupName:p},e.next=10,y.a.post("/api/groups",t);case 10:200===(a=e.sent).status&&(b(""),m.push("/groups/"+a.data._id+"/main")),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(6),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[6,14]])})));return function(){return e.apply(this,arguments)}}();return c?Object(w.jsxs)("div",{className:"groupIconButtonBackgroundCreate",children:[Object(w.jsx)("img",{className:"groupIconButtonImg",src:"https://firebasestorage.googleapis.com/v0/b/projectrehash-e91c0.appspot.com/o/utils%2Fadd.jpg?alt=media&token=b5df608c-c140-4c83-a823-d9ae1272a4fa",onClick:h,alt:""}),Object(w.jsx)("textarea",{rows:3,maxlength:"50",className:"groupIconTextArea",placeholder:"Enter new group name (max 50 characters) and click '+'",value:p,onChange:function(e){e.target.value.length<=50&&b(e.target.value)}})]}):Object(w.jsxs)("div",{className:"groupIconButtonBackground",onClick:function(){n&&m.push("/groups/"+n+"/main")},children:[Object(w.jsx)("img",{className:"groupIconButtonImg",src:t?"https://firebasestorage.googleapis.com/v0/b/projectrehash-e91c0.appspot.com/o/"+t:"https://firebasestorage.googleapis.com/v0/b/projectrehash-e91c0.appspot.com/o/utils%2FnoImageUploaded.png?alt=media&token=14da969b-3ca4-4a37-9f4c-16bed3c98a7e",alt:""}),Object(w.jsx)("div",{className:"groupIconButtonName",children:a||"No Group Name"})]})}function ne(e){var t=e.recommendedGroups;return t&&t.length>0?Object(w.jsx)(F.a,{responsive:{superLargeDesktop:{breakpoint:{max:4e3,min:3e3},items:8},xl:{breakpoint:{max:3e3,min:1200},items:6},lg:{breakpoint:{max:1200,min:992},items:5},md:{breakpoint:{max:992,min:800},items:4},sm:{breakpoint:{max:800,min:620},items:3},xs:{breakpoint:{max:620,min:0},items:2}},children:t.map((function(e){return Object(w.jsx)(se,{groupName:e.groupName,groupImg:e.groupImg,groupId:e._id},e._id)}))}):Object(w.jsx)("div",{children:"No recommended groups."})}function ce(){var e=Object(s.useContext)(te),t=e.user,a=e.sockio,n=Object(s.useState)([]),c=Object(u.a)(n,2),r=c[0],i=c[1],d=Object(s.useState)([]),j=Object(u.a)(d,2),p=j[0],b=j[1];return Object(s.useEffect)((function(){console.log("socket is: ",null===a||void 0===a?void 0:a.id),console.log("user is: ",t)}),[a,t]),Object(s.useEffect)((function(){(function(){var e=Object(l.a)(o.a.mark((function e(){var a,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t){e.next=8;break}return e.next=4,y.a.get("/api/groups/recommended/"+t._id);case 4:200===(a=e.sent).status&&i(a.data),e.next=12;break;case 8:return e.next=10,y.a.get("/api/groups/recommended/0");case 10:200===(s=e.sent).status&&i(s.data);case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}})()()}),[t]),Object(s.useEffect)((function(){(function(){var e=Object(l.a)(o.a.mark((function e(){var a,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t){e.next=8;break}return e.next=4,y.a.get("/api/items/trendingSwaps?userId="+t._id);case 4:200===(a=e.sent).status&&b(a.data),e.next=12;break;case 8:return e.next=10,y.a.get("/api/items/trendingSwaps");case 10:200===(s=e.sent).status&&b(s.data);case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}})()()}),[t]),Object(w.jsxs)("div",{children:[Object(w.jsx)(C,{currentUser:t}),Object(w.jsx)("div",{className:"adContainer",children:Object(w.jsx)(Z,{itemArray:p})}),Object(w.jsxs)("div",{className:"homeWrapper",children:[Object(w.jsxs)("div",{className:"tangible",children:[Object(w.jsx)("div",{className:"itemsType",children:Object(w.jsx)("span",{children:"Explore Tangible"})}),Object(w.jsx)(A,{})]}),Object(w.jsxs)("div",{className:"intangible",children:[Object(w.jsx)("div",{className:"itemsType",children:Object(w.jsx)("span",{children:"Explore Intangible"})}),Object(w.jsx)(K,{})]}),Object(w.jsxs)("div",{className:"recommendedGroups",children:[Object(w.jsx)("div",{className:"itemsType",children:Object(w.jsx)("span",{children:"Recommended Groups"})}),Object(w.jsx)(ne,{recommendedGroups:r})]})]})]})}a(341);var re=a(227),ie=a.n(re),oe=a(446);function le(){var e=Object(s.useState)(""),t=Object(u.a)(e,2),a=t[0],n=t[1],c=Object(s.useState)(""),r=Object(u.a)(c,2),i=r[0],d=r[1],j=Object(s.useState)(""),p=Object(u.a)(j,2),b=p[0],m=p[1],h=Object(s.useState)(""),O=Object(u.a)(h,2),v=O[0],f=O[1],N=Object(s.useState)(""),k=Object(u.a)(N,2),I=k[0],C=k[1],S=Object(s.useState)(""),P=Object(u.a)(S,2),_=P[0],T=P[1],U=Object(s.useState)(!1),L=Object(u.a)(U,2),D=L[0],E=L[1],R=Object(x.g)(),B=function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(E(!0),t.preventDefault(),i&&!(i.length<3)){e.next=6;break}return T("Username must be at least 3 characters"),E(!1),e.abrupt("return");case 6:return e.prev=6,e.next=9,y.a.get("/api/users?username="+i);case 9:200===e.sent.status&&(T("Username already taken"),E(!1)),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(6),F();case 16:case"end":return e.stop()}}),e,null,[[6,13]])})));return function(t){return e.apply(this,arguments)}}(),F=function(){var e=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.a.get("/api/users?email="+a);case 3:200===e.sent.status&&(C("Email already taken"),E(!1)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),A();case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),A=function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(a),console.log(i),console.log(b),console.log(v),!(b.length>=6&&b===v)){e.next=20;break}return t={username:i,email:a,password:b},e.prev=6,e.next=9,y.a.post("/api/auth/register",t);case 9:200===e.sent.status&&(E(!1),R.push("/")),e.next=18;break;case 13:e.prev=13,e.t0=e.catch(6),alert("register failed due to server error"),E(!1),console.log(e.t0);case 18:e.next=21;break;case 20:E(!1);case 21:case"end":return e.stop()}}),e,null,[[6,13]])})));return function(){return e.apply(this,arguments)}}();return Object(w.jsx)("div",{className:"register",children:Object(w.jsxs)("div",{className:"registerWrapper",children:[Object(w.jsx)("div",{className:"registerLeft",children:Object(w.jsxs)("div",{className:"registerLeftWrapper  ",children:[Object(w.jsxs)("div",{className:"registerLeftTop ",children:[Object(w.jsx)("img",{className:"registerLeftLogo",src:"https://firebasestorage.googleapis.com/v0/b/projectrehash-e91c0.appspot.com/o/utils%2FReHashLogo.png?alt=media&token=bc74eadb-df39-4714-bebd-6a36d46d3193",alt:"ReHash logo"}),Object(w.jsx)("span",{id:"registerText",className:"registerLeftLogoText ",children:"ReHash"})]}),Object(w.jsx)("span",{className:"registerLeftBottom",children:"Excited to embark on you ReHash journey? Sign up now!"})]})}),Object(w.jsxs)("div",{className:"registerRight",children:[Object(w.jsx)("div",{className:"registerRightTop",children:Object(w.jsxs)(g.b,{to:"/",className:"registerBack",children:[Object(w.jsx)(ie.a,{}),Object(w.jsx)("span",{children:"Back"})]})}),Object(w.jsxs)("div",{className:"registerRightBottom",children:[Object(w.jsx)("div",{className:"registerRightHeader",children:Object(w.jsx)("h2",{children:"Register Individual Account!"})}),Object(w.jsxs)("form",{action:"",className:"registerBox",onSubmit:B,children:[Object(w.jsx)("span",{className:"registerInputLabel",children:"Your full name *"}),Object(w.jsx)("input",{placeholder:"Enter username",required:!0,value:i,maxlength:"30",onChange:function(e){console.log(e.target.value),d(e.target.value),""!==_&&T("")},className:"registerInput"}),Object(w.jsx)("span",{className:"registerInputError",children:_}),Object(w.jsx)("span",{className:"registerInputLabel",children:"Email address *"}),Object(w.jsx)("input",{placeholder:"Enter email address",required:!0,value:a,onChange:function(e){console.log(e.target.value),n(e.target.value),""!==I&&C("")},maxlength:"50",type:"email",className:"registerInput"}),Object(w.jsx)("span",{className:"registerInputError",children:I}),Object(w.jsx)("span",{className:"registerInputLabel",children:"Create password *"}),Object(w.jsx)("input",{placeholder:"Enter password with at least 6 characters",required:!0,value:b,onChange:function(e){console.log(e.target.value),m(e.target.value)},type:"password",className:"registerInput"}),Object(w.jsx)("span",{className:"registerInputError",children:""!==b&&b.length<6?"Password must have at least 6 characters":""}),Object(w.jsx)("span",{className:"registerInputLabel",children:"Confirm password *"}),Object(w.jsx)("input",{placeholder:"Confirm password",required:!0,value:v,onChange:function(e){console.log(e.target.value),f(e.target.value)},type:"password",className:"registerInput"}),Object(w.jsx)("span",{className:"registerInputError",children:""!==v&&""!==b&&v!==b?"Passwords don't match!":""}),Object(w.jsx)("button",{className:"registerButton",type:"submit",disabled:D,children:D?Object(w.jsx)(oe.a,{color:"white",size:"20px"}):"Register Account"})]})]})]})]})})}a(342);var ue=a(451),de=(a(343),a(465)),je=a(42),pe=a(447),be=a(448),me=a(449),he=a(450),xe=a(237),ge=a.n(xe);function Oe(e){var t=e.sidebarUser,a=Object(s.useContext)(te),n=a.user,c=a.sockio,r=a.dispatch,i=Object(x.g)(),u=function(){var e=Object(l.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a=function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"LOGOUT_START",payload:{user:n,sock:c}}),e.prev=1,e.next=4,c.disconnect();case 4:t({type:"LOGOUT_SUCCESS"}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),t({type:"LOGIN_FAILURE",payload:e.t0});case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),e.next=4,a(r);case 4:i.push("/"),console.log("logged out");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(w.jsx)("div",{className:"sidebar",children:Object(w.jsxs)(je.a,{textColor:"black",backgroundColor:"#FFD68D",children:[Object(w.jsx)(je.d,{prefix:Object(w.jsx)("i",{className:"fa fa-bars fa-large"}),children:Object(w.jsx)("img",{className:"userProfile",src:(null===t||void 0===t?void 0:t.profilePicture)?"https://firebasestorage.googleapis.com/v0/b/projectrehash-e91c0.appspot.com/o/"+t.profilePicture:"https://firebasestorage.googleapis.com/v0/b/projectrehash-e91c0.appspot.com/o/utils%2FnoAvatar.png?alt=media&token=e42cd680-8605-49a8-a125-1dc70a68beb4",alt:""})}),Object(w.jsxs)(je.d,{style:{textAlign:"center"},children:[Object(w.jsx)("div",{children:null===t||void 0===t?void 0:t.username}),Object(w.jsxs)("div",{className:"ratings",children:[Object(w.jsx)("div",{children:"Ratings: "}),Object(w.jsx)(de.a,{value:t?t.cumulativeRating/t.ratedByUsers:3,precision:.1,readOnly:!0})]})]}),Object(w.jsx)(je.b,{children:Object(w.jsxs)(je.e,{children:[Object(w.jsxs)(je.f,{onClick:function(){i.push("/profile/"+(null===t||void 0===t?void 0:t.username)+"/listings"),console.log("done")},className:"sidebarMenuItem",children:[Object(w.jsx)(pe.a,{className:"sidebarIcons"}),Object(w.jsx)("span",{className:"sidebarMenuText",children:"Listings"})]}),Object(w.jsxs)(je.f,{className:"sidebarMenuItem",onClick:function(){i.push("/profile/"+(null===t||void 0===t?void 0:t.username)+"/reviews")},children:[Object(w.jsx)(be.a,{className:"sidebarIcons"}),Object(w.jsx)("span",{className:"sidebarMenuText",children:"Reviews"})]}),t&&t._id===(null===n||void 0===n?void 0:n._id)?Object(w.jsxs)(je.f,{className:"sidebarMenuItem",onClick:function(){i.push("/profile/"+(null===t||void 0===t?void 0:t.username)+"/mygroups")},children:[Object(w.jsx)(ge.a,{className:"sidebarIcons"}),Object(w.jsx)("span",{className:"sidebarMenuText",children:"My Groups"})]}):Object(w.jsx)(w.Fragment,{}),t&&t._id===(null===n||void 0===n?void 0:n._id)?Object(w.jsxs)(je.f,{className:"sidebarMenuItem",onClick:function(){i.push("/profile/"+(null===t||void 0===t?void 0:t.username)+"/settings")},children:[Object(w.jsx)(me.a,{className:"sidebarIcons"}),Object(w.jsx)("span",{className:"sidebarMenuText",children:"Settings"})]}):Object(w.jsx)(w.Fragment,{})]})}),t&&t._id===(null===n||void 0===n?void 0:n._id)?Object(w.jsx)(je.c,{style:{textAlign:"center"},children:Object(w.jsxs)("div",{className:"sidebar-btn-wrapper",style:{padding:"20px 5px"},children:[Object(w.jsx)(he.a,{className:"sidebarIcons",onClick:u}),Object(w.jsx)("span",{className:"sidebarMenuText",onClick:u,children:"Log out"})]})}):Object(w.jsx)(w.Fragment,{})]})})}a(358);function ve(e){var t=e.item,a=e.inPost,n="https://firebasestorage.googleapis.com/v0/b/projectrehash-e91c0.appspot.com/o/",c=Object(s.useContext)(te),r=c.user,i=(c.sockio,Object(x.g)());return Object(s.useEffect)((function(){console.log(t)}),[t]),Object(w.jsx)("div",{className:"itemListingWrapper",onClick:function(){return function(){if(r&&r._id!==(null===t||void 0===t?void 0:t.userId))try{y.a.put("/api/items/update/views/"+t._id)}catch(e){console.log(e)}(null===t||void 0===t?void 0:t._id)&&i.push("/items/"+t._id)}()},children:Object(w.jsx)($.a,{children:a?Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)($.a.Img,{src:n+(null===t||void 0===t?void 0:t.img[0])}),Object(w.jsx)($.a.Body,{className:"PostItemBody",children:null===t||void 0===t?void 0:t.title})]}):Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)($.a.Img,{variant:"top",src:n+t.img[0],className:"trendingSwapItemImg"}),Object(w.jsxs)($.a.Body,{className:"trendingSwapItemBody",children:[Object(w.jsxs)($.a.Title,{className:"itemListingCardTitle",children:[Object(w.jsx)("span",{style:{marginRight:"10px"},children:t.title}),Object(w.jsx)(Y.a,{className:"tag",label:"waiting"===t.status?"available":t.status,size:"small",color:"waiting"===t.status?"":"reserved"===t.status?"primary":"secondary",style:{marginBottom:"5px",marginTop:"5px"}})]}),Object(w.jsx)("span",{className:"trendingSwapText",children:"Ideal Swap: "}),t.idealSwaps.map((function(e){return Object(w.jsx)(Y.a,{className:"tag",label:e,size:"small",color:"secondary",style:{marginRight:"5px"}},e)})),Object(w.jsx)($.a.Text,{children:t.desc})]})]})})})}var fe=a(452),Ne=a(458),we=a(453);a(359);function ke(e){var t=e.fill,a=void 0===t?"none":t;return Object(w.jsx)("svg",{class:"w-6 h-6 star",fill:a,stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:Object(w.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"0",d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})})}function Ie(e){var t=e.index,a=e.rating,n=e.hoverRating,c=e.onMouseEnter,r=e.onMouseLeave,i=e.onSaveRating,o=e.selected,l=e.notSelected,u=Object(s.useMemo)((function(){return n>=t||!n&&a>=t?"rgb(240, 158, 6)":"rgb(145, 144, 144)"}),[a,n,t]);return Object(w.jsx)("div",{style:{height:"20px",width:"20px"},className:"cursor-pointer",onMouseEnter:function(){return c(t)},onMouseLeave:function(){return r()},onClick:function(){return i(t)},children:o?Object(w.jsx)(ke,{fill:"rgb(240, 158, 6)"}):l?Object(w.jsx)(ke,{fill:"rgb(145, 144, 144)"}):Object(w.jsx)(ke,{fill:u})})}a(360);function ye(e){var t=e.review,a=e.doneReview,n=e.handleSubmit,c=e.handleDelete,r=e.isSubmitting,i=e.isDeleting,d=Object(s.useState)(0),j=Object(u.a)(d,2),p=j[0],b=j[1],m=Object(s.useState)(0),h=Object(u.a)(m,2),x=h[0],g=h[1],O=Object(s.useContext)(te).user,v="https://firebasestorage.googleapis.com/v0/b/projectrehash-e91c0.appspot.com/o/",f="https://firebasestorage.googleapis.com/v0/b/projectrehash-e91c0.appspot.com/o/utils%2FnoAvatar.png?alt=media&token=e42cd680-8605-49a8-a125-1dc70a68beb4",N=Object(s.useState)(null),k=Object(u.a)(N,2),I=k[0],C=k[1],S=Object(s.useState)(""),P=Object(u.a)(S,2),_=P[0],T=P[1];Object(s.useEffect)((function(){t&&function(){var e=Object(l.a)(o.a.mark((function e(){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.get("/api/users?userId="+t.reviewerId);case 2:a=e.sent,C(a.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[t]);var U=function(e){a||(g(e),console.log("hover rating is: "+e))},L=function(){a||g(0)},D=function(e){a||(b(e),console.log("your rating is: "+e))};return Object(w.jsxs)("div",{className:"userReview",children:[Object(w.jsxs)("div",{className:"userReviewTop",children:[Object(w.jsxs)("div",{className:"userReviewTopImgAndMiddle",children:[Object(w.jsx)("img",{src:a?I&&I.profilePicture?v+I.profilePicture:f:O&&O.profilePicture?v+O.profilePicture:f,alt:"",className:"userReviewImg"}),Object(w.jsxs)("div",{className:"userReviewTopMiddle",children:[Object(w.jsx)("div",{className:"userReviewTopMiddleName",children:a?null===I||void 0===I?void 0:I.username:O?O.username:"Anonymous"}),Object(w.jsxs)("div",{className:"userReviewTopMiddleRatings",children:[Object(w.jsx)("div",{className:"userReviewTopMiddleRatingsText",children:"Ratings: "}),Object(w.jsx)("div",{className:"userReviewRatingStars",children:[1,2,3,4,5].map(t?function(e){return Object(w.jsx)(Ie,{index:e,rating:p,hoverRating:x,onMouseEnter:U,onMouseLeave:L,onSaveRating:D,selected:t.rating>=e,notSelected:t.rating<e})}:function(e){return Object(w.jsx)(Ie,{index:e,rating:p,hoverRating:x,onMouseEnter:U,onMouseLeave:L,onSaveRating:D})})})]})]})]}),Object(w.jsx)("div",{className:"userReviewTopRight",children:a?t.reviewerId===(null===O||void 0===O?void 0:O._id)?Object(w.jsx)("button",{disabled:i,className:"userReviewSubmitButton",onClick:function(){return c(t)},children:"Delete"}):Object(w.jsx)(w.Fragment,{}):Object(w.jsx)("button",{disabled:r,className:"userReviewSubmitButton",onClick:function(){return n(_,p)},children:"Submit"})})]}),Object(w.jsx)("div",{className:"userReviewBottom",children:a?Object(w.jsx)("div",{className:"userReviewedText",children:t.reviewText}):Object(w.jsx)("textarea",{placeholder:"(Optional) Leave a review ...",className:"userReviewInput",value:_,maxlength:"1999",onChange:function(e){return T(e.target.value)}})})]})}function Ce(){var e=Object(s.useContext)(te),t=e.user,a=e.sockio,n=Object(x.h)().username,c=Object(x.h)().viewingCategory,r=Object(s.useState)([]),i=Object(u.a)(r,2),d=i[0],j=i[1],p=Object(s.useState)("tangibles"),b=Object(u.a)(p,2),m=b[0],h=b[1],g=Object(s.useState)(null),O=Object(u.a)(g,2),v=O[0],N=O[1],k=Object(s.useState)(0),I=Object(u.a)(k,2),S=I[0],P=I[1],_=Object(s.useState)(!1),T=Object(u.a)(_,2),U=T[0],L=T[1];Object(s.useEffect)((function(){console.log("socket is: ",null===a||void 0===a?void 0:a.id),console.log("username is: ",n)}),[a,n]),Object(s.useEffect)((function(){(function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=6;break}return e.next=3,y.a.get("/api/users?username="+n);case 3:t=e.sent,N(t.data),console.log("profileUser is: "+t.data);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[n]),Object(s.useEffect)((function(){c&&c.length>0&&(h(c),P("tangibles"===c?0:1))}),[c]),Object(s.useEffect)((function(){(function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!v){e.next=14;break}return e.prev=1,L(!0),e.next=5,y.a.get("/api/items/categories?categoryName="+m+"&userId="+v._id);case 5:t=e.sent,j(t.data),L(!1),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),L(!1),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}})()()}),[m,v]);return Object(w.jsxs)("div",{children:[Object(w.jsx)(C,{currentUser:t}),Object(w.jsxs)("div",{className:"userlistingContainer",children:[Object(w.jsx)(Oe,{className:"sidebar",sidebarUser:v}),Object(w.jsx)("div",{className:"userListingsRight",children:Object(w.jsxs)(ue.a,{className:"userlistingWrapper",children:[Object(w.jsx)("div",{className:"tabBar",children:Object(w.jsx)(fe.a,{margin:200,style:{marginBottom:"10px"},children:Object(w.jsxs)(Ne.a,{value:S,indicatorColor:"primary",textColor:"primary",centered:!0,children:[Object(w.jsx)(we.a,{label:"Tangible",onClick:function(){h("tangibles"),P(0)}}),Object(w.jsx)(we.a,{label:"Intangible",onClick:function(){h("intangibles"),P(1)}})]})})}),U?Object(w.jsx)("div",{className:"userListingLoading",children:Object(w.jsx)(oe.a,{color:"primary",size:"48px"})}):Object(w.jsx)(f.a,{className:"listingRow",xs:1,sm:2,md:2,lg:3,children:d.length?d.map((function(e){return Object(w.jsx)(ve,{item:e},e._id)})):Object(w.jsx)("div",{children:"User does not have any item in this category"})})]})})]})]})}var Se=a(53);a(361);function Pe(){var e=Object(s.useContext)(te),t=e.user,a=(e.sockio,Object(s.useState)(null)),n=Object(u.a)(a,2),c=n[0],r=n[1],i=Object(x.h)().username,d=Object(s.useState)([]),j=Object(u.a)(d,2),p=j[0],b=j[1],m=Object(s.useState)(!1),h=Object(u.a)(m,2),g=h[0],O=h[1],v=Object(s.useState)([]),f=Object(u.a)(v,2),N=f[0],k=f[1],I=Object(s.useState)(0),S=Object(u.a)(I,2),P=S[0],_=S[1],T=Object(s.useState)(0),U=Object(u.a)(T,2),L=U[0],D=U[1],E=Object(s.useState)(!1),R=Object(u.a)(E,2),B=R[0],F=R[1],A=Object(s.useState)(!1),M=Object(u.a)(A,2),G=M[0],W=M[1];Object(s.useEffect)((function(){(function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i){e.next=6;break}return e.next=3,y.a.get("/api/users?username="+i);case 3:t=e.sent,r(t.data),console.log("profileUser is: "+t.data);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[i]),Object(s.useEffect)((function(){console.log("user is changed"),console.log(t)}),[t]),Object(s.useEffect)((function(){console.log(t),c&&(function(){var e=Object(l.a)(o.a.mark((function e(){var a,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.get("/api/reviews/profileUser/"+c._id);case 2:a=e.sent,s=a.data.filter((function(e){return e.reviewerId!==(null===t||void 0===t?void 0:t._id)})),b(s),console.log(s);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()(),_(c.cumulativeRating),D(c.ratedByUsers))}),[c,t]),Object(s.useEffect)((function(){(function(){var e=Object(l.a)(o.a.mark((function e(){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&c&&c._id!==t._id){e.next=4;break}O(!0),e.next=8;break;case 4:return e.next=6,y.a.get("/api/reviews/between/"+c._id+"/"+t._id);case 6:(a=e.sent).data.length>0?(O(!0),k(a.data),console.log(a.data)):O(!1);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[c,t]);var H=function(){var e=Object(l.a)(o.a.mark((function e(a,s){var n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(g||!(s>0)){e.next=22;break}return F(!0),console.log("reviewText is: "+a+"\n rating is: "+s),n={reviewerId:t._id,revieweeId:c._id,rating:s,reviewText:a},e.prev=4,e.next=7,y.a.post("/api/reviews",n);case 7:return r=e.sent,k([].concat(Object(Se.a)(N),[r.data])),O(!0),e.next=12,y.a.put("/api/users/"+c._id,{cumulativeRating:P+s,ratedByUsers:L+1});case 12:e.sent,_(P+s),D(L+1),F(!1),e.next=22;break;case 18:e.prev=18,e.t0=e.catch(4),console.log(e.t0),F(!1);case 22:case"end":return e.stop()}}),e,null,[[4,18]])})));return function(t,a){return e.apply(this,arguments)}}(),z=function(){var e=Object(l.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!g||!c){e.next=23;break}return e.prev=1,W(!0),console.log(t),e.next=6,y.a.delete("/api/reviews/id/"+t._id);case 6:return a=e.sent,console.log(a.status),console.log(typeof a.status),k([]),O(!1),e.next=13,y.a.put("/api/users/"+c._id,{cumulativeRating:P-t.rating,ratedByUsers:L-1});case 13:e.sent,_(P-t.rating),D(L-1),W(!1),e.next=23;break;case 19:e.prev=19,e.t0=e.catch(1),console.log(e.t0),W(!1);case 23:case"end":return e.stop()}}),e,null,[[1,19]])})));return function(t){return e.apply(this,arguments)}}();return Object(w.jsxs)("div",{children:[Object(w.jsx)(C,{currentUser:t}),Object(w.jsxs)("div",{className:"userReviewsContainer",children:[Object(w.jsx)(Oe,{sidebarUser:c}),Object(w.jsx)("div",{className:"userReviewsRight",children:Object(w.jsxs)(ue.a,{className:"userReviewsWrapper",children:[Object(w.jsx)("span",{className:"userReviewsHeader",children:"Reviews"}),g?Object(w.jsx)(w.Fragment,{}):Object(w.jsx)(ye,{className:"userReview",doneReview:!1,handleSubmit:H,handleDelete:z,isSubmitting:B}),N.map((function(e){return Object(w.jsx)(ye,{className:"userReview",review:e,doneReview:!0,handleSubmit:H,handleDelete:z,isDeleting:G},e._id)})),p.map((function(e){return Object(w.jsx)(ye,{className:"userReview",review:e,doneReview:!0,handleSubmit:H,handleDelete:z},e._id)}))]})})]})]})}a(362);function _e(){var e=Object(x.h)().categoryName,t=Object(x.h)().pageType,a=Object(s.useState)([]),n=Object(u.a)(a,2),c=n[0],r=n[1],i=Object(s.useContext)(te),d=i.user;i.sockio;return Object(s.useEffect)((function(){console.log("categoryName is: "+e),console.log("pageType is "+t),function(){var a=Object(l.a)(o.a.mark((function a(){var s,n,c,i;return o.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,"categories"!==t||!e){a.next=11;break}return a.next=4,y.a.get("/api/items/categories?categoryName="+e);case 4:if(200!==(s=a.sent).status){a.next=9;break}return n=s.data.filter((function(e){return e.userId!==(null===d||void 0===d?void 0:d._id)})),a.next=9,r(n);case 9:a.next=19;break;case 11:if("search"!==t||!e){a.next=19;break}return a.next=14,y.a.get("/api/items?search="+e);case 14:if(200!==(c=a.sent).status){a.next=19;break}return i=c.data.filter((function(e){return e.userId!==(null===d||void 0===d?void 0:d._id)})),a.next=19,r(i);case 19:a.next=24;break;case 21:a.prev=21,a.t0=a.catch(0),console.log(a.t0);case 24:case"end":return a.stop()}}),a,null,[[0,21]])})));return function(){return a.apply(this,arguments)}}()()}),[e,t,d]),Object(w.jsxs)("div",{children:[Object(w.jsx)(C,{currentUser:d}),Object(w.jsxs)("div",{className:"productWrapper",children:[Object(w.jsx)("span",{className:"productHeader",children:"search"===t?"Search results for: "+e:"categories"===t&&e?e.charAt(0).toUpperCase()+e.slice(1):"Product Descrption Header"}),Object(w.jsx)(f.a,{className:"listingRow",xl:4,lg:3,md:2,sm:1,xs:1,children:c.length>0?c.map((function(e){return Object(w.jsx)("div",{children:Object(w.jsx)(ve,{item:e},e._id)})})):"categories"===t?Object(w.jsx)("div",{className:"productNoResult",children:'No valid items in this category. Note that you can\'t view reserved items or items that are already swapped. You also cannot view your own items here. Go under "Listings" to view your own item.'}):Object(w.jsx)("div",{className:"productNoResult",children:"No result"})})]})]})}var Te=a(88),Ue=a(25),Le=a(252),De=(a(363),a(457)),Ee=a(239),Re=a.n(Ee),Be=a(459),Fe=a(454),Ae=a(456),Me=a(181),Ge=(Me.a.initializeApp({apiKey:"AIzaSyDEtU9iHU6zDSCB0De42EH4CPhh_WDZcm8",authDomain:"projectrehash-e91c0.firebaseapp.com",projectId:"projectrehash-e91c0",storageBucket:"projectrehash-e91c0.appspot.com",messagingSenderId:"882668693176",appId:"1:882668693176:web:1462615739f6878eed364d",measurementId:"G-DNDTB5D3WW"}),Me.a.storage()),We=Object(Fe.a)((function(e){return{root:{width:500,"& > * + *":{marginTop:e.spacing(3)}}}})),He={flex:1,display:"flex",flexDirection:"column",alignItems:"center",padding:"20px",borderWidth:2,borderRadius:2,borderColor:"#eeeeee",borderStyle:"dashed",backgroundColor:"#fafafa",color:"#bdbdbd",outline:"none",transition:"border .24s ease-in-out"},ze={borderColor:"#2196f3"},Je={borderColor:"#00e676"},qe={borderColor:"#ff1744"};function Ke(){var e=Object(s.useContext)(te),t=e.user,a=(e.sockio,We()),n=[{title:"Clothing"},{title:"Beauty"},{title:"Sports Equipments"},{title:"Home Appliances"},{title:"Automotive"},{title:"Hobbies"},{title:"Computers and Tech"},{title:"Outdoor Activities"},{title:"Travel"},{title:"Discussion"},{title:"Food"},{title:"Indoor Activities"},{title:"Sports"},{title:"Games and Esports"},{title:"Other Intangibles"},{title:"Other Tangibles"}],c=Object(s.useState)([]),r=Object(u.a)(c,2),i=r[0],d=r[1],j=Object(s.useState)({}),p=Object(u.a)(j,2),b=p[0],m=p[1],h=Object(s.useState)({}),g=Object(u.a)(h,2),O=g[0],v=g[1],k=Object(s.useState)([]),I=Object(u.a)(k,2),P=I[0],_=I[1],T=Object(s.useState)([]),U=Object(u.a)(T,2),L=U[0],D=U[1],E=Object(s.useState)(!1),R=Object(u.a)(E,2),B=R[0],F=R[1],A=Object(x.g)(),M=Object(s.useCallback)((function(e){O.images&&v(Object(Ue.a)(Object(Ue.a)({},O),{},{images:null}));var t=e.map((function(e){return Object.assign(e,{preview:URL.createObjectURL(e),customFileName:Date.now().toString().concat(e.name)})})),a=[].concat(Object(Se.a)(i),Object(Se.a)(t));console.log(a),console.log(a.length),a.length>6&&(a=a.slice(a.length-6,a.length),console.log(a)),d(a)}),[O,i]),G=Object(Le.a)({accept:"image/*",onDrop:M,maxFiles:6}),W=G.getRootProps,H=G.getInputProps,z=G.isDragActive,J=G.isDragAccept,q=G.isDragReject,K=Object(s.useMemo)((function(){return Object(Ue.a)(Object(Ue.a)(Object(Ue.a)(Object(Ue.a)({},He),z?ze:{}),J?Je:{}),q?qe:{})}),[z,q,J]),Y=i.map((function(e){return Object(w.jsx)("div",{className:"thumb",children:Object(w.jsx)("img",{src:e.preview,className:"userSwapImg",alt:""})},e.customFileName)}));Object(s.useEffect)((function(){return function(){i.forEach((function(e){return URL.revokeObjectURL(e.preview)}))}}),[i]);var V=function(e,t){m(Object(Ue.a)(Object(Ue.a)({},b),{},Object(Te.a)({},e,t))),O[e]&&v(Object(Ue.a)(Object(Ue.a)({},O),{},Object(Te.a)({},e,null)))},Z=function(){var e=b.title,t=b.description,a=b.tangible,s={};return e&&""!==e?e.length>50&&(s.title="title cannot be more than 50 characters"):s.title="title cannot be blank!",t&&""!==t?t.length>800&&(s.description="description cannot be more than 800 characters"):s.description="description cannot be blank!",a&&""!==a||(s.tangible="specify whether your item is tangible or intangible!"),L&&0!==L.length||(s.swapCategories="select at least 1 category!"),P&&0!==P.length||(s.idealCategories="select at least 1 category!"),0===i.length&&(s.images="you have to upload at least 1 image!"),s},Q=function(){var e=Object(l.a)(o.a.mark((function e(t){var a,s,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return","");case 2:return e.prev=2,a=t.customFileName,console.log("filename is: "+a),e.next=7,Ge.ref("items/".concat(a)).put(t);case 7:return e.sent,e.next=10,Ge.ref("items").child("".concat(a)).getDownloadURL();case 10:return s=e.sent,n=s.replace("https://firebasestorage.googleapis.com/v0/b/projectrehash-e91c0.appspot.com/o/",""),console.log("trimImageUrl is: "+n),e.abrupt("return",n);case 16:return e.prev=16,e.t0=e.catch(2),console.log(e.t0),e.abrupt("return","");case 20:case"end":return e.stop()}}),e,null,[[2,16]])})));return function(t){return e.apply(this,arguments)}}(),X=function(){var e=Object(l.a)(o.a.mark((function e(t){var a,s,n,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==t.length){e.next=2;break}return e.abrupt("return",[]);case 2:a=[],e.prev=3,s=0;case 5:if(!(s<t.length)){e.next=16;break}return console.log("processing file "+s),n=t[s],e.next=10,Q(n);case 10:c=e.sent,a.push(c),console.log("finish processing file "+s+": "+c);case 13:s++,e.next=5;break;case 16:return console.log("finish processing all files"),console.log(a),e.abrupt("return",a);case 21:return e.prev=21,e.t0=e.catch(3),e.abrupt("return",[]);case 24:case"end":return e.stop()}}),e,null,[[3,21]])})));return function(t){return e.apply(this,arguments)}}(),ee=function(){var e=Object(l.a)(o.a.mark((function e(a){var s,n,c,r,l,u;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),s=Z(),!(Object.keys(s).length>0)){e.next=7;break}v(s),console.log(s),e.next=39;break;case 7:return F(!0),n=L.map((function(e){return e.title.toLowerCase()})),n=[].concat(Object(Se.a)(n),[b.tangible]),c=P.map((function(e){return e.title.toLowerCase()})),e.prev=11,e.next=14,X(i);case 14:if(r=e.sent,console.log(r),!(r.length>0)||r.includes("")){e.next=24;break}return l={userId:t._id,title:b.title,desc:b.description,img:r,categories:n,idealSwaps:c,status:"waiting"},console.log(l),e.next=21,y.a.post("/api/items",l);case 21:u=e.sent,console.log(u.data),200===u.status&&t&&A.push("/profile/"+t.username+"/listings/"+b.tangible);case 24:d([]),m({tangible:""}),_([]),D([]),F(!1),e.next=39;break;case 31:e.prev=31,e.t0=e.catch(11),console.log(e.t0),d([]),m({tangible:""}),_([]),D([]),F(!1);case 39:case"end":return e.stop()}}),e,null,[[11,31]])})));return function(t){return e.apply(this,arguments)}}();return Object(w.jsxs)("div",{children:[Object(w.jsx)(C,{currentUser:t}),Object(w.jsxs)("div",{className:"createListingContainer",children:[Object(w.jsx)("div",{className:"createListingHeader",children:Object(w.jsx)("span",{children:"Make your swap today!"})}),Object(w.jsxs)(f.a,{className:"createListingContent",children:[Object(w.jsx)(N.a,{xs:6,children:Object(w.jsx)($.a,{className:"uploadImagesCard shadow p-3 mb-5 bg-white rounded",children:Object(w.jsxs)($.a.Body,{children:[Object(w.jsx)("h5",{className:"uploadImagesCardHeader",children:"Drag and Drop images here"}),Object(w.jsx)("h6",{className:"uploadImagesCardSubHeader",children:"or click to upload"}),Object(w.jsx)(De.a,{children:Object(w.jsxs)(De.a.Group,{controlId:"images",children:[Object(w.jsx)(De.a.Control,{type:"text",style:{display:"none"},isInvalid:!!O.images}),Object(w.jsx)("div",{className:"swapImgDragAndDropWrapper",children:Object(w.jsxs)("section",{className:"container",children:[Object(w.jsxs)("div",Object(Ue.a)(Object(Ue.a)({},W({style:K})),{},{className:"dragAndDropDiv",children:[Object(w.jsx)("input",Object(Ue.a)({},H())),Object(w.jsx)("p",{children:Object(w.jsx)(Re.a,{fontSize:"large"})}),Object(w.jsx)("p",{children:"Drop away your swap images..."})]})),Object(w.jsx)("aside",{className:"thumbsContainer",children:Y})]})}),Object(w.jsx)(De.a.Control.Feedback,{type:"invalid",children:O.images})]})})]})})}),Object(w.jsx)(N.a,{xs:6,className:"createListingContentRight",children:Object(w.jsxs)(De.a,{className:"formWrapper",children:[Object(w.jsxs)(De.a.Group,{controlId:"title",children:[Object(w.jsx)(De.a.Label,{children:"Title"}),Object(w.jsx)(De.a.Control,{className:"swapAwayFormControl",type:"text",maxlength:"50",placeholder:"Enter your swap title",value:b.title?b.title:"",onChange:function(e){return V("title",e.target.value)},isInvalid:!!O.title}),Object(w.jsx)(De.a.Control.Feedback,{type:"invalid",children:O.title}),Object(w.jsx)(De.a.Text,{className:"text-muted",children:"Create an interesting title for your swap!"})]}),Object(w.jsxs)(De.a.Group,{controlId:"description",children:[Object(w.jsx)(De.a.Label,{children:"Description"}),Object(w.jsx)(De.a.Control,{className:"swapAwayFormControl",as:"textarea",maxlength:"800",rows:3,value:b.description?b.description:"",placeholder:"Describe your swap",onChange:function(e){return V("description",e.target.value)},isInvalid:!!O.description}),Object(w.jsx)(De.a.Control.Feedback,{type:"invalid",children:O.description})]}),Object(w.jsxs)(De.a.Group,{controlId:"tangible",children:[Object(w.jsx)(De.a.Label,{children:"Is your item Tangible or Intangible?"}),Object(w.jsxs)(De.a.Control,{className:"swapAwayFormControl",as:"select",value:b.tangible,onChange:function(e){return V("tangible",e.target.value)},isInvalid:!!O.tangible,children:[Object(w.jsx)("option",{value:"",disabled:!0,hidden:!0,selected:!0,children:"Select category:"}),Object(w.jsx)("option",{value:"tangibles",children:"Tangible"}),Object(w.jsx)("option",{value:"intangibles",children:"Intangible"})]}),Object(w.jsx)(De.a.Control.Feedback,{type:"invalid",children:O.tangible})]}),Object(w.jsxs)(De.a.Group,{controlId:"swapCategories",children:[Object(w.jsx)(De.a.Label,{children:"What is your swap category?"}),Object(w.jsx)(De.a.Control,{type:"text",style:{display:"none"},isInvalid:!!O.swapCategories}),Object(w.jsx)("div",{className:a.root,children:Object(w.jsx)(Be.a,{multiple:!0,limitTags:2,id:"multiple-limit-tags",options:n,value:L,getOptionLabel:function(e){return e.title},onChange:function(e,t){O.swapCategories&&v(Object(Ue.a)(Object(Ue.a)({},O),{},{swapCategories:null})),D(t),console.log(t)},renderInput:function(e){return Object(w.jsx)(Ae.a,Object(Ue.a)(Object(Ue.a)({},e),{},{variant:"outlined",label:"Select categories"}))}})}),Object(w.jsx)(De.a.Control.Feedback,{type:"invalid",children:O.swapCategories})]}),Object(w.jsxs)(De.a.Group,{controlId:"idealCategories",children:[Object(w.jsx)(De.a.Label,{children:"What is your ideal swap?"}),Object(w.jsx)(De.a.Control,{type:"text",style:{display:"none"},isInvalid:!!O.idealCategories}),Object(w.jsx)("div",{className:a.root,children:Object(w.jsx)(Be.a,{multiple:!0,limitTags:2,id:"multiple-limit-tags2",options:n,value:P,getOptionLabel:function(e){return e.title},onChange:function(e,t){O.idealCategories&&v(Object(Ue.a)(Object(Ue.a)({},O),{},{idealCategories:null})),_(t),console.log(t)},renderInput:function(e){return Object(w.jsx)(Ae.a,Object(Ue.a)(Object(Ue.a)({},e),{},{variant:"outlined",label:"Select ideal swaps"}))}})}),Object(w.jsx)(De.a.Control.Feedback,{type:"invalid",children:O.idealCategories})]}),Object(w.jsx)(S.a,{className:"postButton",variant:"warning",onClick:ee,disabled:B,children:B?Object(w.jsx)(oe.a,{color:"white",size:"20px"}):"Post Swap"})]})})]})]})]})}a(369),a(370);function $e(e){var t=e.imgLinkArray;return Object(s.useEffect)((function(){console.log(t)}),[t]),Object(w.jsx)("div",{className:"singleItemWrapper",children:Object(w.jsx)(V.a,{responsive:{superLargeDesktop:{breakpoint:{max:4e3,min:3e3},items:8},desktop:{breakpoint:{max:3e3,min:1024},items:6},tablet:{breakpoint:{max:1024,min:464},items:2},mobile:{breakpoint:{max:464,min:0},items:1}},children:null===t||void 0===t?void 0:t.map((function(e){return Object(w.jsx)(V.a.Item,{children:Object(w.jsx)("img",{className:"singleItemCarouselItemImg",src:"https://firebasestorage.googleapis.com/v0/b/projectrehash-e91c0.appspot.com/o/"+e,alt:""})})}))})})}a(371);var Ye=a(462);function Ve(e){var t=e.itemUserId,a=Object(s.useState)(null),n=Object(u.a)(a,2),c=n[0],r=n[1],i=Object(x.g)(),d=Object(s.useContext)(te).user;Object(s.useEffect)((function(){(function(){var e=Object(l.a)(o.a.mark((function e(){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=6;break}return e.next=3,y.a.get("/api/users?userId="+t);case 3:a=e.sent,r(a.data),console.log("itemUser is: "+a.data);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[t]);var j=function(){var e=Object(l.a)(o.a.mark((function e(){var a,s,n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(d){e.next=5;break}i.push("/"),console.log("pushed to login"),e.next=38;break;case 5:return e.prev=5,e.next=8,y.a.get("/api/conversations/find/"+d._id+"/"+t);case 8:if(!((a=e.sent).data.length>0)){e.next=25;break}if(i.push("/chat/"+a.data[0]._id),console.log("pushed to chat id:"+a.data[0]._id),!c||!d){e.next=23;break}if(e.prev=13,s={userId:c._id},d.chatFollow.includes(c._id)&&c.chatFollow.includes(d._id)){e.next=18;break}return e.next=18,y.a.put("/api/users/"+d._id+"/chatfollow",s);case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(13),console.log(e.t0);case 23:e.next=33;break;case 25:return e.next=27,y.a.post("/api/conversations",{members:[t,d._id]});case 27:return n=e.sent,i.push("/chat/"+n._id),r={userId:c._id},e.next=32,y.a.put("/api/users/"+d._id+"/chatfollow",r);case 32:console.log(n.data);case 33:e.next=38;break;case 35:e.prev=35,e.t1=e.catch(5),console.log(e.t1);case 38:case"end":return e.stop()}}),e,null,[[5,35],[13,20]])})));return function(){return e.apply(this,arguments)}}();return Object(w.jsx)("div",{children:Object(w.jsxs)(Ye.a,{className:"swapAwayPrompt",children:[Object(w.jsx)(ue.a,{children:Object(w.jsxs)(f.a,{children:[Object(w.jsx)(N.a,{sm:2,children:Object(w.jsx)("img",{className:"swapAwayUserImg",src:c&&c.profilePicture?"https://firebasestorage.googleapis.com/v0/b/projectrehash-e91c0.appspot.com/o/"+c.profilePicture:"https://firebasestorage.googleapis.com/v0/b/projectrehash-e91c0.appspot.com/o/utils%2FnoAvatar.png?alt=media&token=e42cd680-8605-49a8-a125-1dc70a68beb4",onClick:function(){c&&i.push("/profile/"+c.username+"/listings")},alt:""})}),Object(w.jsx)(N.a,{sm:10,children:Object(w.jsx)(Ye.a.Heading,{className:"swapAwayUsername",style:{fontSize:"1rem"},children:c?c.username:""})})]})}),Object(w.jsx)(S.a,{className:"swapAwayButton",variant:"warning",onClick:j,children:Object(w.jsxs)("div",{className:"swapAwayButtonTextGroup",children:[Object(w.jsx)(h.a,{}),Object(w.jsx)("span",{className:"swapAwayButtonText",children:"Swap Away!"})]})})]})})}a(372);var Ze=a(179),Qe=a.n(Ze),Xe=a(180),et=a.n(Xe),tt=a(241),at=a.n(tt);function st(e){var t=e.itemUserId,a=e.itemStatus,n=e.handleReserve,c=e.handleUnreserve,r=e.handleSwap,i=e.handleUnswap,d=e.handleDelete,j=e.inProgress,p=Object(s.useState)(null),b=Object(u.a)(p,2),m=b[0],h=b[1],g=Object(s.useState)(!1),O=Object(u.a)(g,2),v=O[0],k=O[1],I=Object(s.useState)(""),C=Object(u.a)(I,2),P=C[0],_=C[1],T=Object(s.useState)(""),U=Object(u.a)(T,2),L=U[0],D=U[1],E=Object(x.g)();Object(s.useEffect)((function(){(function(){var e=Object(l.a)(o.a.mark((function e(){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=6;break}return e.next=3,y.a.get("/api/users?userId="+t);case 3:a=e.sent,h(a.data),console.log("itemUser is: "+a.data);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[t]);var R=function(){var e=Object(l.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("Enter"!==t.key){e.next=20;break}if(t.preventDefault(),console.log("user pressed enter key and the value is: "+P),""===P){e.next=18;break}return console.log("input is not empty"),e.prev=5,e.next=8,y.a.get("/api/agreements?id="+P);case 8:(a=e.sent)&&200===a.status&&a.data?a.data.parties.length>=2||a.data.items.length>=2?(console.log("Error 2"),D("This agreement id already involves 2 parties or 2 items")):(r(a.data._id),_(""),k(!1)):(console.log("Error 1"),D("Agreement does not exist!")),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(5),console.log("Error 1"),D("Agreement does not exist!");case 16:e.next=20;break;case 18:console.log("input empty!"),D("Agreement code cannot be empty!");case 20:case"end":return e.stop()}}),e,null,[[5,12]])})));return function(t){return e.apply(this,arguments)}}();return Object(w.jsx)("div",{children:Object(w.jsx)(Ye.a,{className:"userItemCommandPrompt",children:Object(w.jsxs)(ue.a,{children:[Object(w.jsxs)(f.a,{children:[Object(w.jsx)(N.a,{sm:2,children:Object(w.jsx)("img",{className:"userItemCommandUserImg",src:m&&m.profilePicture?"https://firebasestorage.googleapis.com/v0/b/projectrehash-e91c0.appspot.com/o/"+m.profilePicture:"https://firebasestorage.googleapis.com/v0/b/projectrehash-e91c0.appspot.com/o/utils%2FnoAvatar.png?alt=media&token=e42cd680-8605-49a8-a125-1dc70a68beb4",onClick:function(){m&&E.push("/profile/"+m.username+"/listings")},alt:""})}),Object(w.jsx)(N.a,{sm:10,children:Object(w.jsx)(Ye.a.Heading,{className:"userItemCommandUsername",style:{fontSize:"1rem"},children:m?m.username:"Anonymous"})})]}),Object(w.jsxs)("div",{className:"buttonWrapper",children:["waiting"===a?Object(w.jsx)("div",{children:Object(w.jsxs)(S.a,{className:"button",variant:"warning",onClick:n,disabled:j,children:[Object(w.jsx)(Qe.a,{className:"icons"}),j?Object(w.jsx)(oe.a,{color:"white",size:"20px"}):Object(w.jsx)("span",{className:"action",children:"Mark as Reserve"})]})}):"reserved"===a?Object(w.jsx)("div",{children:Object(w.jsxs)(S.a,{className:"button",variant:"warning",onClick:c,disabled:j,children:[Object(w.jsx)(Qe.a,{className:"icons"}),j?Object(w.jsx)(oe.a,{color:"white",size:"20px"}):Object(w.jsx)("span",{className:"action",children:"Unreserve"})]})}):Object(w.jsx)(w.Fragment,{}),Object(w.jsx)("div",{children:"deleted"===a?Object(w.jsx)(w.Fragment,{}):"swapped"===a?Object(w.jsxs)(S.a,{className:"button",variant:"warning",onClick:i,disabled:j,children:[Object(w.jsx)(et.a,{className:"icons"}),j?Object(w.jsx)(oe.a,{color:"white",size:"20px"}):Object(w.jsx)("span",{className:"action",children:"Cancel Agreement"})]}):Object(w.jsxs)(w.Fragment,{children:[Object(w.jsxs)(S.a,{className:"button",variant:"warning",disabled:j,children:[Object(w.jsx)(et.a,{className:"icons"}),j?Object(w.jsx)(oe.a,{color:"white",size:"20px"}):Object(w.jsx)("span",{className:"action",onClick:function(){return k(!v)},children:"Mark as Swapped"})]}),v?Object(w.jsx)(De.a,{className:"userItemCommandForm",children:Object(w.jsxs)(De.a.Group,{controlId:"title",children:[Object(w.jsx)(De.a.Control,{className:"userItemCommandFormControl",type:"input",maxlength:"30",placeholder:"Enter your agreement code",value:P,onChange:function(e){_(e.target.value),D(""),console.log("changed to: "+e.target.value)},onKeyDown:R,isInvalid:""!==L}),Object(w.jsx)(De.a.Control.Feedback,{type:"invalid",children:L})]})}):Object(w.jsx)(w.Fragment,{})]})}),Object(w.jsx)("div",{children:"deleted"===a||"swapped"===a?Object(w.jsx)(w.Fragment,{}):Object(w.jsxs)(S.a,{className:"button",variant:"warning",onClick:d,disabled:j,children:[Object(w.jsx)(at.a,{className:"icons"}),j?Object(w.jsx)(oe.a,{color:"white",size:"20px"}):Object(w.jsx)("span",{className:"action",children:"Delete"})]})})]})]})})})}function nt(){var e=Object(s.useContext)(te),t=e.user,a=(e.sockio,Object(x.h)().itemId),n=Object(s.useState)(null),c=Object(u.a)(n,2),r=c[0],i=c[1],d=Object(x.g)(),j=Object(s.useState)(""),p=Object(u.a)(j,2),b=p[0],m=p[1],h=Object(s.useState)(!1),g=Object(u.a)(h,2),O=g[0],v=g[1];Object(s.useEffect)((function(){(function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!a){e.next=7;break}return e.next=4,y.a.get("/api/items?itemId="+a);case 4:return t=e.sent,e.next=7,i(t.data);case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}})()()}),[a]);var k=function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!a){e.next=8;break}return v(!0),e.next=5,y.a.put("/api/items/update/status/"+a,{status:"reserved"});case 5:200===(t=e.sent).status&&t.data&&i(t.data),v(!1);case 8:e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),v(!1),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),I=function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!a){e.next=8;break}return v(!0),e.next=5,y.a.put("/api/items/update/status/"+a,{status:"waiting"});case 5:200===(t=e.sent).status&&t.data&&i(t.data),v(!1);case 8:e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),v(!1),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=Object(l.a)(o.a.mark((function e(s){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("handleSwap called with agreementId: "+s),e.prev=1,v(!0),e.next=5,y.a.put("/api/agreements/update/addParties/"+s,{userId:null===t||void 0===t?void 0:t._id,itemId:a});case 5:if(200!==e.sent.status||!a){e.next=12;break}return e.next=9,y.a.put("/api/items/update/status/"+a,{status:"swapped"});case 9:200===(n=e.sent).status&&n.data&&i(n.data),v(!1);case 12:v(!1),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(1),v(!1),console.log(e.t0);case 19:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=Object(l.a)(o.a.mark((function e(){var s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("handleUnswap called"),e.prev=1,v(!0),e.next=5,y.a.put("/api/agreements/update/removeParties",{userId:null===t||void 0===t?void 0:t._id,itemId:a});case 5:if(200!==e.sent.status||!a){e.next=12;break}return e.next=9,y.a.put("/api/items/update/status/"+a,{status:"waiting"});case 9:200===(s=e.sent).status&&s.data&&i(s.data),v(!1);case 12:v(!1),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(1),v(!1),console.log(e.t0);case 19:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(){return e.apply(this,arguments)}}(),_=function(){var e=Object(l.a)(o.a.mark((function e(){var a,s,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("handleDelete called"),!r){e.next=32;break}return e.prev=2,v(!0),a=null===r||void 0===r?void 0:r._id,e.next=7,y.a.delete("/api/posts/filter?itemId="+a);case 7:return e.next=9,y.a.delete("/api/items?itemId="+(null===r||void 0===r?void 0:r._id));case 9:200===e.sent.status&&d.push("/profile/"+t.username+"/listings"),v(!1),s=0;case 13:if(!(s<r.img.length)){e.next=26;break}return n=Ge.refFromURL("https://firebasestorage.googleapis.com/v0/b/projectrehash-e91c0.appspot.com/o/"+r.img[s]),e.prev=15,e.next=18,n.delete();case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(15),console.log(e.t0);case 23:s++,e.next=13;break;case 26:e.next=32;break;case 28:e.prev=28,e.t1=e.catch(2),v(!1),console.log(e.t1);case 32:case"end":return e.stop()}}),e,null,[[2,28],[15,20]])})));return function(){return e.apply(this,arguments)}}(),T=function(e){console.log("copy link");var t=document.createElement("input"),a="link"===e?window.location.href:(null===r||void 0===r?void 0:r._id)?r._id:"";document.body.appendChild(t),t.value=a,t.select(),document.execCommand("copy"),document.body.removeChild(t),m("link"===e?"Link to this page has been copied":"Item ID has been copied")};return Object(w.jsxs)("div",{className:"itemPage",children:[Object(w.jsx)(C,{currentUser:t}),Object(w.jsxs)("label",{className:"itemHeader",children:[r?r.title:"Error: No Item Displayed",r?Object(w.jsx)(Y.a,{className:"itemTag",label:"waiting"===r.status?"available":r.status,size:"small",color:"waiting"===r.status?"":"reserved"===r.status?"primary":"secondary",style:{marginLeft:"15px",marginRight:"10px",marginTop:"0px"}}):Object(w.jsx)(w.Fragment,{})]}),Object(w.jsx)(ue.a,{className:"itemImg",children:Object(w.jsxs)(f.a,{children:[Object(w.jsx)(N.a,{children:Object(w.jsx)($e,{imgLinkArray:r?r.img:[]})}),Object(w.jsx)(N.a,{children:(null===t||void 0===t?void 0:t._id)===(null===r||void 0===r?void 0:r.userId)?Object(w.jsx)(st,{itemUserId:null===r||void 0===r?void 0:r.userId,itemStatus:null===r||void 0===r?void 0:r.status,handleReserve:k,handleUnreserve:I,handleDelete:_,handleSwap:S,handleUnswap:P,inProgress:O}):Object(w.jsx)(Ve,{itemUserId:null===r||void 0===r?void 0:r.userId})})]})}),Object(w.jsxs)("div",{className:"itemHeaderSecond",children:[Object(w.jsx)("div",{className:"itemGetLink",onClick:function(){return T("link")},children:"Copy Link"}),Object(w.jsx)("div",{className:"itemGetLink",onClick:function(){return T("id")},children:"Copy Item ID"}),Object(w.jsx)("div",{className:"itemCopyLinkText",children:b})]}),Object(w.jsxs)("div",{className:"itemDescription",children:[Object(w.jsx)("h5",{children:"Description"}),Object(w.jsx)("span",{children:r?r.desc:"The item does not exist, and hence no description"})]}),Object(w.jsxs)("div",{className:"itemIdealSwaps",children:[Object(w.jsx)("h5",{children:"Ideal swaps"}),null===r||void 0===r?void 0:r.idealSwaps.map((function(e){return Object(w.jsx)(Y.a,{className:"tag",label:e,size:"small",color:"secondary",style:{marginRight:"5px"}},e)}))]})]})}a(373);var ct=a(242),rt=a.n(ct),it=a(243),ot=a.n(it),lt=a(244),ut=a.n(lt);function dt(){var e=Object(s.useState)(""),t=Object(u.a)(e,2),a=t[0],n=t[1],c=Object(s.useState)(""),r=Object(u.a)(c,2),i=r[0],d=r[1],j=Object(s.useState)(""),p=Object(u.a)(j,2),b=p[0],m=p[1],h=Object(s.useContext)(te),x=h.user,O=h.dispatch,v=h.isFetching;Object(s.useEffect)((function(){console.log("user is changed"),console.log(x)}),[x]);var f=function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n(t.target.value),console.log(t.target.value);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:d(t.target.value),console.log(t.target.value);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),function(){var e=Object(l.a)(o.a.mark((function e(t,a){var s,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a({type:"LOGIN_START"}),e.prev=1,e.next=4,y.a.post("/api/auth/login",t);case 4:return s=e.sent,e.next=7,Object(X.io)();case 7:(n=e.sent).on("connect",(function(){n.emit("addUser",s.data._id),console.log("sock inside try block: ",n),a({type:"LOGIN_SUCCESS",payload:{user:s.data,sock:n}})})),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),m("Incorrect username or password"),a({type:"LOGIN_FAILURE",payload:e.t0});case 15:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t,a){return e.apply(this,arguments)}}()({username:a,password:i},O);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(w.jsx)("div",{className:"login",children:Object(w.jsxs)("div",{className:"loginWrapper",children:[Object(w.jsx)("div",{className:"loginTop",children:Object(w.jsx)(rt.a,{className:"loginShoppingCartIcon",style:{fontSize:220,color:"white"}})}),Object(w.jsxs)("form",{className:"loginBottom",onSubmit:k,children:[Object(w.jsxs)("div",{className:"loginInputWrapper",children:[Object(w.jsx)(ot.a,{style:{position:"absolute",color:"white",fontSize:32,top:32,left:10}}),Object(w.jsx)("input",{placeholder:"USERNAME",onChange:f,value:a,required:!0,className:"loginInput"})]}),Object(w.jsxs)("div",{className:"loginInputWrapper",children:[Object(w.jsx)(ut.a,{style:{position:"absolute",color:"white",fontSize:32,top:32,left:10}}),Object(w.jsx)("input",{placeholder:"PASSWORD",required:!0,onChange:N,value:i,className:"loginInput",type:"password"})]}),Object(w.jsx)("div",{className:"loginErrorMessageWrapper",children:b}),Object(w.jsx)("button",{className:"loginButton",type:"submit",disabled:v,children:v?Object(w.jsx)(oe.a,{color:"white",size:"20px"}):"LOGIN"}),Object(w.jsx)(g.b,{to:"/register",className:"loginBottomLink",children:"New to ReHash? Sign up now!"})]})]})})}a(374);var jt=a(72);function pt(e){var t=e.active,a=e.userId,n=e.lastMessageText,c=e.lastMessageTime,r=e.online,i=Object(s.useState)(""),d=Object(u.a)(i,2),j=d[0],p=d[1],b=Object(s.useState)(null),m=Object(u.a)(b,2),h=m[0],x=m[1];return Object(s.useEffect)((function(){console.log("lastMessageText updated. the new message is: ",n)}),[n]),Object(s.useEffect)((function(){c&&p(Object(jt.a)(c));var e=setInterval((function(){c&&j!==Object(jt.a)(c)&&p(Object(jt.a)(c))}),6e4);return function(){return clearInterval(e)}}),[c]),Object(s.useEffect)((function(){(function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y()("/api/users?userId="+a);case 3:return t=e.sent,e.next=6,x(t.data);case 6:console.log("successfully got user"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}})()()}),[a]),Object(w.jsxs)("div",{className:t?"conversation conversationActive":"conversation",children:[Object(w.jsxs)("div",{className:"conversationLeft",children:[Object(w.jsx)("img",{src:(null===h||void 0===h?void 0:h.profilePicture)?"https://firebasestorage.googleapis.com/v0/b/projectrehash-e91c0.appspot.com/o/"+h.profilePicture:"https://firebasestorage.googleapis.com/v0/b/projectrehash-e91c0.appspot.com/o/utils%2FnoAvatar.png?alt=media&token=e42cd680-8605-49a8-a125-1dc70a68beb4",alt:"",className:"conversationImg"}),r?Object(w.jsx)("div",{className:"conversationBadge"}):Object(w.jsx)(w.Fragment,{})]}),Object(w.jsxs)("div",{className:"conversationRight",children:[Object(w.jsxs)("div",{className:"conversationRightTop",children:[Object(w.jsx)("div",{className:"conversationName",children:null===h||void 0===h?void 0:h.username}),Object(w.jsx)("div",{className:"conversationStatus",children:j})]}),Object(w.jsx)("span",{className:"conversationLastMsg",children:n})]})]})}a(375);function bt(e){var t=e.message,a=e.own,n=e.pictureLink,c=Object(s.useState)(""),r=Object(u.a)(c,2),i=r[0],o=r[1],l=Object(s.useState)(!1),d=Object(u.a)(l,2),j=d[0],p=d[1];return Object(s.useEffect)((function(){t&&o(Object(jt.a)(t.createdAt));var e=setInterval((function(){i!==Object(jt.a)(t.createdAt)&&o(Object(jt.a)(t.createdAt))}),6e4);return function(){return clearInterval(e)}}),[t]),a?Object(w.jsxs)("div",{className:"messageOwn",children:[Object(w.jsxs)("div",{className:"messageTopOwn",children:[Object(w.jsx)("img",{className:"messageImgOwn",src:n,alt:""}),Object(w.jsx)("p",{className:"messageTextOwn",onClick:function(){p(!j)},children:t.text})]}),j?Object(w.jsx)("div",{className:"messageBottom",children:i}):Object(w.jsx)(w.Fragment,{})]}):Object(w.jsxs)("div",{className:"message",children:[Object(w.jsxs)("div",{className:"messageTop",children:[Object(w.jsx)("img",{className:"messageImg",src:n,alt:""}),Object(w.jsx)("p",{className:"messageText",onClick:function(){p(!j)},children:t.text})]}),j?Object(w.jsx)("div",{className:"messageBottom",children:i}):Object(w.jsx)(w.Fragment,{})]})}a(376);function mt(){var e=Object(s.useState)([]),t=Object(u.a)(e,2),a=t[0],n=t[1],c=Object(s.useState)(null),r=Object(u.a)(c,2),i=r[0],d=r[1],j=Object(s.useState)([]),p=Object(u.a)(j,2),b=p[0],m=p[1],h=Object(s.useState)(""),g=Object(u.a)(h,2),O=g[0],v=g[1],f=Object(s.useState)(null),N=Object(u.a)(f,2),k=N[0],I=N[1],S=Object(s.useState)([]),P=Object(u.a)(S,2),_=P[0],T=P[1],U=Object(s.useState)(""),L=Object(u.a)(U,2),D=L[0],E=L[1],R=Object(s.useState)(null),B=Object(u.a)(R,2),F=B[0],A=B[1],M=Object(s.useState)(""),G=Object(u.a)(M,2),W=G[0],H=G[1],z="https://firebasestorage.googleapis.com/v0/b/projectrehash-e91c0.appspot.com/o/",J="https://firebasestorage.googleapis.com/v0/b/projectrehash-e91c0.appspot.com/o/utils%2FnoAvatar.png?alt=media&token=e42cd680-8605-49a8-a125-1dc70a68beb4",q=Object(s.useRef)(),K=Object(x.h)().initialActiveConvoId,$=Object(s.useContext)(te),Y=$.user,V=$.sockio,Z=Object(x.g)();Object(s.useEffect)((function(){(function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("0"===K){e.next=6;break}return console.log("initialActiveConvoId is: "+K),e.next=4,y.a.get("/api/conversations/id/"+K);case 4:t=e.sent,d(t.data);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[K]),Object(s.useEffect)((function(){console.log("socket is: ",null===V||void 0===V?void 0:V.id),V&&V.on("getMessage",(function(e){I({sender:e.senderId,text:e.text,createdAt:Date.now()})}))}),[V]),Object(s.useEffect)((function(){k&&(null===i||void 0===i?void 0:i.members.includes(k.sender))&&m((function(e){return[].concat(Object(Se.a)(e),[k])}))}),[k,i]),Object(s.useEffect)((function(){V&&Y&&V.on("getUsers",(function(e){console.log("getUser received on client side"),console.log(e),T(e.map((function(e){return e.userId})))}))}),[Y,V]),Object(s.useEffect)((function(){(function(){var e=Object(l.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(D&&D.length>=3&&Y)){e.next=8;break}return e.next=4,y.a.get("/api/conversations/search/"+Y._id+"/searchText?searchText="+D);case 4:200===(t=e.sent).status&&n(t.data),e.next=13;break;case 8:if(!Y){e.next=13;break}return e.next=11,y.a.get("/api/conversations/search/"+Y._id+"/searchText");case 11:200===(a=e.sent).status&&n(a.data);case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),console.log(e.t0);case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(){return e.apply(this,arguments)}})()()}),[Y,b,_,D]),Object(s.useEffect)((function(){(function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.a.get("/api/messages/"+(null===i||void 0===i?void 0:i._id));case 3:t=e.sent,m(t.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}})()()}),[i]),Object(s.useEffect)((function(){var e=null===i||void 0===i?void 0:i.members.find((function(e){return e!==Y._id}));(function(){var t=Object(l.a)(o.a.mark((function t(){var a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,y.a.get("/api/users?userId="+e);case 3:return a=t.sent,t.next=6,A(a.data);case 6:t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}})()()}),[Y,i]),Object(s.useEffect)((function(){var e=function(){var e=Object(l.a)(o.a.mark((function e(){var t,a,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t="",e.prev=1,!F){e.next=10;break}return e.next=5,y.a.get("/api/users?userId="+(null===F||void 0===F?void 0:F._id));case 5:a=e.sent,s=a.data.lastActive,console.log("newLastActive: ",s),t=Object(jt.a)(s),console.log("LOOK AT ME: TIMEAGO ",t);case 10:e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),t=Object(jt.a)(null===F||void 0===F?void 0:F.lastActive),console.log(e.t0);case 16:H("Active "+t);case 17:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(){return e.apply(this,arguments)}}();e();var t=setInterval((function(){e()}),5e3);return function(){return clearInterval(t)}}),[F]);var Q=function(){var e=Object(l.a)(o.a.mark((function e(t){var a,s,n,c,r,l;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===O){e.next=26;break}return t.preventDefault(),e.next=4,v("");case 4:return a={sender:Y._id,text:O,conversationId:i._id},e.prev=5,e.next=8,y.a.post("/api/messages",a);case 8:return s=e.sent,n=s.data.text,c=s.data.createdAt,e.next=13,y.a.put("/api/conversations/"+i._id+"/lastmessage",{lastMessageText:n,lastMessageTime:c});case 13:return r=e.sent,console.log(r),console.log("currentChat is: ",i),e.next=18,m([].concat(Object(Se.a)(b),[s.data]));case 18:console.log("updated messages. the new messaged sent is: ",s.data.text),l=i.members.find((function(e){return e!==Y._id})),V.emit("sendMessage",{senderId:Y._id,receiverId:l,text:O}),e.next=26;break;case 23:e.prev=23,e.t0=e.catch(5),console.log(e.t0);case 26:case"end":return e.stop()}}),e,null,[[5,23]])})));return function(t){return e.apply(this,arguments)}}(),X=function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("generate agreement is clicked"),e.next=3,y.a.post("/api/agreements");case 3:(t=e.sent).data&&t.data._id&&v("Your agreement code has been generated: "+t.data._id);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(s.useEffect)((function(){var e;null===(e=q.current)||void 0===e||e.scrollIntoView({behavior:"auto"})}),[b]);var ee=function(){var e=Object(l.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("Enter"!==t.key){e.next=17;break}if(t.preventDefault(),!((D.match(/^\s*\n*\t*$/)||[]).length>0||D.length<3)){e.next=6;break}console.log("searchText is empty"),e.next=17;break;case 6:if(!Y){e.next=17;break}return e.prev=7,e.next=10,y.a.get("/api/conversations/search/"+Y._id+"/searchText?searchText="+D);case 10:200===(a=e.sent).status&&n(a.data),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(7),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[7,14]])})));return function(t){return e.apply(this,arguments)}}();return Object(w.jsxs)("div",{children:[Object(w.jsx)(C,{currentUser:Y}),Object(w.jsxs)("div",{className:"messenger",children:[Object(w.jsx)("div",{className:"chatMenu",children:Object(w.jsxs)("div",{className:"chatMenuWrapper",children:[Object(w.jsx)("input",{placeholder:"Search for users (at least 3 characters)...",className:"chatMenuInput",onChange:function(e){return E(e.target.value)},onKeyDown:ee,value:D}),a.map((function(e){var t=e.members.find((function(e){return e!==Y._id}));return Object(w.jsx)("div",{onClick:function(){return d(e)},children:Object(w.jsx)(pt,{online:_.includes(t),lastMessageText:e.lastMessageText,lastMessageTime:e.lastMessageTime,userId:t,active:!!i&&e._id===i._id})})}))]})}),Object(w.jsx)("div",{className:"chatBox",children:Object(w.jsx)("div",{className:"chatBoxWrapper",children:i?Object(w.jsxs)(w.Fragment,{children:[Object(w.jsxs)("div",{className:"chatBoxHeader",children:[Object(w.jsxs)("div",{className:"chatBoxHeaderLeft",children:[Object(w.jsx)("img",{src:(null===F||void 0===F?void 0:F.profilePicture)?z+F.profilePicture:J,alt:"",className:"chatBoxHeaderImg"}),Object(w.jsxs)("div",{className:"chatBoxHeaderContent",children:[Object(w.jsx)("div",{className:"chatBoxHeaderName",children:null===F||void 0===F?void 0:F.username}),Object(w.jsx)("div",{className:"chatBoxHeaderStatus",children:_.includes(null===F||void 0===F?void 0:F._id)?"Online now":W})]})]}),Object(w.jsx)("button",{className:"chatBoxViewProfileButton",onClick:function(){Z.push("/profile/"+F.username+"/listings")},children:"View Profile"})]}),Object(w.jsx)("div",{className:"chatBoxTop",children:b.map((function(e){return Object(w.jsx)("div",{ref:q,children:Object(w.jsx)(bt,{message:e,own:e.sender===(null===Y||void 0===Y?void 0:Y._id),pictureLink:e.sender===(null===Y||void 0===Y?void 0:Y._id)?(null===Y||void 0===Y?void 0:Y.profilePicture)?z+Y.profilePicture:J:(null===F||void 0===F?void 0:F.profilePicture)?z+F.profilePicture:J})})}))}),Object(w.jsxs)("div",{className:"chatBoxBottom",children:[Object(w.jsx)("textarea",{className:"chatMessageInput",placeholder:"Write a message ...",onChange:function(e){return v(e.target.value)},value:O,onKeyDown:function(e){"Enter"===e.key&&(e.preventDefault(),console.log("new message when eneter is pressed: ",O),v(O),""!==O&&(Q(e),console.log("passing to handleSendMessage")))}}),Object(w.jsx)("button",{className:"chatAgreementButton",onClick:X,children:"Generate Agreement"}),Object(w.jsx)("button",{className:"chatSubmitButton",onClick:Q,children:"Send"})]})]}):Object(w.jsx)("span",{className:"noConversationText",children:"Open a conversation to start a chat"})})})]})]})}a(377);function ht(){var e=Object(s.useContext)(te),t=e.user,a=(e.sockio,Object(x.h)().username),n=Object(s.useState)(null),c=Object(u.a)(n,2),r=c[0],i=c[1],d=Object(s.useState)([]),j=Object(u.a)(d,2),p=j[0],b=j[1];Object(s.useEffect)((function(){(function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=6;break}return e.next=3,y.a.get("/api/users?username="+a);case 3:t=e.sent,i(t.data),console.log("profileUser is: "+t.data);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[a]),Object(s.useEffect)((function(){(function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=5;break}return e.next=3,y.a.get("/api/groups/filter?userId="+r._id);case 3:t=e.sent,b(t.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[r]);return Object(w.jsxs)("div",{children:[Object(w.jsx)("div",{className:"myGroupsPageTopSection",children:Object(w.jsx)(C,{currentUser:t,handleUpdateGroup:function(e){e&&e.length>0&&e[0]&&b([].concat(Object(Se.a)(e),Object(Se.a)(p)))}})}),Object(w.jsxs)("div",{className:"myGroupsPageMiddleSection",children:[Object(w.jsx)(Oe,{className:"sidebar",sidebarUser:r}),Object(w.jsx)("div",{className:"myGroupsPageMiddleSectionRight",children:Object(w.jsxs)("div",{className:"myGroupsPageMiddleSectionRightHeader",children:[Object(w.jsx)("span",{className:"myGroupsPageMiddleSectionRightHeaderText",children:"Groups You Have Joined"}),Object(w.jsx)("div",{className:"myGroupsPageGroupIconWrapper",children:Object(w.jsxs)(f.a,{className:"myGroupsPageGroupIconContainer",xl:5,lg:4,md:3,xs:2,children:[Object(w.jsx)(N.a,{children:Object(w.jsx)(se,{groupImg:"https://firebasestorage.googleapis.com/v0/b/projectrehash-e91c0.appspot.com/o/utils%2Fadd.jpg?alt=media&token=b5df608c-c140-4c83-a823-d9ae1272a4fa",create:!0})}),p.map((function(e){return Object(w.jsx)(N.a,{children:Object(w.jsx)(se,{groupImg:e.groupImg,groupName:e.groupName,groupId:e._id})},e._id)}))]})})]})})]})]})}a(378);function xt(){var e=Object(s.useContext)(te),t=e.user,a=e.sockio,n=e.dispatch,c=(Object(x.h)().username,Object(s.useState)(null)),r=Object(u.a)(c,2),i=r[0],d=r[1],j="https://firebasestorage.googleapis.com/v0/b/projectrehash-e91c0.appspot.com/o/",p=Object(s.useState)({showPassword:!1}),b=Object(u.a)(p,2),m=b[0],h=b[1],g=Object(s.useState)({}),O=Object(u.a)(g,2),v=O[0],k=O[1],I=Object(s.useState)({}),P=Object(u.a)(I,2),_=P[0],T=P[1],U=Object(s.useState)(!1),L=Object(u.a)(U,2),D=L[0],E=L[1],R=Object(s.useState)(!1),B=Object(u.a)(R,2),F=B[0],A=B[1],M=Object(s.useState)(!1),G=Object(u.a)(M,2),W=G[0],H=G[1];Object(s.useEffect)((function(){console.log("user is changed"),console.log(t)}),[t]);Object(s.useEffect)((function(){return function(){i&&URL.revokeObjectURL(i.preview)}}),[i]);var z=function(){var e=Object(l.a)(o.a.mark((function e(s){var c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s.preventDefault(),i){e.next=5;break}T({imgFile:"No image uploaded!"}),e.next=9;break;case 5:return c=function(){var e=Object(l.a)(o.a.mark((function e(){var s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{A(!0),s=Date.now()+i.name,console.log("filename is: "+s),Ge.ref("person/".concat(s)).put(i).on("state_changed",(function(e){var t=Math.round(e.bytesTransferred/e.totalBytes*100);console.log("progress is: "+t.toString())}),(function(e){console.log(e),A(!1)}),Object(l.a)(o.a.mark((function e(){var c,r,i,l,u,d;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ge.ref("person").child("".concat(s)).getDownloadURL();case 3:return c=e.sent,r=c.replace(j,""),console.log(r),i={profilePicture:r},console.log(i),l=Object(Ue.a)(Object(Ue.a)({},t),i),console.log(l),e.next=12,y.a.put("/api/users/"+t._id,{profilePicture:r});case 12:if(200!==e.sent.status){e.next=27;break}if(u=t.profilePicture,n({type:"UPDATE",payload:{user:l,sock:a}}),A(!1),!u||""===u){e.next=27;break}return e.prev=18,d=Ge.refFromURL(j+u),e.next=22,d.delete();case 22:e.next=27;break;case 24:e.prev=24,e.t0=e.catch(18),console.log(e.t0);case 27:e.next=33;break;case 29:e.prev=29,e.t1=e.catch(0),console.log(e.t1),A(!1);case 33:case"end":return e.stop()}}),e,null,[[0,29],[18,24]])}))))}catch(c){console.log(c),A(!1)}case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.next=8,c();case 8:d(null);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),J=function(e,t){h(Object(Ue.a)(Object(Ue.a)({},m),{},Object(Te.a)({},e,t))),v[e]&&k(Object(Ue.a)(Object(Ue.a)({},v),{},Object(Te.a)({},e,null))),D&&E(!1)},q=function(){var e=Object(l.a)(o.a.mark((function e(a){var s,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),E(!1),s=K(),!(Object.keys(s).length>0)){e.next=8;break}k(s),console.log(s),e.next=11;break;case 8:return n=function(){var e=Object(l.a)(o.a.mark((function e(){var a,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,H(!0),e.next=4,y.a.put("/api/auth/updatePassword/"+t._id,{currentPassword:m.currentPassword,newPassword:m.newPassword});case 4:(a=e.sent)&&200===a.status&&"User password has been updated"===a.data.message?(E(!0),h({showPassword:!1,confirmPassword:"",newPassword:"",currentPassword:""}),H(!1),alert("password updated")):a&&200===a.status&&"wrong password"===a.data.message&&(s={currentPassword:"Wrong Password!"},k(Object(Ue.a)(Object(Ue.a)({},v),s)),H(!1),alert("wrong password")),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0),H(!1);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),e.next=11,n();case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),K=function(){var e=m.currentPassword,t=m.newPassword,a=m.confirmPassword,s={};return e&&""!==e||(s.currentPassword="Current password cannot be empty!"),(!t||t.length<6)&&(s.newPassword="New password must have at least 6 characters!"),a&&a===t||(s.confirmPassword="New and confirm passwords do not match!"),s};return Object(w.jsxs)("div",{children:[Object(w.jsx)(C,{currentUser:t}),Object(w.jsxs)("div",{className:"settingsContainer",children:[Object(w.jsx)(Oe,{sidebarUser:t}),Object(w.jsxs)("div",{className:"settingsRight",children:[Object(w.jsx)("span",{className:"settingsHeader",children:"Settings"}),Object(w.jsxs)(ue.a,{className:"settingsWrapper",children:[Object(w.jsxs)($.a,{style:{width:"60em",height:"19em"},className:"settingsUserProfileContainer shadow p-3 mb-5 bg-white rounded",children:[Object(w.jsx)("span",{className:"settingsUserProfileHeader",children:"User Profile"}),Object(w.jsx)(ue.a,{children:Object(w.jsxs)(f.a,{children:[Object(w.jsx)(N.a,{children:Object(w.jsx)("img",{src:i&&i.preview?i.preview:t&&t.profilePicture?j+t.profilePicture:"https://firebasestorage.googleapis.com/v0/b/projectrehash-e91c0.appspot.com/o/utils%2FuserProfile.png?alt=media&token=b74213fc-9db4-4208-b4fa-69b07e99aad5",alt:"",className:"userProfileImg"})}),Object(w.jsx)(N.a,{children:Object(w.jsxs)("div",{className:"settingsImgInstructions",children:[Object(w.jsx)("div",{className:"settingsImgInstructionsText",children:"Upload a profile picture of yourself to help others know more about you!"}),Object(w.jsxs)(De.a.Group,{children:[Object(w.jsx)(De.a.Control,{className:"imgUploadButton",as:"input",name:"image-upload",type:"file",accept:"image/*",onChange:function(e){var t=Object.assign(e.target.files[0],{preview:URL.createObjectURL(e.target.files[0])});d(t),t&&_.imgFile&&T({imgFile:null}),console.log(t.preview)},isInvalid:!!_.imgFile}),Object(w.jsx)(De.a.Control.Feedback,{type:"invalid",children:_.imgFile})]}),Object(w.jsx)(S.a,{className:"changeProfilePictureButton",variant:"warning",onClick:z,disabled:F,children:F?Object(w.jsx)(oe.a,{color:"white",size:"20px"}):"Change profile picture"})]})})]})})]}),Object(w.jsxs)($.a,{style:{width:"60em"},className:"settingsPasswordContainer shadow p-3 mb-5 bg-white rounded",children:[Object(w.jsx)("span",{className:"settingsPasswordHeader",children:"Password"}),Object(w.jsxs)(De.a,{children:[Object(w.jsxs)("div",{className:"passwordInputWrapper",children:[Object(w.jsxs)(De.a.Group,{controlId:"oldPassword",children:[Object(w.jsx)(De.a.Control,{className:"passwordInput",name:"currentPassword",type:m.showPassword?"text":"password",placeHolder:"Current Password",value:m.currentPassword,onChange:function(e){return J("currentPassword",e.target.value)},isInvalid:!!v.currentPassword,isValid:D}),Object(w.jsx)(De.a.Control.Feedback,{type:"invalid",children:v.currentPassword})]}),Object(w.jsxs)(De.a.Group,{controlId:"newPassword",children:[Object(w.jsx)(De.a.Control,{className:"passwordInput",name:"newPassword",type:m.showPassword?"text":"password",placeHolder:"New Password",value:m.newPassword,onChange:function(e){return J("newPassword",e.target.value)},isInvalid:!!v.newPassword,isValid:D}),Object(w.jsx)(De.a.Control.Feedback,{type:"invalid",children:v.newPassword})]}),Object(w.jsxs)(De.a.Group,{controlId:"confirmPassword",children:[Object(w.jsx)(De.a.Control,{className:"passwordInput",name:"confirmPassword",type:m.showPassword?"text":"password",placeHolder:"Confirm Password",value:m.confirmPassword,onChange:function(e){return J("confirmPassword",e.target.value)},isInvalid:!!v.confirmPassword,isValid:D}),Object(w.jsx)(De.a.Control.Feedback,{type:"invalid",children:v.confirmPassword}),Object(w.jsx)(De.a.Control.Feedback,{type:"valid",children:'"Password updated successfully"'})]})]}),Object(w.jsxs)("div",{children:[Object(w.jsx)("input",{type:"checkbox",checked:m.showPassword,onClick:function(){return J("showPassword",!m.showPassword)}}),Object(w.jsx)("label",{className:"checkboxLabel",children:"Show input"})]}),Object(w.jsx)("div",{children:Object(w.jsx)(S.a,{className:"passwordButton",variant:"warning",onClick:q,disabled:W,children:W?Object(w.jsx)(oe.a,{color:"white",size:"20px"}):"Update password"})})]})]})]})]})]})]})}a(379),a(380);var gt=a(246),Ot=a.n(gt),vt=a(245),ft=a.n(vt);function Nt(e){var t=e.group,a=e.isGroupMember,n=e.handleLeave,c=e.handleJoin,r=e.handleUpdateGroup,i="https://firebasestorage.googleapis.com/v0/b/projectrehash-e91c0.appspot.com/o/",d=Object(s.useContext)(te),j=d.user,p=(d.sockio,Object(s.useState)(!1)),b=Object(u.a)(p,2),m=b[0],h=b[1],g=Object(s.useState)(null),O=Object(u.a)(g,2),v=O[0],f=O[1],N=Object(s.useState)(""),k=Object(u.a)(N,2),I=k[0],C=k[1],S=Object(s.useState)(""),P=Object(u.a)(S,2),_=P[0],T=P[1],U=Object(s.useState)(""),L=Object(u.a)(U,2),D=L[0],E=L[1],R=Object(s.useState)(""),B=Object(u.a)(R,2),F=B[0],A=B[1],M=Object(s.useState)(!1),G=Object(u.a)(M,2),W=G[0],H=G[1],z=Object(s.useState)(""),J=Object(u.a)(z,2),q=J[0],K=J[1],$=Object(x.g)();Object(s.useEffect)((function(){t&&A(t.description+"(Delete this and press 'Enter' when done editing)")}),[t]);var Y=function(){var e=Object(l.a)(o.a.mark((function e(a){var s,n,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("Enter"!==a.key){e.next=43;break}if(a.preventDefault(),T(_),!((_.match(/^\s*\n*\t*$/)||[]).length>0)){e.next=8;break}console.log("invitation name is empty!"),T(""),e.next=43;break;case 8:return console.log("trying to find user to invite..."),e.prev=9,e.next=12,y.a.get("/api/users?username="+_);case 12:if(200!==(s=e.sent).status||!t||!s.data){e.next=37;break}if(!t.members.includes(s.data._id)){e.next=18;break}C("User already in this group!"),e.next=37;break;case 18:return e.next=20,y.a.get("/api/notifications/filter?userId="+s.data._id+"&invitationId="+t._id);case 20:if(!(200===(n=e.sent).status&&n.data.length>0)){e.next=32;break}if(!n.data[0].senderName.includes(j.username)){e.next=26;break}C("User previously invited and has not responded!"),e.next=30;break;case 26:return e.next=28,y.a.put("/api/notifications/"+n.data[0]._id+"/addSender/"+j.username);case 28:200===e.sent.status?(T(""),E("Invitation sent!")):C("Server error. Unable to send notification");case 30:e.next=37;break;case 32:return c={senderName:[j.username],receiverId:s.data._id,invitationId:t._id,invitationName:t.groupName},e.next=35,y.a.post("/api/notifications",c);case 35:200===e.sent.status?(T(""),E("Invitation sent!")):C("Server error. Unable to send notification");case 37:e.next=43;break;case 39:e.prev=39,e.t0=e.catch(9),console.log(e.t0),C("User not found!");case 43:case"end":return e.stop()}}),e,null,[[9,39]])})));return function(t){return e.apply(this,arguments)}}(),V=function(){var e=Object(l.a)(o.a.mark((function e(a){var s,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("Enter"!==a.key){e.next=23;break}if(a.preventDefault(),A(F),!((F.match(/^\s*\n*\t*$/)||[]).length>0)){e.next=7;break}return console.log("editedDescription is empty!"),K("Description cannot be empty!"),e.abrupt("return");case 7:if(!(F.length>200)){e.next=10;break}return K("Description cannot exceed 200 characters!"),e.abrupt("return");case 10:return e.prev=10,s={description:F},e.next=14,y.a.put("/api/groups/"+t._id,s);case 14:200===(n=e.sent).status&&(H(!1),r(n.data)),e.next=23;break;case 18:e.prev=18,e.t0=e.catch(10),console.log(e.t0),K("Server error: unable to update!"),H(!1);case 23:case"end":return e.stop()}}),e,null,[[10,18]])})));return function(t){return e.apply(this,arguments)}}(),Z=Object(w.jsx)("div",{className:"inviteComponentWrapper",children:Object(w.jsxs)("div",{className:"inviteComponentContainer",children:[Object(w.jsx)("span",{className:"inviteComponentText",children:"Who do you want to invite?"}),Object(w.jsx)("input",{className:"inviteComponentInput",placeholder:"Input name and Enter...",maxlength:"30",value:_,onChange:function(e){T(e.target.value),""!==I&&C(""),""!==D&&E("")},onKeyDown:Y}),Object(w.jsx)("div",{className:"inviteComponentErrorMessage",children:I}),Object(w.jsx)("div",{className:"inviteComponentSuccessMessage",children:D})]})}),Q=function(){var e=Object(l.a)(o.a.mark((function e(a){var s,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.target.files[0]){s=a.target.files[0],console.log(s);try{n=Date.now()+s.name,console.log("filename is: "+n),Ge.ref("group/".concat(n)).put(s).on("state_changed",(function(e){var t=Math.round(e.bytesTransferred/e.totalBytes*100);console.log("progress is: "+t.toString())}),(function(e){console.log(e)}),Object(l.a)(o.a.mark((function e(){var a,s,c,r,l;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ge.ref("group").child("".concat(n)).getDownloadURL();case 2:return a=e.sent,s=a.replace(i,""),console.log(s),c={groupImg:s},console.log(c),e.next=9,y.a.put("/api/groups/"+t._id,c);case 9:if(200!==e.sent.status){e.next=23;break}if(r=v,f(s),!(r&&""!==r||t&&""!==t.groupImg)){e.next=23;break}return e.prev=14,r&&""!==r?(console.log("taking newImgLink"),l=Ge.refFromURL(i+r)):(console.log("taking groupImg link"),l=Ge.refFromURL(i+t.groupImg)),e.next=18,l.delete();case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(14),console.log(e.t0);case 23:case"end":return e.stop()}}),e,null,[[14,20]])}))))}catch(c){console.log(c)}}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(w.jsx)("div",{className:"GroupSidebarWrapper",children:Object(w.jsxs)(je.a,{textColor:"black",backgroundColor:"#FFD68D",children:[Object(w.jsx)(je.d,{prefix:Object(w.jsx)("i",{className:"fa fa-bars fa-large"}),children:Object(w.jsxs)("div",{className:"groupProfileDiv",children:[Object(w.jsx)("img",{className:"groupProfile",src:v?i+v:(null===t||void 0===t?void 0:t.groupImg)?i+t.groupImg:"https://firebasestorage.googleapis.com/v0/b/projectrehash-e91c0.appspot.com/o/utils%2FnoImageUploaded.png?alt=media&token=14da969b-3ca4-4a37-9f4c-16bed3c98a7e",alt:"",onClick:function(){j&&t&&j._id===t.creatorId?(alert("Close this dialogue and select image to upload"),document.getElementById("groupImageUploadInput").click()):alert("You must be logged in and be the creator of this group to change the group photo")}}),Object(w.jsx)("input",{style:{display:"none"},type:"file",id:"groupImageUploadInput",accept:"image/*",onChange:Q})]})}),Object(w.jsx)(je.d,{children:Object(w.jsxs)("div",{className:"groupJoinInviteContentWrapper",children:[Object(w.jsx)("div",{className:"groupNameWrapper",children:Object(w.jsx)("div",{className:"groupName",children:Object(w.jsx)("div",{className:"groupNameText",children:(null===t||void 0===t?void 0:t.groupName)?function(e){for(var t=e,a=[];t.length>21;)a.push(t.slice(0,21)),t=t.slice(21);return a.push(t),a.map((function(e){return Object(w.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:e})}))}(t.groupName):"No Group Name"})})}),a?Object(w.jsxs)("div",{children:[Object(w.jsx)("div",{className:"groupInviteButtonWrapper",children:Object(w.jsx)("div",{className:"groupInviteButton",onClick:function(){h(!m)},children:Object(w.jsx)("span",{className:"groupInviteButtonText",children:"+ Invite"})})}),m?Z:Object(w.jsx)(w.Fragment,{})]}):Object(w.jsx)("div",{className:"groupJoinButtonWrapper",children:Object(w.jsx)("div",{className:"groupJoinButton",onClick:c,children:Object(w.jsx)("span",{className:"groupJoinButtonText",children:"+ Join Group"})})})]})}),Object(w.jsx)(je.b,{children:Object(w.jsxs)(je.e,{children:[Object(w.jsxs)("div",{className:"groupDescriptionContainer",children:[Object(w.jsxs)("div",{className:"groupDescriptionHeader",children:[Object(w.jsx)("div",{className:"groupDescriptionHeaderText",children:"Group Description:"}),j&&t&&j._id===t.creatorId&&!W?Object(w.jsx)("div",{className:"groupDescriptionHeaderEdit",onClick:function(){return H(!0)},children:"edit"}):Object(w.jsx)(w.Fragment,{})]}),W?Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("textarea",{className:"groupDescriptionTextArea",rows:6,maxlength:"250",value:F,onChange:function(e){""!==q&&K(""),A(e.target.value)},onKeyDown:V}),Object(w.jsx)("div",{className:"groupDescriptionError",children:q})]}):Object(w.jsx)("div",{className:"groupDescriptionContent",children:(null===t||void 0===t?void 0:t.description)?t.description:"This group creator has left no description of this group"})]}),Object(w.jsxs)(je.f,{className:"groupMenuItem",onClick:function(){t&&$.push("/groups/"+t._id+"/main")},children:[Object(w.jsx)(ft.a,{className:"groupMyPostsIcon"}),Object(w.jsx)("span",{className:"groupMyPosts",children:"Group Home"})]}),a?Object(w.jsxs)(je.f,{className:"groupMenuItem",onClick:function(){t&&$.push("/groups/"+t._id+"/myPosts")},children:[Object(w.jsx)(Ot.a,{className:"groupMyPostsIcon"}),Object(w.jsx)("span",{className:"groupMyPosts",children:"My Posts"})]}):Object(w.jsx)(w.Fragment,{})]})}),Object(w.jsx)(je.c,{children:a?Object(w.jsx)("div",{className:"groupLeaveButtonWrapper",children:Object(w.jsx)("div",{className:"groupLeaveButton",onClick:n,children:Object(w.jsx)("span",{className:"groupLeaveButtonText",children:"Leave Group"})})}):Object(w.jsx)(w.Fragment,{})})]})})}a(381);function wt(e){var t=e.handleAdd,a=Object(s.useContext)(te),n=a.user,c=(a.sockio,Object(s.useState)("")),r=Object(u.a)(c,2),i=r[0],d=r[1],j=Object(s.useState)(""),p=Object(u.a)(j,2),b=p[0],m=p[1],h=Object(s.useState)(""),x=Object(u.a)(h,2),g=x[0],O=x[1],v=Object(s.useState)(""),f=Object(u.a)(v,2),N=f[0],k=f[1],I=function(){var e=Object(l.a)(o.a.mark((function e(){var a,s,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((b.match(/^\s*\n*\t*$/)||[]).length>0)){e.next=3;break}return O("Item ID cannot be empty!"),e.abrupt("return");case 3:if(!((i.match(/^\s*\n*\t*$/)||[]).length>0)){e.next=6;break}return k("Description cannot be empty!"),e.abrupt("return");case 6:return console.log("itemId: "+b),console.log("description: "+i),e.prev=8,e.next=11,y.a.get("/api/items?itemId="+b);case 11:if((a=e.sent).data){e.next=15;break}return O("Item with given Item ID does not exist!"),e.abrupt("return");case 15:if(n&&a.data.userId===n._id){e.next=18;break}return O("Item with given ID does not belong to you!"),e.abrupt("return");case 18:s=b,c=i,m(""),d(""),t(s,c),e.next=29;break;case 25:e.prev=25,e.t0=e.catch(8),console.log(e.t0),O("Item with given Item ID does not exist!");case 29:case"end":return e.stop()}}),e,null,[[8,25]])})));return function(){return e.apply(this,arguments)}}();return Object(w.jsx)("div",{className:"groupSharePostWrapper",children:Object(w.jsxs)("div",{className:"groupSharePostContainer",children:[Object(w.jsx)("div",{className:"sharePostTop",children:Object(w.jsxs)("div",{className:"sharePostTopContainer",children:[Object(w.jsx)("img",{className:"sharePostProfileImg",src:(null===n||void 0===n?void 0:n.profilePicture)?"https://firebasestorage.googleapis.com/v0/b/projectrehash-e91c0.appspot.com/o/"+n.profilePicture:"https://firebasestorage.googleapis.com/v0/b/projectrehash-e91c0.appspot.com/o/utils%2FnoAvatar.png?alt=media&token=e42cd680-8605-49a8-a125-1dc70a68beb4",alt:""}),Object(w.jsx)("span",{className:"sharePostProfileText",children:(null===n||void 0===n?void 0:n.username)?n.username:"No Name"})]})}),Object(w.jsx)("div",{className:"sharePostContainer",children:Object(w.jsxs)("div",{className:"sharePostContainerWrapper",children:[Object(w.jsxs)("div",{className:"sharePostContainerTop",children:[Object(w.jsxs)("div",{className:"sharePostContainerItemId",children:[Object(w.jsx)("input",{value:b,maxlength:"30",onChange:function(e){m(e.target.value),""!==g&&O("")},className:"sharePostContainerItemIdInput",placeholder:"Item ID (can be copied from items page)"}),Object(w.jsx)("span",{className:"sharePostContainerErrorMessage",children:g})]}),Object(w.jsx)("div",{className:"sharePostButton",onClick:I,children:"Post"})]}),Object(w.jsxs)("div",{className:"sharePostContainerTextArea",children:[Object(w.jsx)("textarea",{value:i,maxlength:"1000",onChange:function(e){d(e.target.value),""!==N&&k("")},className:"sharePostContainerTextAreaInput",placeholder:"Describe your post..."}),Object(w.jsx)("span",{className:"sharePostContainerErrorMessage",children:N})]})]})})]})})}a(382);var kt=a(247),It=a.n(kt),yt=a(248),Ct=a.n(yt),St=a(249),Pt=a.n(St),_t=a(250),Tt=a.n(_t);a(383);function Ut(e){var t=e.commentId,a=e.commentText,n=e.commentUserId,c=e.own,r=e.handleDelete,i=Object(s.useState)(null),d=Object(u.a)(i,2),j=d[0],p=d[1];return Object(s.useEffect)((function(){(function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y()("/api/users?userId="+n);case 3:return t=e.sent,e.next=6,p(t.data);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}})()()}),[n]),Object(w.jsx)("div",{className:"commentWrapper",children:Object(w.jsxs)("div",{className:"commentContainer",children:[Object(w.jsxs)("div",{className:"commentUserDetails",children:[Object(w.jsx)("img",{className:"commentProfileImg",src:j&&j.profilePicture?"https://firebasestorage.googleapis.com/v0/b/projectrehash-e91c0.appspot.com/o/"+j.profilePicture:"https://firebasestorage.googleapis.com/v0/b/projectrehash-e91c0.appspot.com/o/utils%2FnoAvatar.png?alt=media&token=e42cd680-8605-49a8-a125-1dc70a68beb4",alt:""}),Object(w.jsx)("div",{className:"commentProfileText",children:(null===j||void 0===j?void 0:j.username)?j.username:"No Name"}),c?Object(w.jsx)("div",{className:"commentDelete",onClick:function(){return r(t)},children:"delete"}):Object(w.jsx)(w.Fragment,{})]}),Object(w.jsx)("div",{className:"commentUserContent",children:a})]})})}function Lt(e){var t=e.post,a=e.handleDelete,n=e.canCommentAndLike,c=Object(s.useContext)(te),r=c.user,i=(c.sockio,Object(s.useState)(null)),d=Object(u.a)(i,2),j=d[0],p=d[1],b=Object(s.useState)([]),m=Object(u.a)(b,2),h=m[0],g=m[1],O=Object(s.useState)(null),v=Object(u.a)(O,2),k=v[0],I=v[1],C=Object(s.useState)(""),S=Object(u.a)(C,2),P=S[0],_=S[1],T=Object(s.useState)(!1),U=Object(u.a)(T,2),L=U[0],D=U[1],E=Object(s.useState)(0),R=Object(u.a)(E,2),B=R[0],F=R[1],A=Object(x.g)();Object(s.useEffect)((function(){(function(){var e=Object(l.a)(o.a.mark((function e(){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.a.get("/api/users?userId="+(null===t||void 0===t?void 0:t.postUserId));case 3:return a=e.sent,e.next=6,p(a.data);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}})()()}),[t]),Object(s.useEffect)((function(){(function(){var e=Object(l.a)(o.a.mark((function e(){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.a.get("/api/comments/filter?postId="+(null===t||void 0===t?void 0:t._id));case 3:return a=e.sent,e.next=6,g(a.data);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}})()()}),[t]),Object(s.useEffect)((function(){(function(){var e=Object(l.a)(o.a.mark((function e(){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.a.get("/api/items?itemId="+(null===t||void 0===t?void 0:t.itemId));case 3:return a=e.sent,e.next=6,I(a.data);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}})()()}),[t]),Object(s.useEffect)((function(){t&&(F(t.likedBy.length),D(!!r&&t.likedBy.includes(r._id)))}),[t,r]);var M=function(){var e=Object(l.a)(o.a.mark((function e(a){var s,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("Enter"!==a.key){e.next=22;break}if(a.preventDefault(),_(P),!((P.match(/^\s*\n*\t*$/)||[]).length>0)){e.next=8;break}console.log("comment is empty!"),_(""),e.next=22;break;case 8:return console.log("adding new comment..."),s={postId:t._id,commentUserId:r._id,commentText:P},e.prev=10,_(""),e.next=14,y.a.post("/api/comments",s);case 14:return n=e.sent,e.next=17,g([].concat(Object(Se.a)(h),[n.data]));case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(10),console.log(e.t0);case 22:case"end":return e.stop()}}),e,null,[[10,19]])})));return function(t){return e.apply(this,arguments)}}(),G=function(){var e=Object(l.a)(o.a.mark((function e(){var a,s,n,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=5;break}A.push("/"),console.log("pushed to login"),e.next=38;break;case 5:return e.prev=5,e.next=8,y.a.get("/api/conversations/find/"+r._id+"/"+t.postUserId);case 8:if(!((a=e.sent).data.length>0)){e.next=33;break}if(A.push("/chat/"+a.data[0]._id),console.log("pushed to chat id:"+a.data[0]._id),!j||!r){e.next=25;break}if(e.prev=13,s={userId:j._id},r.chatFollow.includes(j._id)&&j.chatFollow.includes(r._id)){e.next=18;break}return e.next=18,y.a.put("/api/users/"+r._id+"/chatfollow",s);case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(13),console.log(e.t0);case 23:e.next=33;break;case 25:return e.next=27,y.a.post("/api/conversations",{members:[t.postUserId,r._id]});case 27:return n=e.sent,A.push("/chat/"+n._id),c={userId:j._id},e.next=32,y.a.put("/api/users/"+r._id+"/chatfollow",c);case 32:console.log(n.data);case 33:e.next=38;break;case 35:e.prev=35,e.t1=e.catch(5),console.log(e.t1);case 38:case"end":return e.stop()}}),e,null,[[5,35],[13,20]])})));return function(){return e.apply(this,arguments)}}(),W=function(){var e=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=14;break}return D(!1),F(B-1),e.prev=3,e.next=6,y.a.put("/api/posts/"+t._id+"/removeLike/"+(null===r||void 0===r?void 0:r._id));case 6:e.sent,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),console.log(e.t0);case 12:e.next=15;break;case 14:alert("You cannot dislike this post as you are either not logged in or not a member of this group!");case 15:case"end":return e.stop()}}),e,null,[[3,9]])})));return function(){return e.apply(this,arguments)}}(),H=function(){var e=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=14;break}return D(!0),F(B+1),e.prev=3,e.next=6,y.a.put("/api/posts/"+t._id+"/addLike/"+(null===r||void 0===r?void 0:r._id));case 6:e.sent,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),console.log(e.t0);case 12:e.next=15;break;case 14:alert("You cannot like this post as you are either not logged in or not a member of this group!");case 15:case"end":return e.stop()}}),e,null,[[3,9]])})));return function(){return e.apply(this,arguments)}}(),z=function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||""===t){e.next=11;break}return e.prev=1,e.next=4,y.a.delete("/api/comments?commentId="+t);case 4:200===e.sent.status&&g(h.filter((function(e){return e._id!==t}))),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(w.jsx)("div",{className:"postWrapper",children:Object(w.jsxs)("div",{className:"postContainer",children:[Object(w.jsx)("div",{className:"postTop",children:Object(w.jsxs)(f.a,{className:"postTopContainerWrapper",children:[Object(w.jsxs)(N.a,{className:"postTopContainerLeft",children:[Object(w.jsx)("img",{className:"postProfileImg",src:j&&j.profilePicture?"https://firebasestorage.googleapis.com/v0/b/projectrehash-e91c0.appspot.com/o/"+j.profilePicture:"https://firebasestorage.googleapis.com/v0/b/projectrehash-e91c0.appspot.com/o/utils%2FnoAvatar.png?alt=media&token=e42cd680-8605-49a8-a125-1dc70a68beb4",alt:"",onClick:function(){j&&A.push("/profile/"+j.username+"/listings")}}),Object(w.jsx)("span",{className:"postProfileText",children:(null===j||void 0===j?void 0:j.username)?j.username:"No Name"})]}),Object(w.jsx)(N.a,{className:"postTopContainerRight",children:r&&r._id===t.postUserId?Object(w.jsx)("div",{className:"deleteButtonWrapper",children:Object(w.jsx)("div",{className:"deleteButton",onClick:function(){return a(t._id)},children:Object(w.jsx)("span",{className:"deleteButtonText",children:"Delete"})})}):Object(w.jsx)("div",{className:"postSwapButtonWrapper",children:Object(w.jsxs)("div",{className:"postSwapButton",onClick:G,children:[Object(w.jsx)(It.a,{className:"chatIcon"}),Object(w.jsx)("span",{className:"postSwapButtonText",children:"Swap Away!"})]})})})]})}),Object(w.jsxs)("div",{className:"postMiddle",children:[Object(w.jsx)("div",{className:"postMiddleDescription",children:Object(w.jsx)("div",{className:"postMiddleDescriptionContainer",children:(null===t||void 0===t?void 0:t.description)?t.description:"No description available"})}),Object(w.jsx)("div",{className:"postMiddleItemListing",children:Object(w.jsx)(ve,{item:k,inPost:!0})}),Object(w.jsx)("div",{className:"postMiddleItemLikesComments",children:Object(w.jsxs)("div",{className:"postMiddleItemLikesCommentsContainer",children:[Object(w.jsxs)("div",{className:"postMiddleItemLikes",children:[L?Object(w.jsx)(Ct.a,{onClick:W}):Object(w.jsx)(Pt.a,{onClick:H}),Object(w.jsx)("span",{className:"numberLikes",children:B})]}),Object(w.jsxs)("div",{className:"postMiddleItemComments",children:[Object(w.jsx)(Tt.a,{}),Object(w.jsx)("span",{className:"numberComments",children:h.length})]})]})})]}),Object(w.jsxs)("div",{className:"postBottom",children:[n&&Object(w.jsx)("div",{className:"postCommentInputWrapper",children:Object(w.jsx)("textarea",{value:P,onChange:function(e){return _(e.target.value)},onKeyDown:M,maxlength:"1000",className:"postCommentInput",placeholder:"Write a comment and press enter to send..."})}),Object(w.jsx)("div",{className:"postCommentContentSection",children:h.map((function(e){return Object(w.jsx)(Ut,{commentId:e._id,commentText:e.commentText,commentUserId:e.commentUserId,own:r&&r._id===e.commentUserId,handleDelete:z},e._id)}))})]})]})})}function Dt(){var e=Object(s.useContext)(te),t=e.user,a=(e.sockio,Object(x.h)().groupId),n=Object(x.h)().pageType,c=Object(s.useState)([]),r=Object(u.a)(c,2),i=r[0],d=r[1],j=Object(s.useState)(null),p=Object(u.a)(j,2),b=p[0],m=p[1],h=Object(s.useState)(!1),g=Object(u.a)(h,2),O=g[0],v=g[1],f=Object(x.g)();Object(s.useEffect)((function(){(function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.a.get("/api/groups?groupId="+a);case 3:return t=e.sent,e.next=6,m(t.data);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}})()()}),[a]),Object(s.useEffect)((function(){b&&t&&v(b.members.includes(t._id))}),[b,t]),Object(s.useEffect)((function(){(function(){var e=Object(l.a)(o.a.mark((function e(){var s,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,"main"!==n){e.next=10;break}return console.log("page type is main"),e.next=5,y.a.get("/api/posts/filter?groupId="+a);case 5:return s=e.sent,e.next=8,d(s.data);case 8:e.next=17;break;case 10:if("myPosts"!==n){e.next=17;break}return console.log("page type is myPosts"),e.next=14,y.a.get("/api/posts/filter?groupId="+a+"&userId="+(null===t||void 0===t?void 0:t._id));case 14:return c=e.sent,e.next=17,d(c.data);case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(0),console.log(e.t0);case 22:case"end":return e.stop()}}),e,null,[[0,19]])})));return function(){return e.apply(this,arguments)}})()()}),[n,a,t]);var N=function(){var e=Object(l.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("deleting post with id: "+t),e.next=4,y.a.delete("/api/posts?postId="+t);case 4:if(200!==(a=e.sent).status){e.next=10;break}return console.log(a.data.message),d(i.filter((function(e){return e._id!==t}))),e.next=10,y.a.delete("/api/comments/filter?postId="+t);case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=Object(l.a)(o.a.mark((function e(a,s){var n,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!b||!t){e.next=8;break}return n={groupId:b._id,postUserId:t._id,description:s,itemId:a},console.log(n),e.next=6,y.a.post("/api/posts",n);case 6:200===(c=e.sent).status&&d([c.data].concat(Object(Se.a)(i)));case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,a){return e.apply(this,arguments)}}(),I=function(){var e=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!b||!t){e.next=6;break}return e.next=4,y.a.put("/api/groups/"+b._id+"/removeMember/"+t._id);case 4:200===e.sent.status&&v(!1);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t||f.push("/"),!b||!t){e.next=7;break}return e.next=5,y.a.put("/api/groups/"+b._id+"/addMember/"+t._id);case 5:200===e.sent.status&&v(!0);case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();return Object(w.jsxs)("div",{children:[Object(w.jsx)("div",{className:"groupPageTop",children:Object(w.jsx)(C,{currentUser:t,handleUpdateGroup:function(e){e&&e.length>0&&e[0]&&t&&v(e[0].members.includes(t._id))}})}),Object(w.jsxs)("div",{className:"groupPageContainer",children:[Object(w.jsx)("div",{className:"groupSidebarWrapper",children:Object(w.jsx)(Nt,{className:"groupSidebarComponent",group:b,isGroupMember:O,handleLeave:I,handleJoin:S,handleUpdateGroup:function(e){e&&m(e)}})}),Object(w.jsxs)("div",{className:"groupPageContainerRight",children:[Object(w.jsx)("div",{className:"groupPagecontainerRightShareWrapper",children:b&&t&&O&&"main"===n?Object(w.jsx)(wt,{handleAdd:k}):Object(w.jsx)(w.Fragment,{})}),i.map((function(e){return Object(w.jsx)(Lt,{post:e,handleDelete:N,canCommentAndLike:b&&t&&O},e._id)}))]})]})]})}a(384);function Et(){var e=Object(x.h)().searchText,t=Object(s.useState)([]),a=Object(u.a)(t,2),n=a[0],c=a[1],r=Object(s.useContext)(te),i=r.user;r.sockio;return Object(s.useEffect)((function(){(function(){var t=Object(l.a)(o.a.mark((function t(){var a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!e){t.next=7;break}return t.next=4,y.a.get("/api/groups?search="+e);case 4:return a=t.sent,t.next=7,c(a.data);case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(){return t.apply(this,arguments)}})()()}),[e]),Object(w.jsxs)("div",{children:[Object(w.jsx)(C,{currentUser:i}),Object(w.jsxs)("div",{className:"productWrapper",children:[Object(w.jsx)("div",{className:"productHeader",children:e?"Search results for: "+e:""}),Object(w.jsx)(f.a,{className:"listingRow",xl:5,lg:4,md:3,sm:2,children:n.map((function(e){return Object(w.jsx)("div",{children:Object(w.jsx)(se,{groupImg:e.groupImg,groupName:e.groupName,groupId:e._id},e._id)})}))})]})]})}var Rt=function(){var e=Object(s.useContext)(te).user;return Object(w.jsx)(g.a,{children:Object(w.jsxs)(x.d,{children:[Object(w.jsx)(x.b,{exact:!0,path:"/",children:e?Object(w.jsx)(x.a,{to:"/home"}):Object(w.jsx)(dt,{})}),Object(w.jsx)(x.b,{path:"/register",children:e?Object(w.jsx)(x.a,{to:"/home"}):Object(w.jsx)(le,{})}),Object(w.jsx)(x.b,{exact:!0,path:"/product/:pageType/:categoryName",children:Object(w.jsx)(_e,{})}),Object(w.jsx)(x.b,{exact:!0,path:"/home",children:Object(w.jsx)(ce,{})}),Object(w.jsx)(x.b,{exact:!0,path:"/create",children:e?Object(w.jsx)(Ke,{}):Object(w.jsx)(dt,{})}),Object(w.jsx)(x.b,{exact:!0,path:"/chat/:initialActiveConvoId",children:e?Object(w.jsx)(mt,{}):Object(w.jsx)(dt,{})}),Object(w.jsx)(x.b,{exact:!0,path:"/profile/:username/listings/:viewingCategory",children:Object(w.jsx)(Ce,{})}),Object(w.jsx)(x.b,{exact:!0,path:"/profile/:username/listings",children:Object(w.jsx)(Ce,{})}),Object(w.jsx)(x.b,{exact:!0,path:"/profile/:username/reviews",children:Object(w.jsx)(Pe,{})}),Object(w.jsx)(x.b,{exact:!0,path:"/profile/:username/settings",children:Object(w.jsx)(xt,{})}),Object(w.jsx)(x.b,{exact:!0,path:"/profile/:username/mygroups",children:Object(w.jsx)(ht,{})}),Object(w.jsx)(x.b,{exact:!0,path:"/items/:itemId",children:Object(w.jsx)(nt,{})}),Object(w.jsx)(x.b,{exact:!0,path:"/groups/search/:searchText",children:Object(w.jsx)(Et,{})}),Object(w.jsx)(x.b,{exact:!0,path:"/groups/:groupId/:pageType",children:Object(w.jsx)(Dt,{})})]})})},Bt=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,466)).then((function(t){var a=t.getCLS,s=t.getFID,n=t.getFCP,c=t.getLCP,r=t.getTTFB;a(e),s(e),n(e),c(e),r(e)}))};r.a.render(Object(w.jsx)(n.a.StrictMode,{children:Object(w.jsx)(ae,{children:Object(w.jsx)(Rt,{})})}),document.getElementById("root")),Bt()}},[[385,1,2]]]);
//# sourceMappingURL=main.9a15f5c4.chunk.js.map