(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{253:function(e,t,a){},254:function(e,t,a){},256:function(e,t,a){},257:function(e,t,a){},283:function(e,t,a){},296:function(e,t,a){},297:function(e,t,a){},298:function(e,t,a){},299:function(e,t,a){},300:function(e,t,a){},301:function(e,t,a){},302:function(e,t,a){},303:function(e,t,a){},304:function(e,t,a){},326:function(e,t,a){},327:function(e,t,a){},329:function(e,t,a){},330:function(e,t,a){},331:function(e,t,a){},332:function(e,t,a){},333:function(e,t,a){},334:function(e,t,a){},335:function(e,t,a){},336:function(e,t,a){},357:function(e,t,a){},358:function(e,t,a){},359:function(e,t,a){},360:function(e,t,a){},361:function(e,t,a){},362:function(e,t,a){},363:function(e,t,a){},364:function(e,t,a){},365:function(e,t,a){},366:function(e,t,a){},367:function(e,t,a){"use strict";a.r(t);var s=a(0),n=a.n(s),c=a(24),r=a.n(c),i=(a(253),a(254),a(6)),o=a.n(i),l=a(11),u=a(7),d=a(443),j=a(442),p=a(413),b=a(239),m=(a(256),a(175),a(411)),x=a(412),h=a(26),O=a(18),v=a(208),g=a.n(v),f=(a(257),a(206)),N=a(85),w=a(2);function k(e){var t=e.notification,a=e.handleAccept,s=e.handleDeny;return Object(w.jsxs)("div",{className:"notiWrapper",children:[Object(w.jsxs)("div",{className:"notiContainer",children:[Object(w.jsx)("span",{className:"notiContainerUsername",children:t?t.senderName:"username"})," ","has invited you to join"," ",Object(w.jsx)("span",{className:"notiContainerGroupName",children:t?t.invitationName:"group name"}),"."]}),Object(w.jsxs)(f.a,{className:"notibuttonGroupWrapper",children:[Object(w.jsx)(N.a,{children:Object(w.jsx)("div",{className:"acceptButtonWrapper",onClick:function(){return a(t)},children:Object(w.jsx)("div",{className:"acceptButton",children:Object(w.jsx)("span",{className:"acceptButtonText",children:"Accept"})})})}),Object(w.jsx)(N.a,{children:Object(w.jsx)("div",{className:"denyButtonWrapper",onClick:function(){return s(t)},children:Object(w.jsx)("div",{className:"denyButton",children:Object(w.jsx)("span",{className:"denyButtonText",children:"Deny"})})})})]})]})}var y=a(8),I=a.n(y);function C(e){var t=e.currentUser,a="http://localhost:8080/images/",n=Object(h.g)(),c=Object(s.useState)(""),r=Object(u.a)(c,2),i=r[0],v=r[1],f=Object(s.useState)([]),N=Object(u.a)(f,2),y=N[0],C=N[1];Object(s.useEffect)((function(){(function(){var e=Object(l.a)(o.a.mark((function e(){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=11;break}return e.prev=1,e.next=4,I.a.get("/api/notifications/filter?userId="+t._id);case 4:200===(a=e.sent).status&&C(a.data),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}})()()}),[t]);var S=Object(w.jsx)(g.a,{className:"userNotificationIcon",htmlColor:"orange"}),P=function(){var e=Object(l.a)(o.a.mark((function e(a){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a||!t){e.next=14;break}return e.prev=1,e.next=4,I.a.delete("/api/notifications?notificationId="+a._id);case 4:return 200===e.sent.status&&C(y.filter((function(e){return e._id!==a._id}))),e.next=8,I.a.put("/api/groups/"+a.invitationId+"/addMember/"+t._id);case 8:e.sent,e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=Object(l.a)(o.a.mark((function e(a){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a||!t){e.next=11;break}return e.prev=1,e.next=4,I.a.delete("/api/notifications?notificationId="+a._id);case 4:200===e.sent.status&&C(y.filter((function(e){return e._id!==a._id}))),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(w.jsxs)(d.a,{className:"topbarWrapper fixed-top",expand:"lg",children:[Object(w.jsxs)(d.a.Brand,{onClick:function(){n.push("/home")},children:[Object(w.jsx)("img",{className:"ReHashLogo",src:a+"ReHashLogo.png",alt:""}),Object(w.jsx)("span",{className:"logoText",children:"ReHash"})]}),Object(w.jsx)(d.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(w.jsx)(d.a.Collapse,{id:"basic-navbar-nav",className:"collapseBar",children:Object(w.jsxs)(j.a,{className:"mr-auto",children:[Object(w.jsx)(j.a.Link,{className:"swap",onClick:function(){n.push("/create")},children:"Swap on ReHash"}),Object(w.jsxs)("div",{className:"searchbar",children:[Object(w.jsx)(m.a,{className:"searchIcon"}),Object(w.jsx)("input",{placeholder:"Seach for a swap...",className:"searchInput",value:i,onChange:function(e){return v(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&(e.preventDefault(),(i.match(/^\s*\n*\t*$/)||[]).length>0?console.log("search string is empty!"):n.push("/product/search/"+i))}})]}),Object(w.jsx)(O.b,{to:"/chat/0",children:Object(w.jsx)(x.a,{className:"chat",htmlColor:"orange"})}),Object(w.jsxs)(p.a,{className:"userNotification",variant:"warning",title:S,children:[Object(w.jsx)("div",{className:"userNotificationLabel",children:"Notifications"}),Object(w.jsx)("div",{className:"userNotificationList",children:y.length>0?y.map((function(e){return Object(w.jsx)(b.a.Item,{children:Object(w.jsx)(k,{notification:e,handleAccept:P,handleDeny:T})},e._id)})):Object(w.jsx)("div",{className:"userNoNotificationsLabel",children:"No notifcations"})})]}),Object(w.jsx)(O.b,{to:t?"/profile/"+t.username+"/listings":"/",children:Object(w.jsx)("img",{className:"userProfilePic",src:t&&t.profilePicture?a+t.profilePicture:a+"person/noAvatar.png",alt:"userProfile"})})]})})]})}var S=a(213),P=a(414),T=a(415),_=a(416),L=a(417),B=a(418),R=a(419),E=a(420),U=a(421),D=(a(283),a(99)),A=a.n(D);a(119);function F(){var e=Object(h.g)(),t=function(t){e.push("/product/categories/"+t)};return Object(w.jsxs)(A.a,{responsive:{superLargeDesktop:{breakpoint:{max:4e3,min:3e3},items:8},desktop:{breakpoint:{max:3e3,min:1024},items:6},tablet:{breakpoint:{max:1024,min:464},items:2},mobile:{breakpoint:{max:464,min:0},items:1}},children:[Object(w.jsx)("div",{className:"item",onClick:function(){return t("clothing")},children:Object(w.jsx)("div",{className:"button",children:Object(w.jsx)(S.a,{className:"itemButton",children:Object(w.jsxs)(N.a,{children:[Object(w.jsx)(f.a,{children:Object(w.jsx)(P.a,{className:"itemIcon"})}),Object(w.jsx)(f.a,{children:Object(w.jsx)("span",{className:"itemText text-center",children:"Clothing"})})]})})})}),Object(w.jsx)("div",{className:"item",onClick:function(){return t("beauty")},children:Object(w.jsx)("div",{className:"button",children:Object(w.jsx)(S.a,{className:"itemButton",children:Object(w.jsxs)(N.a,{children:[Object(w.jsx)(f.a,{children:Object(w.jsx)(T.a,{className:"itemIcon"})}),Object(w.jsx)(f.a,{children:Object(w.jsx)("span",{className:"itemText text-center",children:"Beauty"})})]})})})}),Object(w.jsx)("div",{className:"item",onClick:function(){return t("sports equipments")},children:Object(w.jsx)("div",{className:"button",children:Object(w.jsx)(S.a,{className:"itemButton",children:Object(w.jsxs)(N.a,{children:[Object(w.jsx)(f.a,{children:Object(w.jsx)(_.a,{className:"itemIcon"})}),Object(w.jsx)(f.a,{children:Object(w.jsx)("span",{className:"itemText text-center",children:"Sports Equipments"})})]})})})}),Object(w.jsx)("div",{className:"item",onClick:function(){return t("home appliances")},children:Object(w.jsx)("div",{className:"button",children:Object(w.jsx)(S.a,{className:"itemButton",children:Object(w.jsxs)(N.a,{children:[Object(w.jsx)(f.a,{children:Object(w.jsx)(L.a,{className:"itemIcon"})}),Object(w.jsx)(f.a,{children:Object(w.jsx)("span",{className:"itemText text-center",children:"Home Appliances"})})]})})})}),Object(w.jsx)("div",{className:"item",onClick:function(){return t("automotive")},children:Object(w.jsx)("div",{className:"button",children:Object(w.jsx)(S.a,{className:"itemButton",children:Object(w.jsxs)(N.a,{children:[Object(w.jsx)(f.a,{children:Object(w.jsx)(B.a,{className:"itemIcon"})}),Object(w.jsx)(f.a,{children:Object(w.jsx)("span",{className:"itemText text-center",children:"Automotive"})})]})})})}),Object(w.jsx)("div",{className:"item",onClick:function(){return t("hobbies")},children:Object(w.jsx)("div",{className:"button",children:Object(w.jsx)(S.a,{className:"itemButton",children:Object(w.jsxs)(N.a,{children:[Object(w.jsx)(f.a,{children:Object(w.jsx)(R.a,{className:"itemIcon"})}),Object(w.jsx)(f.a,{children:Object(w.jsx)("span",{className:"itemText text-center",children:"Hobbies"})})]})})})}),Object(w.jsx)("div",{className:"item",onClick:function(){return t("computers and tech")},children:Object(w.jsx)("div",{className:"button",children:Object(w.jsx)(S.a,{className:"itemButton",children:Object(w.jsxs)(N.a,{children:[Object(w.jsx)(f.a,{children:Object(w.jsx)(E.a,{className:"itemIcon"})}),Object(w.jsx)(f.a,{children:Object(w.jsx)("span",{className:"itemText text-center",children:"Computers & Tech"})})]})})})}),Object(w.jsx)("div",{className:"item",onClick:function(){return t("other tangibles")},children:Object(w.jsx)("div",{className:"button",children:Object(w.jsx)(S.a,{className:"itemButton",children:Object(w.jsxs)(N.a,{children:[Object(w.jsx)(f.a,{children:Object(w.jsx)(U.a,{className:"itemIcon"})}),Object(w.jsx)(f.a,{children:Object(w.jsx)("span",{className:"itemText text-center",children:"Others"})})]})})})})]})}a(296),a(297);var M=a(422),G=a(423),W=a(424),H=a(425),V=a(426),z=a(427),q=a(428);function J(){var e=Object(h.g)(),t=function(t){e.push("/product/categories/"+t)};return Object(w.jsxs)(A.a,{responsive:{superLargeDesktop:{breakpoint:{max:4e3,min:3e3},items:8},desktop:{breakpoint:{max:3e3,min:1024},items:6},tablet:{breakpoint:{max:1024,min:464},items:2},mobile:{breakpoint:{max:464,min:0},items:1}},children:[Object(w.jsx)("div",{className:"item",onClick:function(){return t("outdoor activities")},children:Object(w.jsx)("div",{className:"button",children:Object(w.jsx)(S.a,{className:"itemButton",children:Object(w.jsxs)(N.a,{children:[Object(w.jsx)(f.a,{children:Object(w.jsx)(M.a,{className:"itemIcon"})}),Object(w.jsx)(f.a,{children:Object(w.jsx)("span",{className:"itemText text-center",children:"Outdoor Activities"})})]})})})}),Object(w.jsx)("div",{className:"item",onClick:function(){return t("travel")},children:Object(w.jsx)("div",{className:"button",children:Object(w.jsx)(S.a,{className:"itemButton",children:Object(w.jsxs)(N.a,{children:[Object(w.jsx)(f.a,{children:Object(w.jsx)(G.a,{className:"itemIcon"})}),Object(w.jsx)(f.a,{children:Object(w.jsx)("span",{className:"itemText text-center",children:"Travel"})})]})})})}),Object(w.jsx)("div",{className:"item",onClick:function(){return t("discussion")},children:Object(w.jsx)("div",{className:"button",children:Object(w.jsx)(S.a,{className:"itemButton",children:Object(w.jsxs)(N.a,{children:[Object(w.jsx)(f.a,{children:Object(w.jsx)(W.a,{className:"itemIcon"})}),Object(w.jsx)(f.a,{children:Object(w.jsx)("span",{className:"itemText text-center",children:"Discussion"})})]})})})}),Object(w.jsx)("div",{className:"item",onClick:function(){return t("food")},children:Object(w.jsx)("div",{className:"button",children:Object(w.jsx)(S.a,{className:"itemButton",children:Object(w.jsxs)(N.a,{children:[Object(w.jsx)(f.a,{children:Object(w.jsx)(H.a,{className:"itemIcon"})}),Object(w.jsx)(f.a,{children:Object(w.jsx)("span",{className:"itemText text-center",children:"Food"})})]})})})}),Object(w.jsx)("div",{className:"item",onClick:function(){return t("indoor activities")},children:Object(w.jsx)("div",{className:"button",children:Object(w.jsx)(S.a,{className:"itemButton",children:Object(w.jsxs)(N.a,{children:[Object(w.jsx)(f.a,{children:Object(w.jsx)(V.a,{className:"itemIcon"})}),Object(w.jsx)(f.a,{children:Object(w.jsx)("span",{className:"itemText text-center",children:"Indoor Activities"})})]})})})}),Object(w.jsx)("div",{className:"item",onClick:function(){return t("sports")},children:Object(w.jsx)("div",{className:"button",children:Object(w.jsx)(S.a,{className:"itemButton",children:Object(w.jsxs)(N.a,{children:[Object(w.jsx)(f.a,{children:Object(w.jsx)(z.a,{className:"itemIcon"})}),Object(w.jsx)(f.a,{children:Object(w.jsx)("span",{className:"itemText text-center",children:"Sports"})})]})})})}),Object(w.jsx)("div",{className:"item",onClick:function(){return t("games and esports")},children:Object(w.jsx)("div",{className:"button",children:Object(w.jsx)(S.a,{className:"itemButton",children:Object(w.jsxs)(N.a,{children:[Object(w.jsx)(f.a,{children:Object(w.jsx)(q.a,{className:"itemIcon"})}),Object(w.jsx)(f.a,{children:Object(w.jsx)("span",{className:"itemText text-center",children:"Games & Esports"})})]})})})}),Object(w.jsx)("div",{className:"item",onClick:function(){return t("other intangibles")},children:Object(w.jsx)("div",{className:"button",children:Object(w.jsx)(S.a,{className:"itemButton",children:Object(w.jsxs)(N.a,{children:[Object(w.jsx)(f.a,{children:Object(w.jsx)(U.a,{className:"itemIcon"})}),Object(w.jsx)(f.a,{children:Object(w.jsx)("span",{className:"itemText text-center",children:"Others"})})]})})})})]})}var K=a(445),$=(a(298),a(446));a(299);var Y=a(169);function Q(){return Object(w.jsx)("div",{children:Object(w.jsxs)(Y.a,{className:"adsWrapper",children:[Object(w.jsx)(Y.a.Item,{interval:3e3,children:Object(w.jsx)("img",{className:"adsPics d-block w-50",src:"assests/adsPics/ads1.jpeg",alt:"First slide"})}),Object(w.jsx)(Y.a.Item,{interval:3e3,children:Object(w.jsx)("img",{className:"adsPics d-block w-50",src:"/assests/adsPics/ads2.jpeg",alt:"Second slide"})}),Object(w.jsx)(Y.a.Item,{interval:3e3,children:Object(w.jsx)("img",{className:"adsPics d-block w-50",src:"/assests/adsPics/ads3.jpeg",alt:"Third slide"})})]})})}var X=function(e,t){switch(t.type){case"LOGIN_START":return{user:null,isFetching:!0,error:!1,sockio:null};case"LOGIN_SUCCESS":return{user:t.payload.user,isFetching:!1,error:!1,sockio:t.payload.sock};case"LOGIN_FAILURE":return{user:null,isFetching:!1,error:t.payload,sockio:null};case"LOGOUT_START":return{user:t.payload.user,isFetching:!0,error:!1,sockio:t.payload.sock};case"LOGOUT_SUCCESS":return{user:null,isFetching:!1,error:!1,sockio:null};case"LOGOUT_FAILURE":return{user:null,isFetching:!1,error:t.payload,sockio:null};case"UPDATE":return{user:t.payload.user,isFetching:!1,error:!1,sockio:t.payload.sock};default:return e}},Z={user:null,isFetching:!1,error:!1,sockio:null},ee=Object(s.createContext)(Z),te=function(e){var t=e.children,a=Object(s.useReducer)(X,Z),n=Object(u.a)(a,2),c=n[0],r=n[1];return Object(w.jsx)(ee.Provider,{value:{user:c.user,isFetching:c.isFetching,error:c.error,sockio:c.sockio,dispatch:r},children:t})};a(300),a(301);function ae(e){var t=e.groupImg,a=e.groupName,n=e.groupId,c=e.create,r="http://localhost:8080/images/",i=Object(s.useContext)(ee),d=i.user,j=(i.sockio,Object(s.useState)("")),p=Object(u.a)(j,2),b=p[0],m=p[1],x=Object(h.g)(),O=function(){var e=Object(l.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((b.match(/^\s*\n*\t*$/)||[]).length>0)){e.next=5;break}console.log("newGroupName is empty!"),m(""),e.next=17;break;case 5:if(!d){e.next=17;break}return e.prev=6,t={creatorId:d._id,members:[d._id],description:"No description yet. Waiting for group creator to update description.",groupName:b},e.next=10,I.a.post("/api/groups",t);case 10:200===(a=e.sent).status&&(m(""),x.push("/groups/"+a.data._id+"/main")),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(6),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[6,14]])})));return function(){return e.apply(this,arguments)}}();return c?Object(w.jsxs)("div",{className:"groupIconButtonBackgroundCreate",children:[Object(w.jsx)("img",{className:"groupIconButtonImg",src:t?r+t:r+"group.noImageUploaded.png",onClick:O,alt:""}),Object(w.jsx)("textarea",{rows:3,className:"groupIconTextArea",placeholder:"Enter new group name (max 50 characters) and click '+'",value:b,onChange:function(e){e.target.value.length<=50&&m(e.target.value)}})]}):Object(w.jsxs)("div",{className:"groupIconButtonBackground",onClick:function(){n&&x.push("/groups/"+n+"/main")},children:[Object(w.jsx)("img",{className:"groupIconButtonImg",src:t?r+t:r+"group/noImageUploaded.png",alt:""}),Object(w.jsx)("div",{className:"groupIconButtonName",children:a||"No Group Name"})]})}function se(e){var t=e.recommendedGroups;return t&&t.length>0?Object(w.jsx)(A.a,{responsive:{superLargeDesktop:{breakpoint:{max:4e3,min:3e3},items:8},desktop:{breakpoint:{max:3e3,min:1024},items:6},tablet:{breakpoint:{max:1024,min:464},items:2},mobile:{breakpoint:{max:464,min:0},items:1}},children:t.map((function(e){return Object(w.jsx)(ae,{groupName:e.groupName,groupImg:e.groupImg,groupId:e._id},e._id)}))}):Object(w.jsx)("div",{children:"No recommended groups."})}function ne(){var e=Object(s.useContext)(ee),t=e.user,a=e.sockio,n=Object(s.useState)([]),c=Object(u.a)(n,2),r=c[0],i=c[1];return Object(s.useEffect)((function(){console.log("socket is: ",null===a||void 0===a?void 0:a.id),console.log("user is: ",t)}),[a,t]),Object(s.useEffect)((function(){(function(){var e=Object(l.a)(o.a.mark((function e(){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t){e.next=6;break}return e.next=4,I.a.get("/api/groups/recommended/"+t._id);case 4:200===(a=e.sent).status&&i(a.data);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}})()()}),[t]),Object(w.jsxs)("div",{children:[Object(w.jsx)(C,{currentUser:t}),Object(w.jsx)(Q,{}),Object(w.jsxs)("div",{className:"homeWrapper",children:[Object(w.jsxs)("div",{className:"tangible",children:[Object(w.jsx)("div",{className:"itemsType",children:Object(w.jsx)("span",{children:"Explore Tangible"})}),Object(w.jsx)(F,{})]}),Object(w.jsxs)("div",{className:"intangible",children:[Object(w.jsx)("div",{className:"itemsType",children:Object(w.jsxs)("span",{children:["Explore Intangible ",null===a||void 0===a?void 0:a.id]})}),Object(w.jsx)(J,{})]}),Object(w.jsxs)("div",{className:"recommendedGroups",children:[Object(w.jsx)("div",{className:"itemsType",children:Object(w.jsx)("span",{children:"Recommended Groups"})}),Object(w.jsx)(se,{recommendedGroups:r})]})]})]})}a(302);var ce=a(214),re=a.n(ce);function ie(){var e=Object(s.useState)(""),t=Object(u.a)(e,2),a=t[0],n=t[1],c=Object(s.useState)(""),r=Object(u.a)(c,2),i=r[0],d=r[1],j=Object(s.useState)(""),p=Object(u.a)(j,2),b=p[0],m=p[1],x=Object(s.useState)(""),v=Object(u.a)(x,2),g=v[0],f=v[1],N=function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(t.target.value),e.prev=1,e.next=4,I.a.get("/api/users?email="+t.target.value);case 4:t.target.setCustomValidity("Email already taken"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),400===e.t0.response.status&&t.target.setCustomValidity("");case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d(t.target.value),e.prev=1,e.next=4,I.a.get("/api/users?username="+t.target.value);case 4:t.target.setCustomValidity("Username already taken"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),400===e.t0.response.status&&t.target.setCustomValidity("");case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),y=Object(h.g)(),C=function(){var e=Object(l.a)(o.a.mark((function e(t){var s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),console.log(a),console.log(i),console.log(b),console.log(g),s={username:i,email:a,password:b},e.prev=6,e.next=9,I.a.post("/api/auth/register",s);case 9:y.push("/"),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(6),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[6,12]])})));return function(t){return e.apply(this,arguments)}}();return Object(w.jsx)("div",{className:"register",children:Object(w.jsxs)("div",{className:"registerWrapper",children:[Object(w.jsx)("div",{className:"registerLeft",children:Object(w.jsxs)("div",{className:"registerLeftWrapper  ",children:[Object(w.jsxs)("div",{className:"registerLeftTop ",children:[Object(w.jsx)("img",{className:"registerLeftLogo",src:"/assests/ReHashLogo.png",alt:"ReHash logo"}),Object(w.jsx)("span",{id:"registerText",className:"registerLeftLogoText ",children:"ReHash"})]}),Object(w.jsx)("span",{className:"registerLeftBottom",children:"Excited to embark on you ReHash journey? Sign up now!"})]})}),Object(w.jsxs)("div",{className:"registerRight",children:[Object(w.jsx)("div",{className:"registerRightTop",children:Object(w.jsxs)(O.b,{to:"/",className:"registerBack",children:[Object(w.jsx)(re.a,{}),Object(w.jsx)("span",{children:"Back"})]})}),Object(w.jsxs)("div",{className:"registerRightBottom",children:[Object(w.jsxs)("div",{className:"registerRightHeader",children:[Object(w.jsx)("h2",{children:"Register Individual Account!"}),Object(w.jsx)("span",{className:"registerRightHeaderText",children:"For the purpose of industry regulations, your details are requested"})]}),Object(w.jsxs)("form",{action:"",className:"registerBox",onSubmit:C,children:[Object(w.jsx)("span",{className:"registerInputLabel",children:"Your full name *"}),Object(w.jsx)("input",{placeholder:"Enter username",required:!0,value:i,onChange:k,className:"registerInput"}),Object(w.jsx)("span",{className:"registerInputLabel",children:"Email address *"}),Object(w.jsx)("input",{placeholder:"Enter email address",required:!0,value:a,onChange:N,type:"email",className:"registerInput"}),Object(w.jsx)("span",{className:"registerInputLabel",children:"Create password *"}),Object(w.jsx)("input",{placeholder:"Enter password with at least 6 characters",required:!0,value:b,onChange:function(e){m(e.target.value),e.target.value.length<6?e.target.setCustomValidity("Password must have at least 6 characters"):e.target.setCustomValidity("")},type:"password",className:"registerInput"}),Object(w.jsx)("span",{className:"registerInputLabel",children:"Confirm password *"}),Object(w.jsx)("input",{placeholder:"Confirm password",required:!0,value:g,onChange:function(e){console.log(e.target.value),f(e.target.value),e.target.value!==b?(console.log(b),console.log(e.target.value),e.target.setCustomValidity("Passwords don't match!")):e.target.setCustomValidity("")},type:"password",className:"registerInput"}),Object(w.jsx)("button",{className:"registerButton",type:"submit",children:"Register Account"})]})]})]})]})})}a(303);var oe=a(433),le=(a(304),a(447)),ue=a(35),de=a(429),je=a(430),pe=a(431),be=a(432),me=a(224),xe=a.n(me);function he(e){var t=e.sidebarUser,a="http://localhost:8080/images/",n=Object(s.useContext)(ee),c=n.user,r=n.sockio,i=n.dispatch,u=Object(h.g)(),d=function(){var e=Object(l.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a=function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"LOGOUT_START",payload:{user:c,sock:r}}),e.prev=1,e.next=4,r.disconnect();case 4:t({type:"LOGOUT_SUCCESS"}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),t({type:"LOGIN_FAILURE",payload:e.t0});case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),e.next=4,a(i);case 4:u.push("/"),console.log("logged out");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(w.jsx)("div",{className:"sidebar",children:Object(w.jsxs)(ue.a,{textColor:"black",backgroundColor:"#FFD68D",children:[Object(w.jsx)(ue.d,{prefix:Object(w.jsx)("i",{className:"fa fa-bars fa-large"}),children:Object(w.jsx)("img",{className:"userProfile",src:(null===t||void 0===t?void 0:t.profilePicture)?a+t.profilePicture:a+"person/noAvatar.png",alt:""})}),Object(w.jsxs)(ue.d,{style:{textAlign:"center"},children:[Object(w.jsx)("div",{children:null===t||void 0===t?void 0:t.username}),Object(w.jsxs)("div",{className:"ratings",children:[Object(w.jsx)("div",{children:"Ratings: "}),Object(w.jsx)(le.a,{value:t?t.cumulativeRating/t.ratedByUsers:3,precision:.1,readOnly:!0})]})]}),Object(w.jsx)(ue.b,{children:Object(w.jsxs)(ue.e,{children:[Object(w.jsxs)(ue.f,{onClick:function(){u.push("/profile/"+(null===t||void 0===t?void 0:t.username)+"/listings"),console.log("done")},className:"sidebarMenuItem",children:[Object(w.jsx)(de.a,{className:"sidebarIcons"}),Object(w.jsx)("span",{className:"sidebarMenuText",children:"Listings"})]}),Object(w.jsxs)(ue.f,{className:"sidebarMenuItem",onClick:function(){u.push("/profile/"+(null===t||void 0===t?void 0:t.username)+"/reviews")},children:[Object(w.jsx)(je.a,{className:"sidebarIcons"}),Object(w.jsx)("span",{className:"sidebarMenuText",children:"Reviews"})]}),t&&t._id===(null===c||void 0===c?void 0:c._id)?Object(w.jsxs)(ue.f,{className:"sidebarMenuItem",onClick:function(){u.push("/profile/"+(null===t||void 0===t?void 0:t.username)+"/mygroups")},children:[Object(w.jsx)(xe.a,{className:"sidebarIcons"}),Object(w.jsx)("span",{className:"sidebarMenuText",children:"My Groups"})]}):Object(w.jsx)(w.Fragment,{}),t&&t._id===(null===c||void 0===c?void 0:c._id)?Object(w.jsxs)(ue.f,{className:"sidebarMenuItem",onClick:function(){u.push("/profile/"+(null===t||void 0===t?void 0:t.username)+"/settings")},children:[Object(w.jsx)(pe.a,{className:"sidebarIcons"}),Object(w.jsx)("span",{className:"sidebarMenuText",children:"Settings"})]}):Object(w.jsx)(w.Fragment,{})]})}),t&&t._id===(null===c||void 0===c?void 0:c._id)?Object(w.jsx)(ue.c,{style:{textAlign:"center"},children:Object(w.jsxs)("div",{className:"sidebar-btn-wrapper",style:{padding:"20px 5px"},children:[Object(w.jsx)(be.a,{className:"sidebarIcons",onClick:d}),Object(w.jsx)("span",{className:"sidebarMenuText",onClick:d,children:"Log out"})]})}):Object(w.jsx)(w.Fragment,{})]})})}a(326);function Oe(e){var t=e.item,a=e.inPost,n="http://localhost:8080/images/",c=Object(h.g)();return Object(s.useEffect)((function(){console.log(t)}),[t]),Object(w.jsx)("div",{className:"itemListingWrapper",onClick:function(){c.push("/items/"+t._id)},children:Object(w.jsx)(K.a,{children:a?Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(K.a.Img,{src:n+(null===t||void 0===t?void 0:t.img[0])}),Object(w.jsx)(K.a.Body,{className:"PostItemBody",children:null===t||void 0===t?void 0:t.title})]}):Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(K.a.Img,{variant:"top",src:n+t.img[0],className:"trendingSwapItemImg"}),Object(w.jsxs)(K.a.Body,{className:"trendingSwapItemBody",children:[Object(w.jsxs)(K.a.Title,{className:"itemListingCardTitle",children:[Object(w.jsx)("span",{style:{marginRight:"10px"},children:t.title}),Object(w.jsx)($.a,{className:"tag",label:"waiting"===t.status?"available":t.status,size:"small",color:"waiting"===t.status?"":"reserved"===t.status?"primary":"secondary",style:{marginBottom:"5px",marginTop:"5px"}})]}),Object(w.jsx)("span",{className:"trendingSwapText",children:"Ideal Swap: "}),t.idealSwaps.map((function(e){return Object(w.jsx)($.a,{className:"tag",label:e,size:"small",color:"secondary",style:{marginRight:"5px"}},e)})),Object(w.jsx)(K.a.Text,{children:t.desc})]})]})})})}var ve=a(434),ge=a(440),fe=a(435);a(327);function Ne(e){var t=e.fill,a=void 0===t?"none":t;return Object(w.jsx)("svg",{class:"w-6 h-6 star",fill:a,stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:Object(w.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"0",d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})})}function we(e){var t=e.index,a=e.rating,n=e.hoverRating,c=e.onMouseEnter,r=e.onMouseLeave,i=e.onSaveRating,o=e.selected,l=e.notSelected,u=Object(s.useMemo)((function(){return n>=t||!n&&a>=t?"rgb(240, 158, 6)":"rgb(145, 144, 144)"}),[a,n,t]);return Object(w.jsx)("div",{style:{height:"20px",width:"20px"},className:"cursor-pointer",onMouseEnter:function(){return c(t)},onMouseLeave:function(){return r()},onClick:function(){return i(t)},children:o?Object(w.jsx)(Ne,{fill:"rgb(240, 158, 6)"}):l?Object(w.jsx)(Ne,{fill:"rgb(145, 144, 144)"}):Object(w.jsx)(Ne,{fill:u})})}a(328);function ke(e){var t=e.review,a=e.doneReview,n=e.handleSubmit,c=e.handleDelete,r=Object(s.useState)(0),i=Object(u.a)(r,2),d=i[0],j=i[1],p=Object(s.useState)(0),b=Object(u.a)(p,2),m=b[0],x=b[1],h=Object(s.useContext)(ee).user,O="http://localhost:8080/images/",v=Object(s.useState)(null),g=Object(u.a)(v,2),f=g[0],N=g[1],k=Object(s.useState)(""),y=Object(u.a)(k,2),C=y[0],S=y[1];Object(s.useEffect)((function(){t&&function(){var e=Object(l.a)(o.a.mark((function e(){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.a.get("/api/users?userId="+t.reviewerId);case 2:a=e.sent,N(a.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[t]);var P=function(e){a||(x(e),console.log("hover rating is: "+e))},T=function(){a||x(0)},_=function(e){a||(j(e),console.log("your rating is: "+e))};return Object(w.jsxs)("div",{className:"userReview",children:[Object(w.jsxs)("div",{className:"userReviewTop",children:[Object(w.jsx)("img",{src:a?f&&f.profilePicture?O+f.profilePicture:O+"person/noAvatar.png":h&&h.profilePicture?O+h.profilePicture:O+"person/noAvatar.png",alt:"",className:"userReviewImg"}),Object(w.jsxs)("div",{className:"userReviewTopMiddle",children:[Object(w.jsx)("div",{className:"userReviewTopMiddleName",children:a?null===f||void 0===f?void 0:f.username:h?h.username:"Anonymous"}),Object(w.jsxs)("div",{className:"userReviewTopMiddleRatings",children:[Object(w.jsx)("div",{className:"userReviewTopMiddleRatingsText",children:"Ratings: "}),Object(w.jsx)("div",{className:"userReviewRatingStars",children:[1,2,3,4,5].map(t?function(e){return Object(w.jsx)(we,{index:e,rating:d,hoverRating:m,onMouseEnter:P,onMouseLeave:T,onSaveRating:_,selected:t.rating>=e,notSelected:t.rating<e})}:function(e){return Object(w.jsx)(we,{index:e,rating:d,hoverRating:m,onMouseEnter:P,onMouseLeave:T,onSaveRating:_})})})]})]}),Object(w.jsx)("div",{className:"userReviewTopRight",children:a?t.reviewerId===(null===h||void 0===h?void 0:h._id)?Object(w.jsx)("button",{className:"userReviewSubmitButton",onClick:function(){return c(t)},children:"Delete"}):Object(w.jsx)(w.Fragment,{}):Object(w.jsx)("button",{className:"userReviewSubmitButton",onClick:function(){return n(C,d)},children:"Submit"})})]}),Object(w.jsx)("div",{className:"userReviewBottom",children:a?Object(w.jsx)("div",{className:"userReviewedText",children:t.reviewText}):Object(w.jsx)("textarea",{placeholder:"(Optional) Leave a review ...",className:"userReviewInput",value:C,onChange:function(e){return S(e.target.value)}})})]})}function ye(){var e=Object(s.useContext)(ee),t=e.user,a=e.sockio,n=Object(h.h)().username,c=Object(s.useState)([]),r=Object(u.a)(c,2),i=r[0],d=r[1],j=Object(s.useState)("tangibles"),p=Object(u.a)(j,2),b=p[0],m=p[1],x=Object(s.useState)(null),O=Object(u.a)(x,2),v=O[0],g=O[1],N=Object(s.useState)(0),k=Object(u.a)(N,2),y=k[0],S=k[1];Object(s.useEffect)((function(){console.log("socket is: ",null===a||void 0===a?void 0:a.id),console.log("username is: ",n)}),[a,n]),Object(s.useEffect)((function(){(function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=6;break}return e.next=3,I.a.get("/api/users?username="+n);case 3:t=e.sent,g(t.data),console.log("profileUser is: "+t.data);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[n]),Object(s.useEffect)((function(){(function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!v){e.next=5;break}return e.next=3,I.a.get("/api/items/categories?categoryName="+b+"&userId="+v._id);case 3:t=e.sent,d(t.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[b,v]);return Object(w.jsxs)("div",{children:[Object(w.jsx)(C,{currentUser:t}),Object(w.jsxs)("div",{className:"userlistingContainer",children:[Object(w.jsx)(he,{className:"sidebar",sidebarUser:v}),Object(w.jsx)("div",{className:"userListingsRight",children:Object(w.jsxs)(oe.a,{className:"userlistingWrapper",children:[Object(w.jsx)("div",{className:"tabBar",children:Object(w.jsx)(ve.a,{margin:200,style:{marginBottom:"10px"},children:Object(w.jsxs)(ge.a,{value:y,indicatorColor:"primary",textColor:"primary",centered:!0,children:[Object(w.jsx)(fe.a,{label:"Tangible",onClick:function(){m("tangibles"),S(0)}}),Object(w.jsx)(fe.a,{label:"Intangible",onClick:function(){m("intangibles"),S(1)}})]})})}),Object(w.jsx)(f.a,{className:"listingRow",xs:1,md:3,children:i.length?i.map((function(e){return Object(w.jsx)(Oe,{item:e},e._id)})):Object(w.jsx)("div",{children:"User does not have any item in this category"})})]})})]})]})}var Ie=a(49);a(329);function Ce(){var e=Object(s.useContext)(ee),t=e.user,a=(e.sockio,Object(s.useState)(null)),n=Object(u.a)(a,2),c=n[0],r=n[1],i=Object(h.h)().username,d=Object(s.useState)([]),j=Object(u.a)(d,2),p=j[0],b=j[1],m=Object(s.useState)(!1),x=Object(u.a)(m,2),O=x[0],v=x[1],g=Object(s.useState)([]),f=Object(u.a)(g,2),N=f[0],k=f[1],y=Object(s.useState)(0),S=Object(u.a)(y,2),P=S[0],T=S[1],_=Object(s.useState)(0),L=Object(u.a)(_,2),B=L[0],R=L[1];Object(s.useEffect)((function(){(function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i){e.next=6;break}return e.next=3,I.a.get("/api/users?username="+i);case 3:t=e.sent,r(t.data),console.log("profileUser is: "+t.data);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[i]),Object(s.useEffect)((function(){console.log("user is changed"),console.log(t)}),[t]),Object(s.useEffect)((function(){console.log(t),c&&(function(){var e=Object(l.a)(o.a.mark((function e(){var a,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.a.get("/api/reviews/profileUser/"+c._id);case 2:a=e.sent,s=a.data.filter((function(e){return e.reviewerId!==(null===t||void 0===t?void 0:t._id)})),b(s),console.log(s);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()(),T(c.cumulativeRating),R(c.ratedByUsers))}),[c,t]),Object(s.useEffect)((function(){(function(){var e=Object(l.a)(o.a.mark((function e(){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&c&&c._id!==t._id){e.next=4;break}v(!0),e.next=8;break;case 4:return e.next=6,I.a.get("/api/reviews/between/"+c._id+"/"+t._id);case 6:(a=e.sent).data.length>0?(v(!0),k(a.data),console.log(a.data)):v(!1);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[c,t]);var E=function(){var e=Object(l.a)(o.a.mark((function e(a,s){var n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(O||!(s>0)){e.next=13;break}return console.log("reviewText is: "+a+"\n rating is: "+s),n={reviewerId:t._id,revieweeId:c._id,rating:s,reviewText:a},e.next=5,I.a.post("/api/reviews",n);case 5:return r=e.sent,k([].concat(Object(Ie.a)(N),[r.data])),v(!0),e.next=10,I.a.put("/api/users/"+c._id,{cumulativeRating:P+s,ratedByUsers:B+1});case 10:e.sent,T(P+s),R(B+1);case 13:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),U=function(){var e=Object(l.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!O){e.next=14;break}return console.log(t),e.next=4,I.a.delete("/api/reviews/id/"+t._id);case 4:return a=e.sent,console.log(a.status),console.log(typeof a.status),k([]),v(!1),e.next=11,I.a.put("/api/users/"+c._id,{cumulativeRating:P-t.rating,ratedByUsers:B-1});case 11:e.sent,T(P-t.rating),R(B-1);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(w.jsxs)("div",{children:[Object(w.jsx)(C,{currentUser:t}),Object(w.jsxs)("div",{className:"userReviewsContainer",children:[Object(w.jsx)(he,{sidebarUser:c}),Object(w.jsx)("div",{className:"userReviewsRight",children:Object(w.jsxs)(oe.a,{className:"userReviewsWrapper",children:[Object(w.jsx)("span",{className:"userReviewsHeader",children:"Reviews"}),O?Object(w.jsx)(w.Fragment,{}):Object(w.jsx)(ke,{className:"userReview",doneReview:!1,handleSubmit:E,handleDelete:U}),N.map((function(e){return Object(w.jsx)(ke,{className:"userReview",review:e,doneReview:!0,handleSubmit:E,handleDelete:U},e._id)})),p.map((function(e){return Object(w.jsx)(ke,{className:"userReview",review:e,doneReview:!0,handleSubmit:E,handleDelete:U},e._id)}))]})})]})]})}a(330);function Se(){var e=Object(h.h)().categoryName,t=Object(h.h)().pageType,a=Object(s.useState)([]),n=Object(u.a)(a,2),c=n[0],r=n[1],i=Object(s.useContext)(ee),d=i.user;i.sockio;return Object(s.useEffect)((function(){console.log("categoryName is: "+e),console.log("pageType is "+t),function(){var a=Object(l.a)(o.a.mark((function a(){var s,n;return o.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,"categories"!==t||!e){a.next=9;break}return a.next=4,I.a.get("/api/items/categories?categoryName="+e);case 4:return s=a.sent,a.next=7,r(s.data);case 7:a.next=15;break;case 9:if("search"!==t||!e){a.next=15;break}return a.next=12,I.a.get("/api/items?search="+e);case 12:return n=a.sent,a.next=15,r(n.data);case 15:a.next=20;break;case 17:a.prev=17,a.t0=a.catch(0),console.log(a.t0);case 20:case"end":return a.stop()}}),a,null,[[0,17]])})));return function(){return a.apply(this,arguments)}}()()}),[e,t]),Object(w.jsxs)("div",{children:[Object(w.jsx)(C,{currentUser:d}),Object(w.jsxs)("div",{className:"productWrapper",children:[Object(w.jsx)("span",{className:"productHeader",children:"search"===t?"Search results for: "+e:"categories"===t&&e?e.charAt(0).toUpperCase()+e.slice(1):"Product Descrption Header"}),Object(w.jsx)(f.a,{className:"listingRow",lg:3,md:2,s:1,children:c.map((function(e){return Object(w.jsx)("div",{children:Object(w.jsx)(Oe,{item:e},e._id)})}))})]})]})}var Pe=a(79),Te=a(20),_e=a(240),Le=(a(331),a(439)),Be=a(226),Re=a.n(Be),Ee=a(441),Ue=a(436),De=a(438),Ae=Object(Ue.a)((function(e){return{root:{width:500,"& > * + *":{marginTop:e.spacing(3)}}}})),Fe={flex:1,display:"flex",flexDirection:"column",alignItems:"center",padding:"20px",borderWidth:2,borderRadius:2,borderColor:"#eeeeee",borderStyle:"dashed",backgroundColor:"#fafafa",color:"#bdbdbd",outline:"none",transition:"border .24s ease-in-out"},Me={borderColor:"#2196f3"},Ge={borderColor:"#00e676"},We={borderColor:"#ff1744"};function He(){var e=Object(s.useContext)(ee),t=e.user,a=(e.sockio,Ae()),n=[{title:"Clothing"},{title:"Beauty"},{title:"Sports Equipments"},{title:"Home Appliances"},{title:"Automotive"},{title:"Clothing"},{title:"Hobbies"},{title:"Computers and Tech"},{title:"Outdoor Activities"},{title:"Travel"},{title:"Discussion"},{title:"Food"},{title:"Indoor Activities"},{title:"Sports"},{title:"Games and Esports"},{title:"Others"}],c=Object(s.useState)([]),r=Object(u.a)(c,2),i=r[0],d=r[1],j=Object(s.useState)({}),p=Object(u.a)(j,2),b=p[0],m=p[1],x=Object(s.useState)({}),h=Object(u.a)(x,2),O=h[0],v=h[1],g=Object(s.useState)([]),k=Object(u.a)(g,2),y=k[0],P=k[1],T=Object(s.useState)([]),_=Object(u.a)(T,2),L=_[0],B=_[1],R=Object(s.useCallback)((function(e){O.images&&v(Object(Te.a)(Object(Te.a)({},O),{},{images:null}));var t=e.map((function(e){return Object.assign(e,{preview:URL.createObjectURL(e),customFileName:Date.now().toString().concat(e.name)})})),a=[].concat(Object(Ie.a)(i),Object(Ie.a)(t));console.log(a),console.log(a.length),a.length>6&&(a=a.slice(a.length-6,a.length),console.log(a)),d(a)}),[O,i]),E=Object(_e.a)({accept:"image/*",onDrop:R,maxFiles:6}),U=E.getRootProps,D=E.getInputProps,A=E.isDragActive,F=E.isDragAccept,M=E.isDragReject,G=Object(s.useMemo)((function(){return Object(Te.a)(Object(Te.a)(Object(Te.a)(Object(Te.a)({},Fe),A?Me:{}),F?Ge:{}),M?We:{})}),[A,M,F]),W=i.map((function(e){return Object(w.jsx)("div",{className:"thumb",children:Object(w.jsx)("img",{src:e.preview,className:"userSwapImg",alt:""})},e.customFileName)}));Object(s.useEffect)((function(){return function(){i.forEach((function(e){return URL.revokeObjectURL(e.preview)}))}}),[i]);var H=function(e,t){m(Object(Te.a)(Object(Te.a)({},b),{},Object(Pe.a)({},e,t))),O[e]&&v(Object(Te.a)(Object(Te.a)({},O),{},Object(Pe.a)({},e,null)))},V=function(){var e=b.title,t=b.description,a=b.tangible,s={};return e&&""!==e?e.length>50&&(s.title="title cannot be more than 50 characters"):s.title="title cannot be blank!",t&&""!==t?t.length>500&&(s.description="description cannot be more than 500 characters"):s.description="description cannot be blank!",a&&""!==a||(s.tangible="specify whether your item is tangible or intangible!"),L&&0!==L.length||(s.swapCategories="select at least 1 category!"),y&&0!==y.length||(s.idealCategories="select at least 1 category!"),0===i.length&&(s.images="you have to upload at least 1 image!"),s},z=function(){var e=Object(l.a)(o.a.mark((function e(a){var s,n,c,r,l,u,j,p;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),s=V(),!(Object.keys(s).length>0)){e.next=7;break}v(s),console.log(s),e.next=27;break;case 7:for(n=L.map((function(e){return e.title.toLowerCase()})),n=[].concat(Object(Ie.a)(n),[b.tangible]),c=y.map((function(e){return e.title.toLowerCase()})),r=new FormData,l=0;l<i.length;l+=1)r.append("file",i[l]),r.append("name",i[l].customFileName),console.log("customFileName is: "+i[l].customFileName),console.log(typeof i[l].customFileName);return console.log(r),e.next=15,I.a.post("/api/upload/items",r);case 15:if(200!==(u=e.sent).status){e.next=23;break}return j={userId:t._id,title:b.title,desc:b.description,img:u.data.imagePaths,categories:n,idealSwaps:c,status:"waiting"},console.log(j),e.next=21,I.a.post("/api/items",j);case 21:p=e.sent,console.log(p.data);case 23:d([]),m({tangible:""}),P([]),B([]);case 27:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(w.jsxs)("div",{children:[Object(w.jsx)(C,{currentUser:t}),Object(w.jsxs)("div",{className:"createListingContainer",children:[Object(w.jsx)("div",{className:"createListingHeader",children:Object(w.jsx)("span",{children:"Make your swap today!"})}),Object(w.jsxs)(f.a,{className:"createListingContent",children:[Object(w.jsx)(N.a,{xs:6,children:Object(w.jsx)(K.a,{className:"uploadImagesCard shadow p-3 mb-5 bg-white rounded",children:Object(w.jsxs)(K.a.Body,{children:[Object(w.jsx)("h5",{className:"uploadImagesCardHeader",children:"Drag and Drop images here"}),Object(w.jsx)("h6",{className:"uploadImagesCardSubHeader",children:"or click to upload"}),Object(w.jsx)(Le.a,{children:Object(w.jsxs)(Le.a.Group,{controlId:"images",children:[Object(w.jsx)(Le.a.Control,{type:"text",style:{display:"none"},isInvalid:!!O.images}),Object(w.jsx)("div",{className:"swapImgDragAndDropWrapper",children:Object(w.jsxs)("section",{className:"container",children:[Object(w.jsxs)("div",Object(Te.a)(Object(Te.a)({},U({style:G})),{},{className:"dragAndDropDiv",children:[Object(w.jsx)("input",Object(Te.a)({},D())),Object(w.jsx)("p",{children:Object(w.jsx)(Re.a,{fontSize:"large"})}),Object(w.jsx)("p",{children:"Drop away your swap images..."})]})),Object(w.jsx)("aside",{className:"thumbsContainer",children:W})]})}),Object(w.jsx)(Le.a.Control.Feedback,{type:"invalid",children:O.images})]})})]})})}),Object(w.jsx)(N.a,{xs:6,className:"createListingContentRight",children:Object(w.jsxs)(Le.a,{className:"formWrapper",children:[Object(w.jsxs)(Le.a.Group,{controlId:"title",children:[Object(w.jsx)(Le.a.Label,{children:"Title"}),Object(w.jsx)(Le.a.Control,{className:"swapAwayFormControl",type:"text",maxlength:"50",placeholder:"Enter your swap title",value:b.title?b.title:"",onChange:function(e){return H("title",e.target.value)},isInvalid:!!O.title}),Object(w.jsx)(Le.a.Control.Feedback,{type:"invalid",children:O.title}),Object(w.jsx)(Le.a.Text,{className:"text-muted",children:"Create an interesting title for your swap!"})]}),Object(w.jsxs)(Le.a.Group,{controlId:"description",children:[Object(w.jsx)(Le.a.Label,{children:"Description"}),Object(w.jsx)(Le.a.Control,{className:"swapAwayFormControl",as:"textarea",maxlength:"500",rows:3,value:b.description?b.description:"",placeholder:"Describe your swap",onChange:function(e){return H("description",e.target.value)},isInvalid:!!O.description}),Object(w.jsx)(Le.a.Control.Feedback,{type:"invalid",children:O.description})]}),Object(w.jsxs)(Le.a.Group,{controlId:"tangible",children:[Object(w.jsx)(Le.a.Label,{children:"Is your item Tangible or Intangible?"}),Object(w.jsxs)(Le.a.Control,{className:"swapAwayFormControl",as:"select",value:b.tangible,onChange:function(e){return H("tangible",e.target.value)},isInvalid:!!O.tangible,children:[Object(w.jsx)("option",{value:"",disabled:!0,hidden:!0,selected:!0,children:"Select category:"}),Object(w.jsx)("option",{value:"tangibles",children:"Tangible"}),Object(w.jsx)("option",{value:"intagibles",children:"Intangible"})]}),Object(w.jsx)(Le.a.Control.Feedback,{type:"invalid",children:O.tangible})]}),Object(w.jsxs)(Le.a.Group,{controlId:"swapCategories",children:[Object(w.jsx)(Le.a.Label,{children:"What is your swap category?"}),Object(w.jsx)(Le.a.Control,{type:"text",style:{display:"none"},isInvalid:!!O.swapCategories}),Object(w.jsx)("div",{className:a.root,children:Object(w.jsx)(Ee.a,{multiple:!0,limitTags:2,id:"multiple-limit-tags",options:n,value:L,getOptionLabel:function(e){return e.title},onChange:function(e,t){O.swapCategories&&v(Object(Te.a)(Object(Te.a)({},O),{},{swapCategories:null})),B(t),console.log(t)},renderInput:function(e){return Object(w.jsx)(De.a,Object(Te.a)(Object(Te.a)({},e),{},{variant:"outlined",label:"Select categories"}))}})}),Object(w.jsx)(Le.a.Control.Feedback,{type:"invalid",children:O.swapCategories})]}),Object(w.jsxs)(Le.a.Group,{controlId:"idealCategories",children:[Object(w.jsx)(Le.a.Label,{children:"What is your ideal swap?"}),Object(w.jsx)(Le.a.Control,{type:"text",style:{display:"none"},isInvalid:!!O.idealCategories}),Object(w.jsx)("div",{className:a.root,children:Object(w.jsx)(Ee.a,{multiple:!0,limitTags:2,id:"multiple-limit-tags2",options:n,value:y,getOptionLabel:function(e){return e.title},onChange:function(e,t){O.idealCategories&&v(Object(Te.a)(Object(Te.a)({},O),{},{idealCategories:null})),P(t),console.log(t)},renderInput:function(e){return Object(w.jsx)(De.a,Object(Te.a)(Object(Te.a)({},e),{},{variant:"outlined",label:"Select ideal swaps"}))}})}),Object(w.jsx)(Le.a.Control.Feedback,{type:"invalid",children:O.idealCategories})]}),Object(w.jsx)(S.a,{className:"postButton",variant:"warning",onClick:z,children:"Post Swap"})]})})]})]})]})}a(332),a(333);function Ve(e){var t=e.imgLinkArray;return Object(s.useEffect)((function(){console.log(t)}),[t]),Object(w.jsx)("div",{className:"singleItemWrapper",children:Object(w.jsx)(Y.a,{responsive:{superLargeDesktop:{breakpoint:{max:4e3,min:3e3},items:8},desktop:{breakpoint:{max:3e3,min:1024},items:6},tablet:{breakpoint:{max:1024,min:464},items:2},mobile:{breakpoint:{max:464,min:0},items:1}},children:null===t||void 0===t?void 0:t.map((function(e){return Object(w.jsx)(Y.a.Item,{children:Object(w.jsx)("img",{className:"singleItemCarouselItemImg",src:"http://localhost:8080/images/"+e,alt:""})})}))})})}a(334);var ze=a(444);function qe(e){var t=e.itemUserId,a="http://localhost:8080/images/",n=Object(s.useState)(null),c=Object(u.a)(n,2),r=c[0],i=c[1],d=Object(h.g)(),j=Object(s.useContext)(ee).user;Object(s.useEffect)((function(){(function(){var e=Object(l.a)(o.a.mark((function e(){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=6;break}return e.next=3,I.a.get("/api/users?userId="+t);case 3:a=e.sent,i(a.data),console.log("itemUser is: "+a.data);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[t]);var p=function(){var e=Object(l.a)(o.a.mark((function e(){var a,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(j){e.next=5;break}d.push("/"),console.log("pushed to login"),e.next=18;break;case 5:return e.next=7,I.a.get("/api/conversations/find/"+j._id+"/"+t);case 7:if(!((a=e.sent).data.length>0)){e.next=13;break}d.push("/chat/"+a.data[0]._id),console.log("pushed to chat id:"+a.data[0]._id),e.next=18;break;case 13:return e.next=15,I.a.post("/api/conversations",{members:[t,j._id]});case 15:s=e.sent,d.push("/chat/"+s._id),console.log(s.data);case 18:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(w.jsx)("div",{children:Object(w.jsxs)(ze.a,{className:"swapAwayPrompt",children:[Object(w.jsx)(oe.a,{children:Object(w.jsxs)(f.a,{children:[Object(w.jsx)(N.a,{sm:2,children:Object(w.jsx)("img",{className:"swapAwayUserImg",src:r&&r.profilePicture?a+r.profilePicture:a+"person/noAvatar.png",onClick:function(){r&&d.push("/profile/"+r.username+"/listings")},alt:""})}),Object(w.jsx)(N.a,{sm:10,children:Object(w.jsx)(ze.a.Heading,{className:"swapAwayUsername",style:{fontSize:"1rem"},children:r?r.username:""})})]})}),Object(w.jsx)(S.a,{className:"swapAwayButton",variant:"warning",onClick:p,children:Object(w.jsxs)("div",{className:"swapAwayButtonTextGroup",children:[Object(w.jsx)(x.a,{}),Object(w.jsx)("span",{className:"swapAwayButtonText",children:"Swap Away!"})]})})]})})}a(335);var Je=a(167),Ke=a.n(Je),$e=a(168),Ye=a.n($e),Qe=a(228),Xe=a.n(Qe);function Ze(e){var t=e.itemUserId,a=e.itemStatus,n=e.handleReserve,c=e.handleUnreserve,r=e.handleSwap,i=e.handleUnswap,d=e.handleDelete,j="http://localhost:8080/images/",p=Object(s.useState)(null),b=Object(u.a)(p,2),m=b[0],x=b[1],O=Object(s.useState)(!1),v=Object(u.a)(O,2),g=v[0],k=v[1],y=Object(s.useState)(""),C=Object(u.a)(y,2),P=C[0],T=C[1],_=Object(s.useState)(""),L=Object(u.a)(_,2),B=L[0],R=L[1],E=Object(h.g)();Object(s.useEffect)((function(){(function(){var e=Object(l.a)(o.a.mark((function e(){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=6;break}return e.next=3,I.a.get("/api/users?userId="+t);case 3:a=e.sent,x(a.data),console.log("itemUser is: "+a.data);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[t]);var U=function(){var e=Object(l.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("Enter"!==t.key){e.next=20;break}if(t.preventDefault(),console.log("user pressed enter key and the value is: "+P),""===P){e.next=18;break}return console.log("input is not empty"),e.prev=5,e.next=8,I.a.get("/api/agreements?id="+P);case 8:(a=e.sent)&&200===a.status&&a.data?a.data.parties.length>=2||a.data.items.length>=2?(console.log("Error 2"),R("This agreement id already involves 2 parties or 2 items")):(r(a.data._id),T(""),k(!1)):(console.log("Error 1"),R("Agreement does not exist!")),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(5),console.log("Error 1"),R("Agreement does not exist!");case 16:e.next=20;break;case 18:console.log("input empty!"),R("Agreement code cannot be empty!");case 20:case"end":return e.stop()}}),e,null,[[5,12]])})));return function(t){return e.apply(this,arguments)}}();return Object(w.jsx)("div",{children:Object(w.jsx)(ze.a,{className:"userItemCommandPrompt",children:Object(w.jsxs)(oe.a,{children:[Object(w.jsxs)(f.a,{children:[Object(w.jsx)(N.a,{sm:2,children:Object(w.jsx)("img",{className:"userItemCommandUserImg",src:m&&m.profilePicture?j+m.profilePicture:j+"person/noAvatar.png",onClick:function(){m&&E.push("/profile/"+m.username+"/listings")},alt:""})}),Object(w.jsx)(N.a,{sm:10,children:Object(w.jsx)(ze.a.Heading,{className:"userItemCommandUsername",style:{fontSize:"1rem"},children:m?m.username:"Anonymous"})})]}),Object(w.jsxs)("div",{className:"buttonWrapper",children:["waiting"===a?Object(w.jsx)("div",{children:Object(w.jsxs)(S.a,{className:"button",variant:"warning",onClick:n,children:[Object(w.jsx)(Ke.a,{className:"icons"}),Object(w.jsx)("span",{className:"action",children:"Mark as Reserve"})]})}):"reserved"===a?Object(w.jsx)("div",{children:Object(w.jsxs)(S.a,{className:"button",variant:"warning",onClick:c,children:[Object(w.jsx)(Ke.a,{className:"icons"}),Object(w.jsx)("span",{className:"action",children:"Unreserve"})]})}):Object(w.jsx)(w.Fragment,{}),Object(w.jsx)("div",{children:"deleted"===a?Object(w.jsx)(w.Fragment,{}):"swapped"===a?Object(w.jsxs)(S.a,{className:"button",variant:"warning",children:[Object(w.jsx)(Ye.a,{className:"icons"}),Object(w.jsx)("span",{className:"action",onClick:i,children:"Cancel Agreement"})]}):Object(w.jsxs)(w.Fragment,{children:[Object(w.jsxs)(S.a,{className:"button",variant:"warning",children:[Object(w.jsx)(Ye.a,{className:"icons"}),Object(w.jsx)("span",{className:"action",onClick:function(){return k(!g)},children:"Mark as Swapped"})]}),g?Object(w.jsx)(Le.a,{className:"userItemCommandForm",children:Object(w.jsxs)(Le.a.Group,{controlId:"title",children:[Object(w.jsx)(Le.a.Control,{className:"userItemCommandFormControl",type:"input",maxlength:"30",placeholder:"Enter your agreement code",value:P,onChange:function(e){T(e.target.value),R(""),console.log("changed to: "+e.target.value)},onKeyDown:U,isInvalid:""!==B}),Object(w.jsx)(Le.a.Control.Feedback,{type:"invalid",children:B})]})}):Object(w.jsx)(w.Fragment,{})]})}),Object(w.jsx)("div",{children:"deleted"===a||"swapped"===a?Object(w.jsx)(w.Fragment,{}):Object(w.jsxs)(S.a,{className:"button",variant:"warning",onClick:d,children:[Object(w.jsx)(Xe.a,{className:"icons"}),Object(w.jsx)("span",{className:"action",children:"Delete"})]})})]})]})})})}function et(){var e=Object(s.useContext)(ee),t=e.user,a=(e.sockio,Object(h.h)().itemId),n=Object(s.useState)(null),c=Object(u.a)(n,2),r=c[0],i=c[1],d=Object(h.g)(),j=Object(s.useState)(""),p=Object(u.a)(j,2),b=p[0],m=p[1];Object(s.useEffect)((function(){(function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!a){e.next=7;break}return e.next=4,I.a.get("/api/items?itemId="+a);case 4:return t=e.sent,e.next=7,i(t.data);case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}})()()}),[a]);var x=function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!a){e.next=6;break}return e.next=4,I.a.put("/api/items/update/status/"+a,{status:"reserved"});case 4:200===(t=e.sent).status&&t.data&&i(t.data);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),O=function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!a){e.next=6;break}return e.next=4,I.a.put("/api/items/update/status/"+a,{status:"waiting"});case 4:200===(t=e.sent).status&&t.data&&i(t.data);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),v=function(){var e=Object(l.a)(o.a.mark((function e(s){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("handleSwap called with agreementId: "+s),e.prev=1,e.next=4,I.a.put("/api/agreements/update/addParties/"+s,{userId:null===t||void 0===t?void 0:t._id,itemId:a});case 4:if(200!==e.sent.status||!a){e.next=10;break}return e.next=8,I.a.put("/api/items/update/status/"+a,{status:"swapped"});case 8:200===(n=e.sent).status&&n.data&&i(n.data);case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(l.a)(o.a.mark((function e(){var s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("handleUnswap called"),e.prev=1,e.next=4,I.a.put("/api/agreements/update/removeParties",{userId:null===t||void 0===t?void 0:t._id,itemId:a});case 4:if(200!==e.sent.status||!a){e.next=10;break}return e.next=8,I.a.put("/api/items/update/status/"+a,{status:"waiting"});case 8:200===(s=e.sent).status&&s.data&&i(s.data);case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(){return e.apply(this,arguments)}}(),k=function(){var e=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("handleDelete called"),e.prev=1,e.next=4,I.a.delete("/api/items?itemId="+(null===r||void 0===r?void 0:r._id));case 4:200===e.sent.status&&d.push("/profile/"+t.username+"/listings"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),y=function(e){console.log("copy link");var t=document.createElement("input"),a="link"===e?window.location.href:(null===r||void 0===r?void 0:r._id)?r._id:"";document.body.appendChild(t),t.value=a,t.select(),document.execCommand("copy"),document.body.removeChild(t),m("link"===e?"Link to this page has been copied":"Item ID has been copied")};return Object(w.jsxs)("div",{className:"itemPage",children:[Object(w.jsx)(C,{currentUser:t}),Object(w.jsxs)("label",{className:"itemHeader",children:[r?r.title:"Error: No Item Displayed",r?Object(w.jsx)($.a,{className:"itemTag",label:"waiting"===r.status?"available":r.status,size:"small",color:"waiting"===r.status?"":"reserved"===r.status?"primary":"secondary",style:{marginLeft:"15px",marginRight:"10px",marginTop:"0px"}}):Object(w.jsx)(w.Fragment,{})]}),Object(w.jsx)(oe.a,{className:"itemImg",children:Object(w.jsxs)(f.a,{children:[Object(w.jsx)(N.a,{children:Object(w.jsx)(Ve,{imgLinkArray:r?r.img:[]})}),Object(w.jsx)(N.a,{children:(null===t||void 0===t?void 0:t._id)===(null===r||void 0===r?void 0:r.userId)?Object(w.jsx)(Ze,{itemUserId:null===r||void 0===r?void 0:r.userId,itemStatus:null===r||void 0===r?void 0:r.status,handleReserve:x,handleUnreserve:O,handleDelete:k,handleSwap:v,handleUnswap:g}):Object(w.jsx)(qe,{itemUserId:null===r||void 0===r?void 0:r.userId})})]})}),Object(w.jsxs)("div",{className:"itemHeaderSecond",children:[Object(w.jsx)("div",{className:"itemGetLink",onClick:function(){return y("link")},children:"Copy Link"}),Object(w.jsx)("div",{className:"itemGetLink",onClick:function(){return y("id")},children:"Copy Item ID"}),Object(w.jsx)("div",{className:"itemCopyLinkText",children:b})]}),Object(w.jsxs)("div",{className:"itemDescription",children:[Object(w.jsx)("h5",{children:"Description"}),Object(w.jsx)("span",{children:r?r.desc:"The item does not exist, and hence no description"})]}),Object(w.jsxs)("div",{className:"itemIdealSwaps",children:[Object(w.jsx)("h5",{children:"Ideal swaps"}),null===r||void 0===r?void 0:r.idealSwaps.map((function(e){return Object(w.jsx)($.a,{className:"tag",label:e,size:"small",color:"secondary",style:{marginRight:"5px"}},e)}))]})]})}a(336);var tt=a(230),at=a.n(tt),st=a(231),nt=a.n(st),ct=a(232),rt=a.n(ct),it=a(229);function ot(){var e=Object(s.useState)(""),t=Object(u.a)(e,2),a=t[0],n=t[1],c=Object(s.useState)(""),r=Object(u.a)(c,2),i=r[0],d=r[1],j=Object(s.useContext)(ee),p=j.user,b=j.dispatch,m=Object(s.useRef)(),x=Object(s.useRef)();Object(s.useEffect)((function(){console.log("user is changed"),console.log(p)}),[p]);var h=function(){var e=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I.a.post("/api/auth/login",{username:m.current.value,password:x.current.value}).then((function(){m.current.setCustomValidity(""),x.current.setCustomValidity("")}));case 3:e.sent,e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),400===e.t0.response.status&&m.current.setCustomValidity("Incorrect username or password");case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}(),v=function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n(t.target.value),console.log(t.target.value),h();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:d(t.target.value),console.log(t.target.value),h();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),function(){var e=Object(l.a)(o.a.mark((function e(t,a){var s,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a({type:"LOGIN_START"}),e.prev=1,e.next=4,I.a.post("/api/auth/login",t);case 4:return s=e.sent,e.next=7,Object(it.io)();case 7:(n=e.sent).on("connect",(function(){n.emit("addUser",s.data._id),console.log("sock inside try block: ",n),a({type:"LOGIN_SUCCESS",payload:{user:s.data,sock:n}})})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),a({type:"LOGIN_FAILURE",payload:e.t0});case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t,a){return e.apply(this,arguments)}}()({username:a,password:i},b);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(w.jsx)("div",{className:"login",children:Object(w.jsxs)("div",{className:"loginWrapper",children:[Object(w.jsx)("div",{className:"loginTop",children:Object(w.jsx)(at.a,{className:"loginShoppingCartIcon",style:{fontSize:220,color:"white"}})}),Object(w.jsxs)("form",{className:"loginBottom",onSubmit:f,children:[Object(w.jsxs)("div",{className:"loginInputWrapper",children:[Object(w.jsx)(nt.a,{style:{position:"absolute",color:"white",fontSize:32,top:32,left:10}}),Object(w.jsx)("input",{placeholder:"USERNAME",onChange:v,value:a,ref:m,required:!0,className:"loginInput"})]}),Object(w.jsxs)("div",{className:"loginInputWrapper",children:[Object(w.jsx)(rt.a,{style:{position:"absolute",color:"white",fontSize:32,top:32,left:10}}),Object(w.jsx)("input",{placeholder:"PASSWORD",required:!0,onChange:g,value:i,ref:x,className:"loginInput",type:"password"})]}),Object(w.jsx)("button",{className:"loginButton",type:"submit",children:"LOGIN"}),Object(w.jsx)(O.b,{to:"/register",className:"loginBottomLink",children:"Forgot password?"}),Object(w.jsx)(O.b,{to:"/register",className:"loginBottomLink",children:"New to ReHash? Sign up now!"})]})]})})}a(357);var lt=a(64);function ut(e){var t=e.active,a=e.userId,n=e.lastMessageText,c=e.lastMessageTime,r=e.online,i="http://localhost:8080/images/",d=Object(s.useState)(""),j=Object(u.a)(d,2),p=j[0],b=j[1],m=Object(s.useState)(null),x=Object(u.a)(m,2),h=x[0],O=x[1];return Object(s.useEffect)((function(){console.log("lastMessageText updated. the new message is: ",n)}),[n]),Object(s.useEffect)((function(){c&&b(Object(lt.a)(c));var e=setInterval((function(){c&&p!==Object(lt.a)(c)&&b(Object(lt.a)(c))}),6e4);return function(){return clearInterval(e)}}),[c]),Object(s.useEffect)((function(){(function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I()("/api/users?userId="+a);case 3:return t=e.sent,e.next=6,O(t.data);case 6:console.log("successfully got user"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}})()()}),[a]),Object(w.jsxs)("div",{className:t?"conversation conversationActive":"conversation",children:[Object(w.jsxs)("div",{className:"conversationLeft",children:[Object(w.jsx)("img",{src:(null===h||void 0===h?void 0:h.profilePicture)?i+h.profilePicture:i+"person/noAvatar.png",alt:"",className:"conversationImg"}),r?Object(w.jsx)("div",{className:"conversationBadge"}):Object(w.jsx)(w.Fragment,{})]}),Object(w.jsxs)("div",{className:"conversationRight",children:[Object(w.jsxs)("div",{className:"conversationRightTop",children:[Object(w.jsx)("div",{className:"conversationName",children:null===h||void 0===h?void 0:h.username}),Object(w.jsx)("div",{className:"conversationStatus",children:p})]}),Object(w.jsx)("span",{className:"conversationLastMsg",children:n})]})]})}a(358);function dt(e){var t=e.message,a=e.own,n=e.pictureLink,c=Object(s.useState)(""),r=Object(u.a)(c,2),i=r[0],o=r[1],l=Object(s.useState)(!1),d=Object(u.a)(l,2),j=d[0],p=d[1];return Object(s.useEffect)((function(){t&&o(Object(lt.a)(t.createdAt));var e=setInterval((function(){i!==Object(lt.a)(t.createdAt)&&o(Object(lt.a)(t.createdAt))}),6e4);return function(){return clearInterval(e)}}),[t]),a?Object(w.jsxs)("div",{className:"messageOwn",children:[Object(w.jsxs)("div",{className:"messageTopOwn",children:[Object(w.jsx)("img",{className:"messageImgOwn",src:n,alt:""}),Object(w.jsx)("p",{className:"messageTextOwn",onClick:function(){p(!j)},children:t.text})]}),j?Object(w.jsx)("div",{className:"messageBottom",children:i}):Object(w.jsx)(w.Fragment,{})]}):Object(w.jsxs)("div",{className:"message",children:[Object(w.jsxs)("div",{className:"messageTop",children:[Object(w.jsx)("img",{className:"messageImg",src:n,alt:""}),Object(w.jsx)("p",{className:"messageText",onClick:function(){p(!j)},children:t.text})]}),j?Object(w.jsx)("div",{className:"messageBottom",children:i}):Object(w.jsx)(w.Fragment,{})]})}a(359);function jt(){var e=Object(s.useState)([]),t=Object(u.a)(e,2),a=t[0],n=t[1],c=Object(s.useState)(null),r=Object(u.a)(c,2),i=r[0],d=r[1],j=Object(s.useState)([]),p=Object(u.a)(j,2),b=p[0],m=p[1],x=Object(s.useState)(""),O=Object(u.a)(x,2),v=O[0],g=O[1],f=Object(s.useState)(null),N=Object(u.a)(f,2),k=N[0],y=N[1],S=Object(s.useState)([]),P=Object(u.a)(S,2),T=P[0],_=P[1],L=Object(s.useState)(""),B=Object(u.a)(L,2),R=B[0],E=B[1],U=Object(s.useState)(null),D=Object(u.a)(U,2),A=D[0],F=D[1],M=Object(s.useState)(""),G=Object(u.a)(M,2),W=G[0],H=G[1],V="http://localhost:8080/images/",z=Object(s.useRef)(),q=Object(h.h)().initialActiveConvoId,J=Object(s.useContext)(ee),K=J.user,$=J.sockio,Y=Object(h.g)();Object(s.useEffect)((function(){(function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("0"===q){e.next=6;break}return console.log("initialActiveConvoId is: "+q),e.next=4,I.a.get("/api/conversations/id/"+q);case 4:t=e.sent,d(t.data);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[q]),Object(s.useEffect)((function(){console.log("socket is: ",$.id),$.on("getMessage",(function(e){y({sender:e.senderId,text:e.text,createdAt:Date.now()})}))}),[$]),Object(s.useEffect)((function(){k&&(null===i||void 0===i?void 0:i.members.includes(k.sender))&&m((function(e){return[].concat(Object(Ie.a)(e),[k])}))}),[k,i]),Object(s.useEffect)((function(){$.on("getUsers",(function(e){console.log("getUser received on client side"),_(K.chatFollow.filter((function(t){return e.some((function(e){return e.userId===t}))})))}))}),[K,$]),Object(s.useEffect)((function(){(function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I.a.get("/api/conversations/"+K._id);case 3:return t=e.sent,e.next=6,n(t.data);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}})()()}),[K._id,b,T]),Object(s.useEffect)((function(){(function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I.a.get("/api/messages/"+(null===i||void 0===i?void 0:i._id));case 3:t=e.sent,m(t.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}})()()}),[i]),Object(s.useEffect)((function(){var e=null===i||void 0===i?void 0:i.members.find((function(e){return e!==K._id}));(function(){var t=Object(l.a)(o.a.mark((function t(){var a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,I.a.get("/api/users?userId="+e);case 3:return a=t.sent,t.next=6,F(a.data);case 6:t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}})()()}),[K,i]),Object(s.useEffect)((function(){var e=function(){var e=Object(l.a)(o.a.mark((function e(){var t,a,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="",e.prev=1,e.next=4,I.a.get("/api/users?userId="+(null===A||void 0===A?void 0:A._id));case 4:a=e.sent,s=a.data.lastActive,console.log("newLastActive: ",s),t=Object(lt.a)(s),console.log("LOOK AT ME: TIMEAGO ",t),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),t=Object(lt.a)(null===A||void 0===A?void 0:A.lastActive),console.log(e.t0);case 15:H("Active "+t);case 16:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(){return e.apply(this,arguments)}}();e();var t=setInterval((function(){e()}),5e3);return function(){return clearInterval(t)}}),[A]);var Q=function(){var e=Object(l.a)(o.a.mark((function e(t){var a,s,n,c,r,l;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===v){e.next=26;break}return t.preventDefault(),e.next=4,g("");case 4:return a={sender:K._id,text:v,conversationId:i._id},e.prev=5,e.next=8,I.a.post("/api/messages",a);case 8:return s=e.sent,n=s.data.text,c=s.data.createdAt,e.next=13,I.a.put("/api/conversations/"+i._id+"/lastmessage",{lastMessageText:n,lastMessageTime:c});case 13:return r=e.sent,console.log(r),console.log("currentChat is: ",i),e.next=18,m([].concat(Object(Ie.a)(b),[s.data]));case 18:console.log("updated messages. the new messaged sent is: ",s.data.text),l=i.members.find((function(e){return e!==K._id})),$.emit("sendMessage",{senderId:K._id,receiverId:l,text:v}),e.next=26;break;case 23:e.prev=23,e.t0=e.catch(5),console.log(e.t0);case 26:case"end":return e.stop()}}),e,null,[[5,23]])})));return function(t){return e.apply(this,arguments)}}(),X=function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("generate agreement is clicked"),e.next=3,I.a.post("/api/agreements");case 3:(t=e.sent).data&&t.data._id&&g("Your agreement code has been generated: "+t.data._id);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(s.useEffect)((function(){var e;null===(e=z.current)||void 0===e||e.scrollIntoView({behavior:"auto"})}),[b]),Object(w.jsxs)("div",{children:[Object(w.jsx)(C,{currentUser:K}),Object(w.jsxs)("div",{className:"messenger",children:[Object(w.jsx)("div",{className:"chatMenu",children:Object(w.jsxs)("div",{className:"chatMenuWrapper",children:[Object(w.jsx)("input",{placeholder:"Search for users",className:"chatMenuInput",onChange:function(e){return E(e.target.value)},value:R}),a.map((function(e){var t=e.members.find((function(e){return e!==K._id}));return Object(w.jsx)("div",{onClick:function(){return d(e)},children:Object(w.jsx)(ut,{online:T.includes(t),lastMessageText:e.lastMessageText,lastMessageTime:e.lastMessageTime,userId:t,active:!!i&&e._id===i._id})})}))]})}),Object(w.jsx)("div",{className:"chatBox",children:Object(w.jsx)("div",{className:"chatBoxWrapper",children:i?Object(w.jsxs)(w.Fragment,{children:[Object(w.jsxs)("div",{className:"chatBoxHeader",children:[Object(w.jsxs)("div",{className:"chatBoxHeaderLeft",children:[Object(w.jsx)("img",{src:(null===A||void 0===A?void 0:A.profilePicture)?V+A.profilePicture:V+"person/noAvatar.png",alt:"",className:"chatBoxHeaderImg"}),Object(w.jsxs)("div",{className:"chatBoxHeaderContent",children:[Object(w.jsx)("div",{className:"chatBoxHeaderName",children:null===A||void 0===A?void 0:A.username}),Object(w.jsx)("div",{className:"chatBoxHeaderStatus",children:T.includes(null===A||void 0===A?void 0:A._id)?"Online now":W})]})]}),Object(w.jsx)("button",{className:"chatBoxViewProfileButton",onClick:function(){Y.push("/profile/"+A.username+"/listings")},children:"View Profile"})]}),Object(w.jsx)("div",{className:"chatBoxTop",children:b.map((function(e){return Object(w.jsx)("div",{ref:z,children:Object(w.jsx)(dt,{message:e,own:e.sender===K._id,pictureLink:e.sender===K._id?(null===K||void 0===K?void 0:K.profilePicture)?V+K.profilePicture:V+"person/noAvatar.png":(null===A||void 0===A?void 0:A.profilePicture)?V+A.profilePicture:V+"person/noAvatar.png"})})}))}),Object(w.jsxs)("div",{className:"chatBoxBottom",children:[Object(w.jsx)("textarea",{className:"chatMessageInput",placeholder:"Write a message ...",onChange:function(e){return g(e.target.value)},value:v,onKeyDown:function(e){"Enter"===e.key&&(e.preventDefault(),console.log("new message when eneter is pressed: ",v),g(v),""!==v&&(Q(e),console.log("passing to handleSendMessage")))}}),Object(w.jsx)("button",{className:"chatAgreementButton",onClick:X,children:"Generate Agreement"}),Object(w.jsx)("button",{className:"chatSubmitButton",onClick:Q,children:"Send"})]})]}):Object(w.jsxs)("span",{className:"noConversationText",children:["Open a conversation to start a chat ",$.id]})})})]})]})}a(360);function pt(){var e=Object(s.useContext)(ee),t=e.user,a=(e.sockio,Object(h.h)().username),n=Object(s.useState)(null),c=Object(u.a)(n,2),r=c[0],i=c[1],d=Object(s.useState)([]),j=Object(u.a)(d,2),p=j[0],b=j[1];return Object(s.useEffect)((function(){(function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=6;break}return e.next=3,I.a.get("/api/users?username="+a);case 3:t=e.sent,i(t.data),console.log("profileUser is: "+t.data);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[a]),Object(s.useEffect)((function(){(function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=5;break}return e.next=3,I.a.get("/api/groups/filter?userId="+r._id);case 3:t=e.sent,b(t.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[r]),Object(w.jsxs)("div",{children:[Object(w.jsx)("div",{className:"myGroupsPageTopSection",children:Object(w.jsx)(C,{currentUser:t})}),Object(w.jsxs)("div",{className:"myGroupsPageMiddleSection",children:[Object(w.jsx)(he,{className:"sidebar",sidebarUser:r}),Object(w.jsx)("div",{className:"myGroupsPageMiddleSectionRight",children:Object(w.jsxs)("div",{className:"myGroupsPageMiddleSectionRightHeader",children:[Object(w.jsx)("span",{className:"myGroupsPageMiddleSectionRightHeaderText",children:"Groups You Have Joined"}),Object(w.jsx)("div",{className:"myGroupsPageGroupIconWrapper",children:Object(w.jsxs)(f.a,{className:"myGroupsPageGroupIconContainer",xl:5,lg:4,md:3,xs:2,children:[Object(w.jsx)(N.a,{children:Object(w.jsx)(ae,{groupImg:"group/add.jpg",create:!0})}),p.map((function(e){return Object(w.jsx)(N.a,{children:Object(w.jsx)(ae,{groupImg:e.groupImg,groupName:e.groupName,groupId:e._id})},e._id)})),p.map((function(e){return Object(w.jsx)(N.a,{children:Object(w.jsx)(ae,{groupImg:e.groupImg,groupName:e.groupName,groupId:e._id})},e._id)})),p.map((function(e){return Object(w.jsx)(N.a,{children:Object(w.jsx)(ae,{groupImg:e.groupImg,groupName:e.groupName,groupId:e._id})},e._id)}))]})})]})})]})]})}a(361);function bt(){var e=Object(s.useContext)(ee),t=e.user,a=e.sockio,n=e.dispatch,c=(Object(h.h)().username,Object(s.useState)(null)),r=Object(u.a)(c,2),i=r[0],d=r[1],j=Object(s.useState)({showPassword:!1}),p=Object(u.a)(j,2),b=p[0],m=p[1],x=Object(s.useState)({}),O=Object(u.a)(x,2),v=O[0],g=O[1],k=Object(s.useState)({}),y=Object(u.a)(k,2),P=y[0],T=y[1],_=Object(s.useState)(!1),L=Object(u.a)(_,2),B=L[0],R=L[1];Object(s.useEffect)((function(){console.log("user is changed"),console.log(t)}),[t]);Object(s.useEffect)((function(){return function(){i&&URL.revokeObjectURL(i.preview)}}),[i]);var E=function(){var e=Object(l.a)(o.a.mark((function e(s){var c,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s.preventDefault(),i){e.next=5;break}T({imgFile:"No image uploaded!"}),e.next=12;break;case 5:return(c=new FormData).append("file",i),console.log(c),r=function(){var e=Object(l.a)(o.a.mark((function e(){var s,r,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I.a.post("/api/upload/person",c);case 3:if(200!==(s=e.sent).status){e.next=12;break}return r={profilePicture:s.data.imagePath},i=Object(Te.a)(Object(Te.a)({},t),r),console.log(i),e.next=10,I.a.put("/api/users/"+t._id,{profilePicture:s.data.imagePath});case 10:200===e.sent.status&&n({type:"UPDATE",payload:{user:i,sock:a}});case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}(),e.next=11,r();case 11:d(null);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=function(e,t){m(Object(Te.a)(Object(Te.a)({},b),{},Object(Pe.a)({},e,t))),v[e]&&g(Object(Te.a)(Object(Te.a)({},v),{},Object(Pe.a)({},e,null))),B&&R(!1)},D=function(){var e=Object(l.a)(o.a.mark((function e(a){var s,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),R(!1),s=A(),!(Object.keys(s).length>0)){e.next=8;break}g(s),console.log(s),e.next=11;break;case 8:return n=function(){var e=Object(l.a)(o.a.mark((function e(){var a,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I.a.put("/api/auth/updatePassword/"+t._id,{currentPassword:b.currentPassword,newPassword:b.newPassword});case 3:(a=e.sent)&&200===a.status&&"User password has been updated"===a.data.message?(R(!0),m({showPassword:!1,confirmPassword:"",newPassword:"",currentPassword:""})):a&&200===a.status&&"wrong password"===a.data.message&&(s={currentPassword:"Wrong Password!"},g(Object(Te.a)(Object(Te.a)({},v),s))),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),e.next=11,n();case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=b.currentPassword,t=b.newPassword,a=b.confirmPassword,s={};return e&&""!==e||(s.currentPassword="Current password cannot be empty!"),(!t||t.length<6)&&(s.newPassword="New password must have at least 6 characters!"),a&&a===t||(s.confirmPassword="New and confirm passwords do not match!"),s};return Object(w.jsxs)("div",{children:[Object(w.jsx)(C,{currentUser:t}),Object(w.jsxs)("div",{className:"settingsContainer",children:[Object(w.jsx)(he,{sidebarUser:t}),Object(w.jsxs)("div",{className:"settingsRight",children:[Object(w.jsx)("span",{className:"settingsHeader",children:"Settings"}),Object(w.jsxs)(oe.a,{className:"settingsWrapper",children:[Object(w.jsxs)(K.a,{style:{width:"60em",height:"19em"},className:"settingsUserProfileContainer shadow p-3 mb-5 bg-white rounded",children:[Object(w.jsx)("span",{className:"settingsUserProfileHeader",children:"User Profile"}),Object(w.jsx)(oe.a,{children:Object(w.jsxs)(f.a,{children:[Object(w.jsx)(N.a,{children:Object(w.jsx)("img",{src:i&&i.preview?i.preview:t&&t.profilePicture?"http://localhost:8080/images/"+t.profilePicture:"/assests/userProfile.png",alt:"",className:"userProfileImg"})}),Object(w.jsx)(N.a,{children:Object(w.jsxs)("div",{className:"settingsImgInstructions",children:[Object(w.jsx)("div",{className:"settingsImgInstructionsText",children:"Upload a profile picture of yourself to help others know more about you!"}),Object(w.jsxs)(Le.a.Group,{children:[Object(w.jsx)(Le.a.Control,{className:"imgUploadButton",as:"input",name:"image-upload",type:"file",accept:"image/*",onChange:function(e){var t=Object.assign(e.target.files[0],{preview:URL.createObjectURL(e.target.files[0])});d(t),t&&P.imgFile&&T({imgFile:null}),console.log(t.preview)},isInvalid:!!P.imgFile}),Object(w.jsx)(Le.a.Control.Feedback,{type:"invalid",children:P.imgFile})]}),Object(w.jsx)(S.a,{className:"changeProfilePictureButton",variant:"warning",onClick:E,children:"Change profile picture"})]})})]})})]}),Object(w.jsxs)(K.a,{style:{width:"60em"},className:"settingsPasswordContainer shadow p-3 mb-5 bg-white rounded",children:[Object(w.jsx)("span",{className:"settingsPasswordHeader",children:"Password"}),Object(w.jsxs)(Le.a,{children:[Object(w.jsxs)("div",{className:"passwordInputWrapper",children:[Object(w.jsxs)(Le.a.Group,{controlId:"oldPassword",children:[Object(w.jsx)(Le.a.Control,{className:"passwordInput",name:"currentPassword",type:b.showPassword?"text":"password",placeHolder:"Current Password",value:b.currentPassword,onChange:function(e){return U("currentPassword",e.target.value)},isInvalid:!!v.currentPassword,isValid:B}),Object(w.jsx)(Le.a.Control.Feedback,{type:"invalid",children:v.currentPassword})]}),Object(w.jsxs)(Le.a.Group,{controlId:"newPassword",children:[Object(w.jsx)(Le.a.Control,{className:"passwordInput",name:"newPassword",type:b.showPassword?"text":"password",placeHolder:"New Password",value:b.newPassword,onChange:function(e){return U("newPassword",e.target.value)},isInvalid:!!v.newPassword,isValid:B}),Object(w.jsx)(Le.a.Control.Feedback,{type:"invalid",children:v.newPassword})]}),Object(w.jsxs)(Le.a.Group,{controlId:"confirmPassword",children:[Object(w.jsx)(Le.a.Control,{className:"passwordInput",name:"confirmPassword",type:b.showPassword?"text":"password",placeHolder:"Confirm Password",value:b.confirmPassword,onChange:function(e){return U("confirmPassword",e.target.value)},isInvalid:!!v.confirmPassword,isValid:B}),Object(w.jsx)(Le.a.Control.Feedback,{type:"invalid",children:v.confirmPassword}),Object(w.jsx)(Le.a.Control.Feedback,{type:"valid",children:'"Password updated successfully"'})]})]}),Object(w.jsxs)("div",{children:[Object(w.jsx)("input",{type:"checkbox",checked:b.showPassword,onClick:function(){return U("showPassword",!b.showPassword)}}),Object(w.jsx)("label",{className:"checkboxLabel",children:"Show input"})]}),Object(w.jsx)("div",{children:Object(w.jsx)(S.a,{className:"passwordButton",variant:"warning",onClick:D,children:"Update password"})})]})]})]})]})]})]})}a(362),a(363);var mt=a(234),xt=a.n(mt),ht=a(233),Ot=a.n(ht);function vt(e){var t=e.group,a=e.isGroupMember,n=e.handleLeave,c=e.handleJoin,r=e.handleUpdateGroup,i="http://localhost:8080/images/",d=Object(s.useContext)(ee),j=d.user,p=(d.sockio,Object(s.useState)(!1)),b=Object(u.a)(p,2),m=b[0],x=b[1],O=Object(s.useState)(null),v=Object(u.a)(O,2),g=v[0],f=v[1],N=Object(s.useState)(""),k=Object(u.a)(N,2),y=k[0],C=k[1],S=Object(s.useState)(""),P=Object(u.a)(S,2),T=P[0],_=P[1],L=Object(s.useState)(""),B=Object(u.a)(L,2),R=B[0],E=B[1],U=Object(s.useState)(""),D=Object(u.a)(U,2),A=D[0],F=D[1],M=Object(s.useState)(!1),G=Object(u.a)(M,2),W=G[0],H=G[1],V=Object(s.useState)(""),z=Object(u.a)(V,2),q=z[0],J=z[1],K=Object(h.g)();Object(s.useEffect)((function(){t&&F(t.description+"(Delete this and press 'Enter' when done editing)")}),[t]);var $=function(){var e=Object(l.a)(o.a.mark((function e(a){var s,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("Enter"!==a.key){e.next=29;break}if(a.preventDefault(),_(T),!((T.match(/^\s*\n*\t*$/)||[]).length>0)){e.next=8;break}console.log("invitation name is empty!"),_(""),e.next=29;break;case 8:return console.log("trying to find user to invite..."),e.prev=9,e.next=12,I.a.get("/api/users?username="+T);case 12:if(200!==(s=e.sent).status||!t||!s.data){e.next=23;break}if(!t.members.includes(s.data._id)){e.next=18;break}C("User already in this group!"),e.next=23;break;case 18:return n={senderName:j.username,receiverId:s.data._id,invitationId:t._id,invitationName:t.groupName},e.next=21,I.a.post("/api/notifications",n);case 21:200===e.sent.status?(_(""),E("Invitation sent!")):C("Server error. Unable to send notification");case 23:e.next=29;break;case 25:e.prev=25,e.t0=e.catch(9),console.log(e.t0),C("User not found!");case 29:case"end":return e.stop()}}),e,null,[[9,25]])})));return function(t){return e.apply(this,arguments)}}(),Y=function(){var e=Object(l.a)(o.a.mark((function e(a){var s,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("Enter"!==a.key){e.next=23;break}if(a.preventDefault(),F(A),!((A.match(/^\s*\n*\t*$/)||[]).length>0)){e.next=7;break}return console.log("editedDescription is empty!"),J("Description cannot be empty!"),e.abrupt("return");case 7:if(!(A.length>200)){e.next=10;break}return J("Description cannot exceed 200 characters!"),e.abrupt("return");case 10:return e.prev=10,s={description:A},e.next=14,I.a.put("/api/groups/"+t._id,s);case 14:200===(n=e.sent).status&&(H(!1),r(n.data)),e.next=23;break;case 18:e.prev=18,e.t0=e.catch(10),console.log(e.t0),J("Server error: unable to update!"),H(!1);case 23:case"end":return e.stop()}}),e,null,[[10,18]])})));return function(t){return e.apply(this,arguments)}}(),Q=Object(w.jsx)("div",{className:"inviteComponentWrapper",children:Object(w.jsxs)("div",{className:"inviteComponentContainer",children:[Object(w.jsx)("span",{className:"inviteComponentText",children:"Who do you want to invite?"}),Object(w.jsx)("input",{className:"inviteComponentInput",placeholder:"Input name and Enter...",value:T,onChange:function(e){_(e.target.value),""!==y&&C(""),""!==R&&E("")},onKeyDown:$}),Object(w.jsx)("div",{className:"inviteComponentErrorMessage",children:y}),Object(w.jsx)("div",{className:"inviteComponentSuccessMessage",children:R})]})}),X=function(){var e=Object(l.a)(o.a.mark((function e(a){var s,n,c,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.target.files[0]){e.next=21;break}return s=a.target.files[0],console.log(s),e.prev=3,(n=new FormData).append("file",s),e.next=8,I.a.post("/api/upload/group",n);case 8:if(200!==(c=e.sent).status||!t){e.next=16;break}return r={groupImg:c.data.imagePath},console.log(r),e.next=14,I.a.put("/api/groups/"+t._id,r);case 14:200===e.sent.status&&f(c.data.imagePath);case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(3),console.log(e.t0);case 21:case"end":return e.stop()}}),e,null,[[3,18]])})));return function(t){return e.apply(this,arguments)}}();return Object(w.jsx)("div",{className:"GroupSidebarWrapper",children:Object(w.jsxs)(ue.a,{textColor:"black",backgroundColor:"#FFD68D",children:[Object(w.jsx)(ue.d,{prefix:Object(w.jsx)("i",{className:"fa fa-bars fa-large"}),children:Object(w.jsxs)("div",{className:"groupProfileDiv",children:[Object(w.jsx)("img",{className:"groupProfile",src:g?i+g:(null===t||void 0===t?void 0:t.groupImg)?i+t.groupImg:i+"group/noImageUploaded.png",alt:"",onClick:function(){j&&t&&j._id===t.creatorId?(alert("Close this dialogue and select image to upload"),document.getElementById("groupImageUploadInput").click()):alert("You must be logged in and be the creator of this group to change the group photo")}}),Object(w.jsx)("input",{style:{display:"none"},type:"file",id:"groupImageUploadInput",accept:"image/*",onChange:X})]})}),Object(w.jsxs)(ue.d,{style:{textAlign:"center"},children:[Object(w.jsx)("div",{className:"groupNameWrapper",children:Object(w.jsx)("div",{className:"groupName",children:Object(w.jsx)("span",{className:"groupNameText",children:(null===t||void 0===t?void 0:t.groupName)?t.groupName:"No Group Name"})})}),a?Object(w.jsxs)("div",{children:[Object(w.jsx)("div",{className:"groupInviteButtonWrapper",children:Object(w.jsx)("div",{className:"groupInviteButton",onClick:function(){x(!m)},children:Object(w.jsx)("span",{className:"groupInviteButtonText",children:"+ Invite"})})}),Object(w.jsx)("div",{children:m?Q:Object(w.jsx)(w.Fragment,{})})]}):Object(w.jsx)("div",{className:"groupJoinButtonWrapper",children:Object(w.jsx)("div",{className:"groupJoinButton",onClick:c,children:Object(w.jsx)("span",{className:"groupJoinButtonText",children:"+ Join Group"})})})]}),Object(w.jsx)(ue.b,{children:Object(w.jsxs)(ue.e,{children:[Object(w.jsxs)("div",{className:"groupDescriptionContainer",children:[Object(w.jsxs)("div",{className:"groupDescriptionHeader",children:[Object(w.jsx)("div",{className:"groupDescriptionHeaderText",children:"Group Description:"}),j&&t&&j._id===t.creatorId&&!W?Object(w.jsx)("div",{className:"groupDescriptionHeaderEdit",onClick:function(){return H(!0)},children:"edit"}):Object(w.jsx)(w.Fragment,{})]}),W?Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("textarea",{className:"groupDescriptionTextArea",rows:6,value:A,onChange:function(e){""!==q&&J(""),F(e.target.value)},onKeyDown:Y}),Object(w.jsx)("div",{className:"groupDescriptionError",children:q})]}):Object(w.jsx)("div",{className:"groupDescriptionContent",children:(null===t||void 0===t?void 0:t.description)?t.description:"This group creator has left no description of this group"})]}),Object(w.jsxs)(ue.f,{className:"groupMenuItem",onClick:function(){t&&K.push("/groups/"+t._id+"/main")},children:[Object(w.jsx)(Ot.a,{className:"groupMyPostsIcon"}),Object(w.jsx)("span",{className:"groupMyPosts",children:"Group Home"})]}),Object(w.jsx)(ue.f,{className:"groupMenuItem",onClick:function(){t&&K.push("/groups/"+t._id+"/myPosts")},children:a?Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(xt.a,{className:"groupMyPostsIcon"}),Object(w.jsx)("span",{className:"groupMyPosts",children:"My Posts"})]}):Object(w.jsx)(w.Fragment,{})})]})}),Object(w.jsx)(ue.c,{children:a?Object(w.jsx)("div",{className:"groupLeaveButtonWrapper",children:Object(w.jsx)("div",{className:"groupLeaveButton",onClick:n,children:Object(w.jsx)("span",{className:"groupLeaveButtonText",children:"Leave Group"})})}):Object(w.jsx)(w.Fragment,{})})]})})}a(364);function gt(e){var t=e.handleAdd,a="http://localhost:8080/images/",n=Object(s.useContext)(ee),c=n.user,r=(n.sockio,Object(s.useState)("")),i=Object(u.a)(r,2),d=i[0],j=i[1],p=Object(s.useState)(""),b=Object(u.a)(p,2),m=b[0],x=b[1],h=Object(s.useState)(""),O=Object(u.a)(h,2),v=O[0],g=O[1],f=Object(s.useState)(""),N=Object(u.a)(f,2),k=N[0],y=N[1],C=function(){var e=Object(l.a)(o.a.mark((function e(){var a,s,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((m.match(/^\s*\n*\t*$/)||[]).length>0)){e.next=3;break}return g("Item ID cannot be empty!"),e.abrupt("return");case 3:if(!((d.match(/^\s*\n*\t*$/)||[]).length>0)){e.next=6;break}return y("Description cannot be empty!"),e.abrupt("return");case 6:return console.log("itemId: "+m),console.log("description: "+d),e.prev=8,e.next=11,I.a.get("/api/items?itemId="+m);case 11:if((a=e.sent).data){e.next=15;break}return g("Item with given Item ID does not exist!"),e.abrupt("return");case 15:if(c&&a.data.userId===c._id){e.next=18;break}return g("Item with given ID does not belong to you!"),e.abrupt("return");case 18:s=m,n=d,x(""),j(""),t(s,n),e.next=29;break;case 25:e.prev=25,e.t0=e.catch(8),console.log(e.t0),g("Item with given Item ID does not exist!");case 29:case"end":return e.stop()}}),e,null,[[8,25]])})));return function(){return e.apply(this,arguments)}}();return Object(w.jsx)("div",{className:"groupSharePostWrapper",children:Object(w.jsxs)("div",{className:"groupSharePostContainer",children:[Object(w.jsx)("div",{className:"sharePostTop",children:Object(w.jsxs)("div",{className:"sharePostTopContainer",children:[Object(w.jsx)("img",{className:"sharePostProfileImg",src:(null===c||void 0===c?void 0:c.profilePicture)?a+c.profilePicture:a+"person/noAvatar.png",alt:""}),Object(w.jsx)("span",{className:"sharePostProfileText",children:(null===c||void 0===c?void 0:c.username)?c.username:"No Name"})]})}),Object(w.jsx)("div",{className:"sharePostContainer",children:Object(w.jsxs)("div",{className:"sharePostContainerWrapper",children:[Object(w.jsxs)("div",{className:"sharePostContainerTop",children:[Object(w.jsxs)("div",{className:"sharePostContainerItemId",children:[Object(w.jsx)("input",{value:m,onChange:function(e){x(e.target.value),""!==v&&g("")},className:"sharePostContainerItemIdInput",placeholder:"Input your post ID..."}),Object(w.jsx)("span",{className:"sharePostContainerErrorMessage",children:v})]}),Object(w.jsx)("div",{className:"sharePostButton",onClick:C,children:"Post"})]}),Object(w.jsxs)("div",{className:"sharePostContainerTextArea",children:[Object(w.jsx)("textarea",{value:d,onChange:function(e){j(e.target.value),""!==k&&y("")},className:"sharePostContainerTextAreaInput",placeholder:"Describe your post..."}),Object(w.jsx)("span",{className:"sharePostContainerErrorMessage",children:k})]})]})})]})})}a(365);var ft=a(235),Nt=a.n(ft),wt=a(236),kt=a.n(wt),yt=a(237),It=a.n(yt),Ct=a(238),St=a.n(Ct);a(366);function Pt(e){var t=e.commentText,a=e.commentUserId,n=(e.own,e.handleDelete,"http://localhost:8080/images/"),c=Object(s.useState)(null),r=Object(u.a)(c,2),i=r[0],d=r[1];return Object(s.useEffect)((function(){(function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I()("/api/users?userId="+a);case 3:return t=e.sent,e.next=6,d(t.data);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}})()()}),[a]),Object(w.jsx)("div",{className:"commentWrapper",children:Object(w.jsxs)("div",{className:"commentContainer",children:[Object(w.jsxs)("div",{className:"commentUserDetails",children:[Object(w.jsx)("img",{className:"commentProfileImg",src:i&&i.profilePicture?n+i.profilePicture:n+"person/noAvatar.png",alt:""}),Object(w.jsx)("span",{className:"commentProfileText",children:(null===i||void 0===i?void 0:i.username)?i.username:"No Name"})]}),Object(w.jsx)("div",{className:"commentUserContent",children:t})]})})}function Tt(e){var t=e.post,a=e.handleDelete,n=e.canCommentAndLike,c="http://localhost:8080/images/",r=Object(s.useContext)(ee),i=r.user,d=(r.sockio,Object(s.useState)(null)),j=Object(u.a)(d,2),p=j[0],b=j[1],m=Object(s.useState)([]),x=Object(u.a)(m,2),O=x[0],v=x[1],g=Object(s.useState)(null),k=Object(u.a)(g,2),y=k[0],C=k[1],S=Object(s.useState)(""),P=Object(u.a)(S,2),T=P[0],_=P[1],L=Object(s.useState)(!1),B=Object(u.a)(L,2),R=B[0],E=B[1],U=Object(s.useState)(0),D=Object(u.a)(U,2),A=D[0],F=D[1],M=Object(h.g)();Object(s.useEffect)((function(){(function(){var e=Object(l.a)(o.a.mark((function e(){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I.a.get("/api/users?userId="+(null===t||void 0===t?void 0:t.postUserId));case 3:return a=e.sent,e.next=6,b(a.data);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}})()()}),[t]),Object(s.useEffect)((function(){(function(){var e=Object(l.a)(o.a.mark((function e(){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I.a.get("/api/comments/filter?postId="+(null===t||void 0===t?void 0:t._id));case 3:return a=e.sent,e.next=6,v(a.data);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}})()()}),[t]),Object(s.useEffect)((function(){(function(){var e=Object(l.a)(o.a.mark((function e(){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I.a.get("/api/items?itemId="+(null===t||void 0===t?void 0:t.itemId));case 3:return a=e.sent,e.next=6,C(a.data);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}})()()}),[t]),Object(s.useEffect)((function(){t&&(F(t.likedBy.length),E(!!i&&t.likedBy.includes(i._id)))}),[t,i]);var G=function(){var e=Object(l.a)(o.a.mark((function e(a){var s,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("Enter"!==a.key){e.next=22;break}if(a.preventDefault(),_(T),!((T.match(/^\s*\n*\t*$/)||[]).length>0)){e.next=8;break}console.log("comment is empty!"),_(""),e.next=22;break;case 8:return console.log("adding new comment..."),s={postId:t._id,commentUserId:i._id,commentText:T},e.prev=10,_(""),e.next=14,I.a.post("/api/comments",s);case 14:return n=e.sent,e.next=17,v([].concat(Object(Ie.a)(O),[n.data]));case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(10),console.log(e.t0);case 22:case"end":return e.stop()}}),e,null,[[10,19]])})));return function(t){return e.apply(this,arguments)}}(),W=function(){var e=Object(l.a)(o.a.mark((function e(){var a,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i){e.next=5;break}M.push("/"),console.log("pushed to login"),e.next=18;break;case 5:return e.next=7,I.a.get("/api/conversations/find/"+i._id+"/"+t.postUserId);case 7:if(!((a=e.sent).data.length>0)){e.next=13;break}M.push("/chat/"+a.data[0]._id),console.log("pushed to chat id:"+a.data[0]._id),e.next=18;break;case 13:return e.next=15,I.a.post("/api/conversations",{members:[t.postUserId,i._id]});case 15:s=e.sent,M.push("/chat/"+s._id),console.log(s.data);case 18:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),H=function(){var e=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=14;break}return E(!1),F(A-1),e.prev=3,e.next=6,I.a.put("/api/posts/"+t._id+"/removeLike/"+(null===i||void 0===i?void 0:i._id));case 6:e.sent,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),console.log(e.t0);case 12:e.next=15;break;case 14:alert("You cannot dislike this post as you are either not logged in or not a member of this group!");case 15:case"end":return e.stop()}}),e,null,[[3,9]])})));return function(){return e.apply(this,arguments)}}(),V=function(){var e=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=14;break}return E(!0),F(A+1),e.prev=3,e.next=6,I.a.put("/api/posts/"+t._id+"/addLike/"+(null===i||void 0===i?void 0:i._id));case 6:e.sent,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),console.log(e.t0);case 12:e.next=15;break;case 14:alert("You cannot like this post as you are either not logged in or not a member of this group!");case 15:case"end":return e.stop()}}),e,null,[[3,9]])})));return function(){return e.apply(this,arguments)}}();return Object(w.jsx)("div",{className:"postWrapper",children:Object(w.jsxs)("div",{className:"postContainer",children:[Object(w.jsx)("div",{className:"postTop",children:Object(w.jsxs)(f.a,{className:"postTopContainerWrapper",children:[Object(w.jsxs)(N.a,{className:"postTopContainerLeft",children:[Object(w.jsx)("img",{className:"postProfileImg",src:p&&p.profilePicture?c+p.profilePicture:c+"person/noAvatar.png",alt:"",onClick:function(){p&&M.push("/profile/"+p.username+"/listings")}}),Object(w.jsx)("span",{className:"postProfileText",children:(null===p||void 0===p?void 0:p.username)?p.username:"No Name"})]}),Object(w.jsx)(N.a,{className:"postTopContainerRight",children:i&&i._id===t.postUserId?Object(w.jsx)("div",{className:"deleteButtonWrapper",children:Object(w.jsx)("div",{className:"deleteButton",onClick:function(){return a(t._id)},children:Object(w.jsx)("span",{className:"deleteButtonText",children:"Delete"})})}):Object(w.jsx)("div",{className:"postSwapButtonWrapper",children:Object(w.jsxs)("div",{className:"postSwapButton",onClick:W,children:[Object(w.jsx)(Nt.a,{className:"chatIcon"}),Object(w.jsx)("span",{className:"postSwapButtonText",children:"Swap Away!"})]})})})]})}),Object(w.jsxs)("div",{className:"postMiddle",children:[Object(w.jsx)("div",{className:"postMiddleDescription",children:Object(w.jsx)("div",{className:"postMiddleDescriptionContainer",children:(null===t||void 0===t?void 0:t.description)?t.description:"No description available"})}),Object(w.jsx)("div",{className:"postMiddleItemListing",children:Object(w.jsx)(Oe,{item:y,inPost:!0})}),Object(w.jsx)("div",{className:"postMiddleItemLikesComments",children:Object(w.jsxs)("div",{className:"postMiddleItemLikesCommentsContainer",children:[Object(w.jsxs)("div",{className:"postMiddleItemLikes",children:[R?Object(w.jsx)(kt.a,{onClick:H}):Object(w.jsx)(It.a,{onClick:V}),Object(w.jsx)("span",{className:"numberLikes",children:A})]}),Object(w.jsxs)("div",{className:"postMiddleItemComments",children:[Object(w.jsx)(St.a,{}),Object(w.jsx)("span",{className:"numberComments",children:O.length})]})]})})]}),Object(w.jsxs)("div",{className:"postBottom",children:[n&&Object(w.jsx)("div",{className:"postCommentInputWrapper",children:Object(w.jsx)("textarea",{value:T,onChange:function(e){return _(e.target.value)},onKeyDown:G,className:"postCommentInput",placeholder:"Write a comment and press enter to send..."})}),Object(w.jsx)("div",{className:"postCommentContentSection",children:O.map((function(e){return Object(w.jsx)(Pt,{commentText:e.commentText,commentUserId:e.commentUserId},e._id)}))})]})]})})}function _t(){var e=Object(s.useContext)(ee),t=e.user,a=(e.sockio,Object(h.h)().groupId),n=Object(h.h)().pageType,c=Object(s.useState)([]),r=Object(u.a)(c,2),i=r[0],d=r[1],j=Object(s.useState)(null),p=Object(u.a)(j,2),b=p[0],m=p[1],x=Object(s.useState)(!1),O=Object(u.a)(x,2),v=O[0],g=O[1],f=Object(h.g)();Object(s.useEffect)((function(){(function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I.a.get("/api/groups?groupId="+a);case 3:return t=e.sent,e.next=6,m(t.data);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}})()()}),[a]),Object(s.useEffect)((function(){b&&t&&g(b.members.includes(t._id))}),[b,t]),Object(s.useEffect)((function(){(function(){var e=Object(l.a)(o.a.mark((function e(){var s,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,"main"!==n){e.next=10;break}return console.log("page type is main"),e.next=5,I.a.get("/api/posts/filter?groupId="+a);case 5:return s=e.sent,e.next=8,d(s.data);case 8:e.next=17;break;case 10:if("myPosts"!==n){e.next=17;break}return console.log("page type is myPosts"),e.next=14,I.a.get("/api/posts/filter?groupId="+a+"&userId="+(null===t||void 0===t?void 0:t._id));case 14:return c=e.sent,e.next=17,d(c.data);case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(0),console.log(e.t0);case 22:case"end":return e.stop()}}),e,null,[[0,19]])})));return function(){return e.apply(this,arguments)}})()()}),[n,a,t]);var N=function(){var e=Object(l.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("deleting post with id: "+t),e.next=4,I.a.delete("/api/posts?postId="+t);case 4:if(200!==(a=e.sent).status){e.next=10;break}return console.log(a.data.message),d(i.filter((function(e){return e._id!==t}))),e.next=10,I.a.delete("/api/comments/filter?postId="+t);case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=Object(l.a)(o.a.mark((function e(a,s){var n,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!b||!t){e.next=8;break}return n={groupId:b._id,postUserId:t._id,description:s,itemId:a},console.log(n),e.next=6,I.a.post("/api/posts",n);case 6:200===(c=e.sent).status&&d([c.data].concat(Object(Ie.a)(i)));case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,a){return e.apply(this,arguments)}}(),y=function(){var e=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!b||!t){e.next=6;break}return e.next=4,I.a.put("/api/groups/"+b._id+"/removeMember/"+t._id);case 4:200===e.sent.status&&g(!1);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t||f.push("/"),!b||!t){e.next=7;break}return e.next=5,I.a.put("/api/groups/"+b._id+"/addMember/"+t._id);case 5:200===e.sent.status&&g(!0);case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();return Object(w.jsxs)("div",{children:[Object(w.jsx)("div",{className:"groupPageTop",children:Object(w.jsx)(C,{currentUser:t})}),Object(w.jsxs)("div",{className:"groupPageContainer",children:[Object(w.jsx)("div",{className:"groupSidebarWrapper",children:Object(w.jsx)(vt,{className:"groupSidebarComponent",group:b,isGroupMember:v,handleLeave:y,handleJoin:S,handleUpdateGroup:function(e){e&&m(e)}})}),Object(w.jsxs)("div",{className:"groupPageContainerRight",children:[Object(w.jsx)("div",{className:"groupPagecontainerRightShareWrapper",children:b&&t&&v&&"main"===n?Object(w.jsx)(gt,{handleAdd:k}):Object(w.jsx)(w.Fragment,{})}),i.map((function(e){return Object(w.jsx)(Tt,{post:e,handleDelete:N,canCommentAndLike:b&&t&&v},e._id)}))]})]})]})}var Lt=function(){var e=Object(s.useContext)(ee).user;return Object(w.jsx)(O.a,{children:Object(w.jsxs)(h.d,{children:[Object(w.jsx)(h.b,{exact:!0,path:"/",children:e?Object(w.jsx)(h.a,{to:"/home"}):Object(w.jsx)(ot,{})}),Object(w.jsx)(h.b,{path:"/register",children:e?Object(w.jsx)(h.a,{to:"/home"}):Object(w.jsx)(ie,{})}),Object(w.jsx)(h.b,{exact:!0,path:"/product/:pageType/:categoryName",children:Object(w.jsx)(Se,{})}),Object(w.jsx)(h.b,{exact:!0,path:"/home",children:Object(w.jsx)(ne,{})}),Object(w.jsx)(h.b,{exact:!0,path:"/create",children:e?Object(w.jsx)(He,{}):Object(w.jsx)(ot,{})}),Object(w.jsx)(h.b,{exact:!0,path:"/chat/:initialActiveConvoId",children:e?Object(w.jsx)(jt,{}):Object(w.jsx)(ot,{})}),Object(w.jsx)(h.b,{exact:!0,path:"/profile/:username/listings",children:Object(w.jsx)(ye,{})}),Object(w.jsx)(h.b,{exact:!0,path:"/profile/:username/reviews",children:Object(w.jsx)(Ce,{})}),Object(w.jsx)(h.b,{exact:!0,path:"/profile/:username/settings",children:Object(w.jsx)(bt,{})}),Object(w.jsx)(h.b,{exact:!0,path:"/profile/:username/mygroups",children:Object(w.jsx)(pt,{})}),Object(w.jsx)(h.b,{exact:!0,path:"/items/:itemId",children:Object(w.jsx)(et,{})}),Object(w.jsx)(h.b,{exact:!0,path:"/groups/:groupId/:pageType",children:Object(w.jsx)(_t,{})})]})})},Bt=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,448)).then((function(t){var a=t.getCLS,s=t.getFID,n=t.getFCP,c=t.getLCP,r=t.getTTFB;a(e),s(e),n(e),c(e),r(e)}))};r.a.render(Object(w.jsx)(n.a.StrictMode,{children:Object(w.jsx)(te,{children:Object(w.jsx)(Lt,{})})}),document.getElementById("root")),Bt()}},[[367,1,2]]]);
//# sourceMappingURL=main.200fa9ff.chunk.js.map